"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_tanstack_react-query_build_-2dfd94"],{78075:(t,e,i)=>{i.d(e,{AH:()=>ep,Hz:()=>ev,X9:()=>ec,Ys:()=>el,n0:()=>eo,xp:()=>et});var n=Object.create,r=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,d=(t,e)=>{if(e=Symbol[t])return e;throw Error("Symbol."+t+" is not defined")},p=(t,e,i)=>e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,v=(t,e)=>{for(var i in e||(e={}))c.call(e,i)&&p(t,i,e[i]);if(h)for(var i of h(e))f.call(e,i)&&p(t,i,e[i]);return t},m=(t,e)=>o(t,a(e)),y=(t,e)=>{var i={};for(var n in t)c.call(t,n)&&0>e.indexOf(n)&&(i[n]=t[n]);if(null!=t&&h)for(var n of h(t))0>e.indexOf(n)&&f.call(t,n)&&(i[n]=t[n]);return i},g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e,i,n)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of l(e))c.call(t,o)||o===i||r(t,o,{get:()=>e[o],enumerable:!(n=s(e,o))||n.enumerable});return t},x=(t,e,i)=>(i=null!=t?n(u(t)):{},b(!e&&t&&t.__esModule?i:r(i,"default",{value:t,enumerable:!0}),t)),w=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},I=(t,e,i)=>(w(t,e,"read from private field"),i?i.call(t):e.get(t)),k=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},M=(t,e,i,n)=>(w(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),C=(t,e,i)=>(w(t,e,"access private method"),i),_=function(t,e){this[0]=t,this[1]=e},B=t=>{var e,i=t[d("asyncIterator")],n=!1,r={};return null==i?(i=t[d("iterator")](),e=t=>r[t]=e=>i[t](e)):(i=i.call(t),e=t=>r[t]=e=>{if(n){if(n=!1,"throw"===t)throw e;return e}return n=!0,{done:!1,value:new _(new Promise(n=>{var r=i[t](e);if(!(r instanceof Object))throw TypeError("Object expected");n(r)}),1)}}),r[d("iterator")]=()=>r,e("next"),"throw"in i?e("throw"):r.throw=t=>{throw t},"return"in i&&e("return"),r},O=g((t,e)=>{function i(t,e,i,n){this.feasible=i,this.evaluation=e,this.bounded=n,this._tableau=t}e.exports=i,i.prototype.generateSolutionSet=function(){for(var t={},e=this._tableau,i=e.varIndexByRow,n=e.variablesPerIndex,r=e.matrix,o=e.rhsColumn,s=e.height-1,a=Math.round(1/e.precision),l=1;l<=s;l+=1){var h=n[i[l]];if(!(void 0===h||!0===h.isSlack)){var u=r[l][o];t[h.id]=Math.round((Number.EPSILON+u)*a)/a}}return t}}),V=g((t,e)=>{var i=O();function n(t,e,n,r,o){i.call(this,t,e,n,r),this.iter=o}e.exports=n,n.prototype=Object.create(i.prototype),n.constructor=n}),S=g((t,e)=>{var i=O(),n=V();function r(t){this.model=null,this.matrix=null,this.width=0,this.height=0,this.costRowIndex=0,this.rhsColumn=0,this.variablesPerIndex=[],this.unrestrictedVars=null,this.feasible=!0,this.evaluation=0,this.simplexIters=0,this.varIndexByRow=null,this.varIndexByCol=null,this.rowByVarIndex=null,this.colByVarIndex=null,this.precision=t||1e-8,this.optionalObjectives=[],this.objectivesByPriority={},this.savedState=null,this.availableIndexes=[],this.lastElementIndex=0,this.variables=null,this.nVars=0,this.bounded=!0,this.unboundedVarIndex=null,this.branchAndCutIterations=0}function o(t,e){this.priority=t,this.reducedCosts=Array(e);for(var i=0;i<e;i+=1)this.reducedCosts[i]=0}e.exports=r,r.prototype.solve=function(){return this.model.getNumberOfIntegerVariables()>0?this.branchAndCut():this.simplex(),this.updateVariableValues(),this.getSolution()},o.prototype.copy=function(){var t=new o(this.priority,this.reducedCosts.length);return t.reducedCosts=this.reducedCosts.slice(),t},r.prototype.setOptionalObjective=function(t,e,i){var n=this.objectivesByPriority[t];void 0===n&&(n=new o(t,Math.max(this.width,e+1)),this.objectivesByPriority[t]=n,this.optionalObjectives.push(n),this.optionalObjectives.sort(function(t,e){return t.priority-e.priority})),n.reducedCosts[e]=i},r.prototype.initialize=function(t,e,i,n){this.variables=i,this.unrestrictedVars=n,this.width=t,this.height=e;for(var r=Array(t),o=0;o<t;o++)r[o]=0;this.matrix=Array(e);for(var s=0;s<e;s++)this.matrix[s]=r.slice();this.varIndexByRow=Array(this.height),this.varIndexByCol=Array(this.width),this.varIndexByRow[0]=-1,this.varIndexByCol[0]=-1,this.nVars=t+e-2,this.rowByVarIndex=Array(this.nVars),this.colByVarIndex=Array(this.nVars),this.lastElementIndex=this.nVars},r.prototype._resetMatrix=function(){var t,e,i=this.model.variables,n=this.model.constraints,r=i.length,o=n.length,s=this.matrix[0],a=!0===this.model.isMinimization?-1:1;for(t=0;t<r;t+=1){var l=i[t],h=l.priority,u=a*l.cost;0===h?s[t+1]=u:this.setOptionalObjective(h,t+1,u),e=i[t].index,this.rowByVarIndex[e]=-1,this.colByVarIndex[e]=t+1,this.varIndexByCol[t+1]=e}for(var c=1,f=0;f<o;f+=1){var d=n[f],p=d.index;this.rowByVarIndex[p]=c,this.colByVarIndex[p]=-1,this.varIndexByRow[c]=p;var v,m,y=d.terms,g=y.length,b=this.matrix[c++];if(d.isUpperBound){for(v=0;v<g;v+=1)m=y[v],b[this.colByVarIndex[m.variable.index]]=m.coefficient;b[0]=d.rhs}else{for(v=0;v<g;v+=1)m=y[v],b[this.colByVarIndex[m.variable.index]]=-m.coefficient;b[0]=-d.rhs}}},r.prototype.setModel=function(t){this.model=t;var e=t.nVariables+1,i=t.nConstraints+1;return this.initialize(e,i,t.variables,t.unrestrictedVariables),this._resetMatrix(),this},r.prototype.getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},r.prototype.density=function(){for(var t=0,e=this.matrix,i=0;i<this.height;i++)for(var n=e[i],r=0;r<this.width;r++)0!==n[r]&&(t+=1);return t/(this.height*this.width)},r.prototype.setEvaluation=function(){var t=Math.round(1/this.precision),e=Math.round((Number.EPSILON+this.matrix[this.costRowIndex][this.rhsColumn])*t)/t;this.evaluation=e,0===this.simplexIters&&(this.bestPossibleEval=e)},r.prototype.getSolution=function(){var t=!0===this.model.isMinimization?this.evaluation:-this.evaluation;return this.model.getNumberOfIntegerVariables()>0?new n(this,t,this.feasible,this.bounded,this.branchAndCutIterations):new i(this,t,this.feasible,this.bounded)}}),z=g(()=>{var t=S();t.prototype.simplex=function(){return this.bounded=!0,this.phase1(),!0===this.feasible&&this.phase2(),this},t.prototype.phase1=function(){for(var t=this.model.checkForCycles,e=[],i=this.matrix,n=this.rhsColumn,r=this.width-1,o=this.height-1,s=0;;){for(var a=0,l=-this.precision,h=1;h<=o;h++){this.unrestrictedVars[this.varIndexByRow[h]];var u=i[h][n];u<l&&(l=u,a=h)}if(0===a)return this.feasible=!0,s;for(var c=0,f=-1/0,d=i[0],p=i[a],v=1;v<=r;v++){var m=p[v];if(!0===this.unrestrictedVars[this.varIndexByCol[v]]||m<-this.precision){var y=-d[v]/m;f<y&&(f=y,c=v)}}if(0===c)return this.feasible=!1,s;if(t){e.push([this.varIndexByRow[a],this.varIndexByCol[c]]);var g=this.checkForCycles(e);if(g.length>0)return this.model.messages.push("Cycle in phase 1"),this.model.messages.push("Start :"+g[0]),this.model.messages.push("Length :"+g[1]),this.feasible=!1,s}this.pivot(a,c),s+=1}},t.prototype.phase2=function(){for(var t,e,i=this.model.checkForCycles,n=[],r=this.matrix,o=this.rhsColumn,s=this.width-1,a=this.height-1,l=this.precision,h=this.optionalObjectives.length,u=null,c=0;;){var f=r[this.costRowIndex];h>0&&(u=[]);for(var d=0,p=l,v=!1,m=1;m<=s;m++){if(t=f[m],e=!0===this.unrestrictedVars[this.varIndexByCol[m]],h>0&&-l<t&&t<l){u.push(m);continue}if(e&&t<0){-t>p&&(p=-t,d=m,v=!0);continue}t>p&&(p=t,d=m,v=!1)}if(h>0)for(var y=0;0===d&&u.length>0&&y<h;){var g=[],b=this.optionalObjectives[y].reducedCosts;p=l;for(var x=0;x<u.length;x++){if(t=b[m=u[x]],e=!0===this.unrestrictedVars[this.varIndexByCol[m]],-l<t&&t<l){g.push(m);continue}if(e&&t<0){-t>p&&(p=-t,d=m,v=!0);continue}t>p&&(p=t,d=m,v=!1)}u=g,y+=1}if(0===d)return this.setEvaluation(),this.simplexIters+=1,c;for(var w=0,I=1/0,k=(this.varIndexByRow,1);k<=a;k++){var M=r[k],C=M[o],_=M[d];if(!(-l<_&&_<l)){if(_>0&&l>C&&C>-l){I=0,w=k;break}var B=v?-C/_:C/_;B>l&&I>B&&(I=B,w=k)}}if(I===1/0)return this.evaluation=-1/0,this.bounded=!1,this.unboundedVarIndex=this.varIndexByCol[d],c;if(i){n.push([this.varIndexByRow[w],this.varIndexByCol[d]]);var O=this.checkForCycles(n);if(O.length>0)return this.model.messages.push("Cycle in phase 2"),this.model.messages.push("Start :"+O[0]),this.model.messages.push("Length :"+O[1]),this.feasible=!1,c}this.pivot(w,d,!0),c+=1}};var e=[];t.prototype.pivot=function(t,i){var n=this.matrix,r=n[t][i],o=this.height-1,s=this.width-1,a=this.varIndexByRow[t],l=this.varIndexByCol[i];this.varIndexByRow[t]=l,this.varIndexByCol[i]=a,this.rowByVarIndex[l]=t,this.rowByVarIndex[a]=-1,this.colByVarIndex[l]=-1,this.colByVarIndex[a]=i;for(var h=n[t],u=0,c=0;c<=s;c++)h[c]>=-1e-16&&h[c]<=1e-16?h[c]=0:(h[c]/=r,e[u]=c,u+=1);h[i]=1/r,this.precision;for(var f,d,p,v=0;v<=o;v++)if(v!==t&&!(n[v][i]>=-1e-16&&n[v][i]<=1e-16)){var m=n[v];if((f=m[i])>=-1e-16&&f<=1e-16)0!==f&&(m[i]=0);else{for(d=0;d<u;d++)(p=h[c=e[d]])>=-1e-16&&p<=1e-16?0!==p&&(h[c]=0):m[c]=m[c]-f*p;m[i]=-f/r}}var y=this.optionalObjectives.length;if(y>0)for(var g=0;g<y;g+=1){var b=this.optionalObjectives[g].reducedCosts;if(0!==(f=b[i])){for(d=0;d<u;d++)0!==(p=h[c=e[d]])&&(b[c]=b[c]-f*p);b[i]=-f/r}}},t.prototype.checkForCycles=function(t){for(var e=0;e<t.length-1;e++)for(var i=e+1;i<t.length;i++){var n=t[e],r=t[i];if(n[0]===r[0]&&n[1]===r[1]){if(i-e>t.length-i)break;for(var o=!0,s=1;s<i-e;s++){var a=t[e+s],l=t[i+s];if(a[0]!==l[0]||a[1]!==l[1]){o=!1;break}}if(o)return[e,i-e]}}return[]}}),E=g((t,e)=>{function i(t,e,i,n){this.id=t,this.cost=e,this.index=i,this.value=0,this.priority=n}function n(t,e,n,r){i.call(this,t,e,n,r)}function r(t,e){i.call(this,t,0,e,0)}function o(t,e){this.variable=t,this.coefficient=e}function s(t,e,i){return 0===i||"required"===i?null:(e=e||1,i=i||1,!1===t.isMinimization&&(e=-e),t.addVariable(e,"r"+t.relaxationIndex++,!1,!1,i))}function a(t,e,i,n){this.slack=new r("s"+i,i),this.index=i,this.model=n,this.rhs=t,this.isUpperBound=e,this.terms=[],this.termsByVarIndex={},this.relaxation=null}function l(t,e){this.upperBound=t,this.lowerBound=e,this.model=t.model,this.rhs=t.rhs,this.relaxation=null}n.prototype.isInteger=!0,r.prototype.isSlack=!0,a.prototype.addTerm=function(t,e){var i=e.index,n=this.termsByVarIndex[i];if(void 0===n)n=new o(e,t),this.termsByVarIndex[i]=n,this.terms.push(n),!0===this.isUpperBound&&(t=-t),this.model.updateConstraintCoefficient(this,e,t);else{var r=n.coefficient+t;this.setVariableCoefficient(r,e)}return this},a.prototype.removeTerm=function(t){return this},a.prototype.setRightHandSide=function(t){if(t!==this.rhs){var e=t-this.rhs;!0===this.isUpperBound&&(e=-e),this.rhs=t,this.model.updateRightHandSide(this,e)}return this},a.prototype.setVariableCoefficient=function(t,e){var i=e.index;if(-1===i){console.warn("[Constraint.setVariableCoefficient] Trying to change coefficient of inexistant variable.");return}var n=this.termsByVarIndex[i];if(void 0===n)this.addTerm(t,e);else if(t!==n.coefficient){var r=t-n.coefficient;!0===this.isUpperBound&&(r=-r),n.coefficient=t,this.model.updateConstraintCoefficient(this,e,r)}return this},a.prototype.relax=function(t,e){this.relaxation=s(this.model,t,e),this._relax(this.relaxation)},a.prototype._relax=function(t){null!==t&&(this.isUpperBound?this.setVariableCoefficient(-1,t):this.setVariableCoefficient(1,t))},l.prototype.isEquality=!0,l.prototype.addTerm=function(t,e){return this.upperBound.addTerm(t,e),this.lowerBound.addTerm(t,e),this},l.prototype.removeTerm=function(t){return this.upperBound.removeTerm(t),this.lowerBound.removeTerm(t),this},l.prototype.setRightHandSide=function(t){this.upperBound.setRightHandSide(t),this.lowerBound.setRightHandSide(t),this.rhs=t},l.prototype.relax=function(t,e){this.relaxation=s(this.model,t,e),this.upperBound.relaxation=this.relaxation,this.upperBound._relax(this.relaxation),this.lowerBound.relaxation=this.relaxation,this.lowerBound._relax(this.relaxation)},e.exports={Constraint:a,Variable:i,IntegerVariable:n,SlackVariable:r,Equality:l,Term:o}}),R=g(()=>{var t=S(),e=E().SlackVariable;t.prototype.addCutConstraints=function(t){for(var i=t.length,n=this.height,r=n+i,o=n;o<r;o+=1)void 0===this.matrix[o]&&(this.matrix[o]=this.matrix[o-1].slice());this.height=r,this.nVars=this.width+this.height-2;for(var s,a=this.width-1,l=0;l<i;l+=1){var h=t[l],u=n+l,c="min"===h.type?-1:1,f=h.varIndex,d=this.rowByVarIndex[f],p=this.matrix[u];if(-1===d){for(p[this.rhsColumn]=c*h.value,s=1;s<=a;s+=1)p[s]=0;p[this.colByVarIndex[f]]=c}else{var v=this.matrix[d],m=v[this.rhsColumn];for(p[this.rhsColumn]=c*(h.value-m),s=1;s<=a;s+=1)p[s]=-c*v[s]}var y=this.getNewElementIndex();this.varIndexByRow[u]=y,this.rowByVarIndex[y]=u,this.colByVarIndex[y]=-1,this.variablesPerIndex[y]=new e("s"+y,y),this.nVars+=1}},t.prototype._addLowerBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var i=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=i[t][this.rhsColumn],r=n-Math.floor(n);if(r<this.precision||1-this.precision<r)return!1;var o=this.height;i[o]=i[o-1].slice(),this.height+=1,this.nVars+=1;var s=this.getNewElementIndex();this.varIndexByRow[o]=s,this.rowByVarIndex[s]=o,this.colByVarIndex[s]=-1,this.variablesPerIndex[s]=new e("s"+s,s),i[o][this.rhsColumn]=Math.floor(n);for(var a=1;a<this.varIndexByCol.length;a+=1)if(this.variablesPerIndex[this.varIndexByCol[a]].isInteger){var l=i[t][a],h=Math.floor(l)+Math.max(0,l-Math.floor(l)-r)/(1-r);i[o][a]=h}else i[o][a]=Math.min(0,i[t][a]/(1-r));for(var u=0;u<this.width;u+=1)i[o][u]-=i[t][u];return!0},t.prototype._addUpperBoundMIRCut=function(t){if(t===this.costRowIndex)return!1;this.model;var i=this.matrix;if(!this.variablesPerIndex[this.varIndexByRow[t]].isInteger)return!1;var n=i[t][this.rhsColumn],r=n-Math.floor(n);if(r<this.precision||1-this.precision<r)return!1;var o=this.height;i[o]=i[o-1].slice(),this.height+=1,this.nVars+=1;var s=this.getNewElementIndex();this.varIndexByRow[o]=s,this.rowByVarIndex[s]=o,this.colByVarIndex[s]=-1,this.variablesPerIndex[s]=new e("s"+s,s),i[o][this.rhsColumn]=-r;for(var a=1;a<this.varIndexByCol.length;a+=1){var l=this.variablesPerIndex[this.varIndexByCol[a]],h=i[t][a],u=h-Math.floor(h);l.isInteger?u<=r?i[o][a]=-u:i[o][a]=-(1-u)*r/u:h>=0?i[o][a]=-h:i[o][a]=h*r/(1-r)}return!0},t.prototype.applyMIRCuts=function(){}}),T=g(()=>{var t=S();t.prototype._putInBase=function(t){var e=this.rowByVarIndex[t];if(-1===e){for(var i=this.colByVarIndex[t],n=1;n<this.height;n+=1){var r=this.matrix[n][i];if(r<-this.precision||this.precision<r){e=n;break}}this.pivot(e,i)}return e},t.prototype._takeOutOfBase=function(t){var e=this.colByVarIndex[t];if(-1===e){for(var i=this.rowByVarIndex[t],n=this.matrix[i],r=1;r<this.height;r+=1){var o=n[r];if(o<-this.precision||this.precision<o){e=r;break}}this.pivot(i,e)}return e},t.prototype.updateVariableValues=function(){for(var t=this.variables.length,e=Math.round(1/this.precision),i=0;i<t;i+=1){var n=this.variables[i],r=n.index,o=this.rowByVarIndex[r];if(-1===o)n.value=0;else{var s=this.matrix[o][this.rhsColumn];n.value=Math.round((s+Number.EPSILON)*e)/e}}},t.prototype.updateRightHandSide=function(t,e){var i=this.height-1,n=this.rowByVarIndex[t.index];if(-1===n){for(var r=this.colByVarIndex[t.index],o=0;o<=i;o+=1){var s=this.matrix[o];s[this.rhsColumn]-=e*s[r]}var a=this.optionalObjectives.length;if(a>0)for(var l=0;l<a;l+=1){var h=this.optionalObjectives[l].reducedCosts;h[this.rhsColumn]-=e*h[r]}}else this.matrix[n][this.rhsColumn]-=e},t.prototype.updateConstraintCoefficient=function(t,e,i){if(t.index===e.index)throw Error("[Tableau.updateConstraintCoefficient] constraint index should not be equal to variable index !");var n=this._putInBase(t.index),r=this.colByVarIndex[e.index];if(-1===r)for(var o=this.rowByVarIndex[e.index],s=0;s<this.width;s+=1)this.matrix[n][s]+=i*this.matrix[o][s];else this.matrix[n][r]-=i},t.prototype.updateCost=function(t,e){var i=t.index,n=this.width-1,r=this.colByVarIndex[i];if(-1===r){var o,s=this.matrix[this.rowByVarIndex[i]];if(0===t.priority){var a=this.matrix[0];for(o=0;o<=n;o+=1)a[o]+=e*s[o]}else{var l=this.objectivesByPriority[t.priority].reducedCosts;for(o=0;o<=n;o+=1)l[o]+=e*s[o]}}else this.matrix[0][r]-=e},t.prototype.addConstraint=function(t){var e=t.isUpperBound?1:-1,i=this.height,n=this.matrix[i];void 0===n&&(n=this.matrix[0].slice(),this.matrix[i]=n);for(var r=this.width-1,o=0;o<=r;o+=1)n[o]=0;n[this.rhsColumn]=e*t.rhs;for(var s=t.terms,a=s.length,l=0;l<a;l+=1){var h=s[l],u=h.coefficient,c=h.variable.index,f=this.rowByVarIndex[c];if(-1===f)n[this.colByVarIndex[c]]+=e*u;else{var d=this.matrix[f];for(d[this.rhsColumn],o=0;o<=r;o+=1)n[o]-=e*u*d[o]}}var p=t.index;this.varIndexByRow[i]=p,this.rowByVarIndex[p]=i,this.colByVarIndex[p]=-1,this.height+=1},t.prototype.removeConstraint=function(t){var e=t.index,i=this.height-1,n=this._putInBase(e),r=this.matrix[i];this.matrix[i]=this.matrix[n],this.matrix[n]=r,this.varIndexByRow[n]=this.varIndexByRow[i],this.varIndexByRow[i]=-1,this.rowByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.slack.index=-1,this.height-=1},t.prototype.addVariable=function(t){var e=this.height-1,i=this.width,n=!0===this.model.isMinimization?-t.cost:t.cost,r=t.priority,o=this.optionalObjectives.length;if(o>0)for(var s=0;s<o;s+=1)this.optionalObjectives[s].reducedCosts[i]=0;0===r?this.matrix[0][i]=n:(this.setOptionalObjective(r,i,n),this.matrix[0][i]=0);for(var a=1;a<=e;a+=1)this.matrix[a][i]=0;var l=t.index;this.varIndexByCol[i]=l,this.rowByVarIndex[l]=-1,this.colByVarIndex[l]=i,this.width+=1},t.prototype.removeVariable=function(t){var e=t.index,i=this._takeOutOfBase(e),n=this.width-1;if(i!==n){for(var r=this.height-1,o=0;o<=r;o+=1){var s=this.matrix[o];s[i]=s[n]}var a=this.optionalObjectives.length;if(a>0)for(var l=0;l<a;l+=1){var h=this.optionalObjectives[l].reducedCosts;h[i]=h[n]}var u=this.varIndexByCol[n];this.varIndexByCol[i]=u,this.colByVarIndex[u]=i}this.varIndexByCol[n]=-1,this.colByVarIndex[e]=-1,this.availableIndexes[this.availableIndexes.length]=e,t.index=-1,this.width-=1}}),j=g(()=>{S().prototype.log=function(t,e){console.log("****",t,"****"),console.log("Nb Variables",this.width-1),console.log("Nb Constraints",this.height-1),console.log("Basic Indexes",this.varIndexByRow),console.log("Non Basic Indexes",this.varIndexByCol),console.log("Rows",this.rowByVarIndex),console.log("Cols",this.colByVarIndex);var i,n,r,o,s,a,l,h,u,c,f,d="",p=[" "];for(n=1;n<this.width;n+=1)s=this.varIndexByCol[n],l=(a=void 0===(o=this.variablesPerIndex[s])?"c"+s:o.id).length,h=" ",u="	",l>5?h+=" ":u+="	",p[n]=h,d+=u+a;console.log(d);var v=this.matrix[this.costRowIndex],m="	";for(i=1;i<this.width;i+=1)m+="	",m+=p[i],m+=v[i].toFixed(5);for(console.log((m+="	"+p[0]+v[0].toFixed(5))+"	Z"),r=1;r<this.height;r+=1){for(c=this.matrix[r],f="	",n=1;n<this.width;n+=1)f+="	"+p[n]+c[n].toFixed(5);f+="	"+p[0]+c[0].toFixed(5),s=this.varIndexByRow[r],console.log(f+"	"+(a=void 0===(o=this.variablesPerIndex[s])?"c"+s:o.id))}console.log("");var y=this.optionalObjectives.length;if(y>0){console.log("    Optional objectives:");for(var g=0;g<y;g+=1){var b=this.optionalObjectives[g].reducedCosts,x="";for(i=1;i<this.width;i+=1)x+=b[i]<0?"":" ",x+=p[i],x+=b[i].toFixed(5);console.log((x+=(b[0]<0?"":" ")+p[0]+b[0].toFixed(5))+" z"+g)}}return console.log("Feasible?",this.feasible),console.log("evaluation",this.evaluation),this}}),A=g(()=>{var t=S();t.prototype.copy=function(){var e=new t(this.precision);e.width=this.width,e.height=this.height,e.nVars=this.nVars,e.model=this.model,e.variables=this.variables,e.variablesPerIndex=this.variablesPerIndex,e.unrestrictedVars=this.unrestrictedVars,e.lastElementIndex=this.lastElementIndex,e.varIndexByRow=this.varIndexByRow.slice(),e.varIndexByCol=this.varIndexByCol.slice(),e.rowByVarIndex=this.rowByVarIndex.slice(),e.colByVarIndex=this.colByVarIndex.slice(),e.availableIndexes=this.availableIndexes.slice();for(var i=[],n=0;n<this.optionalObjectives.length;n++)i[n]=this.optionalObjectives[n].copy();e.optionalObjectives=i;for(var r=this.matrix,o=Array(this.height),s=0;s<this.height;s++)o[s]=r[s].slice();return e.matrix=o,e},t.prototype.save=function(){this.savedState=this.copy()},t.prototype.restore=function(){if(null!==this.savedState){var t,e,i=this.savedState,n=i.matrix;for(this.nVars=i.nVars,this.model=i.model,this.variables=i.variables,this.variablesPerIndex=i.variablesPerIndex,this.unrestrictedVars=i.unrestrictedVars,this.lastElementIndex=i.lastElementIndex,this.width=i.width,this.height=i.height,t=0;t<this.height;t+=1){var r=n[t],o=this.matrix[t];for(e=0;e<this.width;e+=1)o[e]=r[e]}var s=i.varIndexByRow;for(e=0;e<this.height;e+=1)this.varIndexByRow[e]=s[e];for(;this.varIndexByRow.length>this.height;)this.varIndexByRow.pop();var a=i.varIndexByCol;for(t=0;t<this.width;t+=1)this.varIndexByCol[t]=a[t];for(;this.varIndexByCol.length>this.width;)this.varIndexByCol.pop();for(var l=i.rowByVarIndex,h=i.colByVarIndex,u=0;u<this.nVars;u+=1)this.rowByVarIndex[u]=l[u],this.colByVarIndex[u]=h[u];if(i.optionalObjectives.length>0&&this.optionalObjectives.length>0){this.optionalObjectives=[],this.optionalObjectivePerPriority={};for(var c=0;c<i.optionalObjectives.length;c++){var f=i.optionalObjectives[c].copy();this.optionalObjectives[c]=f,this.optionalObjectivePerPriority[f.priority]=f}}}}}),P=g(()=>{var t=S();function e(t,e){this.index=t,this.value=e}t.prototype.getMostFractionalVar=function(){for(var t=0,i=null,n=null,r=this.model.integerVariables,o=r.length,s=0;s<o;s++){var a=r[s].index,l=this.rowByVarIndex[a];if(-1!==l){var h=this.matrix[l][this.rhsColumn],u=Math.abs(h-Math.round(h));t<u&&(t=u,i=a,n=h)}}return new e(i,n)},t.prototype.getFractionalVarWithLowestCost=function(){for(var t=1/0,i=null,n=null,r=this.model.integerVariables,o=r.length,s=0;s<o;s++){var a=r[s],l=a.index,h=this.rowByVarIndex[l];if(-1!==h){var u=this.matrix[h][this.rhsColumn];if(Math.abs(u-Math.round(u))>this.precision){var c=a.cost;t>c&&(t=c,i=l,n=u)}}}return new e(i,n)}}),$=g(()=>{var t=S();t.prototype.countIntegerValues=function(){for(var t=0,e=1;e<this.height;e+=1)if(this.variablesPerIndex[this.varIndexByRow[e]].isInteger){var i=this.matrix[e][this.rhsColumn];(i-=Math.floor(i))<this.precision&&-i<this.precision&&(t+=1)}return t},t.prototype.isIntegral=function(){for(var t=this.model.integerVariables,e=t.length,i=0;i<e;i++){var n=this.rowByVarIndex[t[i].index];if(-1!==n){var r=this.matrix[n][this.rhsColumn];if(Math.abs(r-Math.round(r))>this.precision)return!1}}return!0},t.prototype.computeFractionalVolume=function(t){for(var e=-1,i=1;i<this.height;i+=1)if(this.variablesPerIndex[this.varIndexByRow[i]].isInteger){var n=this.matrix[i][this.rhsColumn];if(Math.min((n=Math.abs(n))-Math.floor(n),Math.floor(n+1))<this.precision){if(!t)return 0}else -1===e?e=n:e*=n}return -1===e?0:e}}),L=g((t,e)=>{z(),R(),T(),j(),A(),P(),$(),e.exports=S()}),N=g(()=>{var t=S();function e(t,e,i){this.type=t,this.varIndex=e,this.value=i}function i(t,e){this.relaxedEvaluation=t,this.cuts=e}function n(t,e){return e.relaxedEvaluation-t.relaxedEvaluation}t.prototype.applyCuts=function(t){if(this.restore(),this.addCutConstraints(t),this.simplex(),this.model.useMIRCuts)for(var e=!0;e;){var i=this.computeFractionalVolume(!0);this.applyMIRCuts(),this.simplex(),this.computeFractionalVolume(!0)>=.9*i&&(e=!1)}},t.prototype.branchAndCut=function(){var t=[],r=0,o=this.model.tolerance,s=!0,a=1e99;this.model.timeout&&(a=Date.now()+this.model.timeout);for(var l=1/0,h=null,u=[],c=0;c<this.optionalObjectives.length;c+=1)u.push(1/0);var f,d=new i(-1/0,[]);for(t.push(d);t.length>0&&!0===s&&Date.now()<a;)if(f=this.model.isMinimization?this.bestPossibleEval*(1+o):this.bestPossibleEval*(1-o),o>0&&l<f&&(s=!1),!((d=t.pop()).relaxedEvaluation>l)){var p=d.cuts;if(this.applyCuts(p),r++,!1!==this.feasible){var v=this.evaluation;if(!(v>l)){if(v===l){for(var m=!0,y=0;y<this.optionalObjectives.length&&!(this.optionalObjectives[y].reducedCosts[0]>u[y]);y+=1)if(this.optionalObjectives[y].reducedCosts[0]<u[y]){m=!1;break}if(m)continue}if(!0===this.isIntegral()){if(this.__isIntegral=!0,1===r){this.branchAndCutIterations=r;return}h=d,l=v;for(var g=0;g<this.optionalObjectives.length;g+=1)u[g]=this.optionalObjectives[g].reducedCosts[0]}else{1===r&&this.save();for(var b=this.getMostFractionalVar(),x=b.index,w=[],I=[],k=p.length,M=0;M<k;M+=1){var C=p[M];C.varIndex===x?"min"===C.type?I.push(C):w.push(C):(w.push(C),I.push(C))}var _=Math.ceil(b.value),B=Math.floor(b.value),O=new e("min",x,_);w.push(O);var V=new e("max",x,B);I.push(V),t.push(new i(v,w)),t.push(new i(v,I)),t.sort(n)}}}}null!==h&&this.applyCuts(h.cuts),this.branchAndCutIterations=r}}),D=g((t,e)=>{var i=S(),n=(N(),E()),r=n.Constraint,o=n.Equality,s=n.Variable,a=n.IntegerVariable;function l(t,e){this.tableau=new i(t),this.name=e,this.variables=[],this.integerVariables=[],this.unrestrictedVariables={},this.constraints=[],this.nConstraints=0,this.nVariables=0,this.isMinimization=!0,this.tableauInitialized=!1,this.relaxationIndex=1,this.useMIRCuts=!1,this.checkForCycles=!0,this.messages=[]}n.Term,e.exports=l,l.prototype.minimize=function(){return this.isMinimization=!0,this},l.prototype.maximize=function(){return this.isMinimization=!1,this},l.prototype._getNewElementIndex=function(){if(this.availableIndexes.length>0)return this.availableIndexes.pop();var t=this.lastElementIndex;return this.lastElementIndex+=1,t},l.prototype._addConstraint=function(t){var e=t.slack;this.tableau.variablesPerIndex[e.index]=e,this.constraints.push(t),this.nConstraints+=1,!0===this.tableauInitialized&&this.tableau.addConstraint(t)},l.prototype.smallerThan=function(t){var e=new r(t,!0,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},l.prototype.greaterThan=function(t){var e=new r(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(e),e},l.prototype.equal=function(t){var e=new r(t,!0,this.tableau.getNewElementIndex(),this);this._addConstraint(e);var i=new r(t,!1,this.tableau.getNewElementIndex(),this);return this._addConstraint(i),new o(e,i)},l.prototype.addVariable=function(t,e,i,n,r){if("string"==typeof r)switch(r){case"required":default:r=0;break;case"strong":r=1;break;case"medium":r=2;break;case"weak":r=3}var o,l=this.tableau.getNewElementIndex();return null==e&&(e="v"+l),null==t&&(t=0),null==r&&(r=0),i?(o=new a(e,t,l,r),this.integerVariables.push(o)):o=new s(e,t,l,r),this.variables.push(o),this.tableau.variablesPerIndex[l]=o,n&&(this.unrestrictedVariables[l]=!0),this.nVariables+=1,!0===this.tableauInitialized&&this.tableau.addVariable(o),o},l.prototype._removeConstraint=function(t){var e=this.constraints.indexOf(t);if(-1===e){console.warn("[Model.removeConstraint] Constraint not present in model");return}this.constraints.splice(e,1),this.nConstraints-=1,!0===this.tableauInitialized&&this.tableau.removeConstraint(t),t.relaxation&&this.removeVariable(t.relaxation)},l.prototype.removeConstraint=function(t){return t.isEquality?(this._removeConstraint(t.upperBound),this._removeConstraint(t.lowerBound)):this._removeConstraint(t),this},l.prototype.removeVariable=function(t){var e=this.variables.indexOf(t);if(-1===e){console.warn("[Model.removeVariable] Variable not present in model");return}return this.variables.splice(e,1),!0===this.tableauInitialized&&this.tableau.removeVariable(t),this},l.prototype.updateRightHandSide=function(t,e){return!0===this.tableauInitialized&&this.tableau.updateRightHandSide(t,e),this},l.prototype.updateConstraintCoefficient=function(t,e,i){return!0===this.tableauInitialized&&this.tableau.updateConstraintCoefficient(t,e,i),this},l.prototype.setCost=function(t,e){var i=t-e.cost;return!1===this.isMinimization&&(i=-i),e.cost=t,this.tableau.updateCost(e,i),this},l.prototype.loadJson=function(t){this.isMinimization="max"!==t.opType;for(var e=t.variables,i=t.constraints,n={},r={},s=Object.keys(i),a=s.length,l=0;l<a;l+=1){var h,u,c=s[l],f=i[c],d=f.equal,p=f.weight,v=f.priority,m=void 0!==p||void 0!==v;if(void 0===d){var y=f.min;void 0!==y&&(h=this.greaterThan(y),n[c]=h,m&&h.relax(p,v));var g=f.max;void 0!==g&&(u=this.smallerThan(g),r[c]=u,m&&u.relax(p,v))}else{h=this.greaterThan(d),n[c]=h,u=this.smallerThan(d),r[c]=u;var b=new o(h,u);m&&b.relax(p,v)}}var x=Object.keys(e),w=x.length;this.tolerance=t.tolerance||0,t.timeout&&(this.timeout=t.timeout),t.options&&(t.options.timeout&&(this.timeout=t.options.timeout),0===this.tolerance&&(this.tolerance=t.options.tolerance||0),t.options.useMIRCuts&&(this.useMIRCuts=t.options.useMIRCuts),void 0===t.options.exitOnCycles?this.checkForCycles=!0:this.checkForCycles=t.options.exitOnCycles);for(var I=t.ints||{},k=t.binaries||{},M=t.unrestricted||{},C=t.optimize,_=0;_<w;_+=1){var B=x[_],O=e[B],V=O[C]||0,S=!!k[B],z=!!I[B]||S,E=!!M[B],R=this.addVariable(V,B,z,E);S&&this.smallerThan(1).addTerm(1,R);var T=Object.keys(O);for(l=0;l<T.length;l+=1){var j=T[l];if(j!==C){var A=O[j],P=n[j];void 0!==P&&P.addTerm(A,R);var $=r[j];void 0!==$&&$.addTerm(A,R)}}}return this},l.prototype.getNumberOfIntegerVariables=function(){return this.integerVariables.length},l.prototype.solve=function(){return!1===this.tableauInitialized&&(this.tableau.setModel(this),this.tableauInitialized=!0),this.tableau.solve()},l.prototype.isFeasible=function(){return this.tableau.feasible},l.prototype.save=function(){return this.tableau.save()},l.prototype.restore=function(){return this.tableau.restore()},l.prototype.activateMIRCuts=function(t){this.useMIRCuts=t},l.prototype.debug=function(t){this.checkForCycles=t},l.prototype.log=function(t){return this.tableau.log(t)}}),q=g(t=>{t.CleanObjectiveAttributes=function(t){var e,i,n;if("string"==typeof t.optimize){if(!t.constraints[t.optimize])return t;for(i in e=Math.random(),t.variables)t.variables[i][t.optimize]&&(t.variables[i][e]=t.variables[i][t.optimize]);return t.constraints[e]=t.constraints[t.optimize],delete t.constraints[t.optimize],t}for(n in t.optimize)if(t.constraints[n]){if("equal"===t.constraints[n])delete t.optimize[n];else{for(i in e=Math.random(),t.variables)t.variables[i][n]&&(t.variables[i][e]=t.variables[i][n]);t.constraints[e]=t.constraints[n],delete t.constraints[n]}}return t}}),W=g((t,e)=>{e.exports=function(t){return t.length?function(t){var e={is_objective:/(max|min)(imize){0,}\:/i,is_int:/^(?!\/\*)\W{0,}int/i,is_bin:/^(?!\/\*)\W{0,}bin/i,is_constraint:/(\>|\<){0,}\=/i,is_unrestricted:/^\S{0,}unrestricted/i,parse_lhs:/(\-|\+){0,1}\s{0,1}\d{0,}\.{0,}\d{0,}\s{0,}[A-Za-z]\S{0,}/gi,parse_rhs:/(\-|\+){0,1}\d{1,}\.{0,}\d{0,}\W{0,}\;{0,1}$/i,parse_dir:/(\>|\<){0,}\=/gi,parse_int:/[^\s|^\,]+/gi,parse_bin:/[^\s|^\,]+/gi,get_num:/(\-|\+){0,1}(\W|^)\d+\.{0,1}\d{0,}/g,get_word:/[A-Za-z].*/},i={opType:"",optimize:"_obj",constraints:{},variables:{}},n={">=":"min","<=":"max","=":"equal"},r="",o=null,s="",a="",l="",h=0;"string"==typeof t&&(t=t.split(`
`));for(var u=0;u<t.length;u++)if(l="__"+u,r=t[u],o=null,e.is_objective.test(r))i.opType=r.match(/(max|min)/gi)[0],(o=r.match(e.parse_lhs).map(function(t){return t.replace(/\s+/,"")}).slice(1)).forEach(function(t){s=parseFloat(s=null===(s=t.match(e.get_num))?"-"===t.substr(0,1)?-1:1:s[0]),a=t.match(e.get_word)[0].replace(/\;$/,""),i.variables[a]=i.variables[a]||{},i.variables[a]._obj=s});else if(e.is_int.test(r))o=r.match(e.parse_int).slice(1),i.ints=i.ints||{},o.forEach(function(t){t=t.replace(";",""),i.ints[t]=1});else if(e.is_bin.test(r))o=r.match(e.parse_bin).slice(1),i.binaries=i.binaries||{},o.forEach(function(t){t=t.replace(";",""),i.binaries[t]=1});else if(e.is_constraint.test(r)){var c=r.indexOf(":");(o=(-1===c?r:r.slice(c+1)).match(e.parse_lhs).map(function(t){return t.replace(/\s+/,"")})).forEach(function(t){s=parseFloat(s=null===(s=t.match(e.get_num))?"-"===t.substr(0,1)?-1:1:s[0]),a=t.match(e.get_word)[0],i.variables[a]=i.variables[a]||{},i.variables[a][l]=s}),h=parseFloat(r.match(e.parse_rhs)[0]),r=n[r.match(e.parse_dir)[0]],i.constraints[l]=i.constraints[l]||{},i.constraints[l][r]=h}else e.is_unrestricted.test(r)&&(o=r.match(e.parse_int).slice(1),i.unrestricted=i.unrestricted||{},o.forEach(function(t){t=t.replace(";",""),i.unrestricted[t]=1}));return i}(t):function(t){if(!t)throw Error("Solver requires a model to operate on");var e="",i={max:"<=",min:">=",equal:"="},n=RegExp("[^A-Za-z0-9_[{}/.&#$%~'@^]","gi");if(t.opType)for(var r in e+=t.opType+":",t.variables)t.variables[r][r]=t.variables[r][r]?t.variables[r][r]:1,t.variables[r][t.optimize]&&(e+=" "+t.variables[r][t.optimize]+" "+r.replace(n,"_"));else e+="max:";for(var o in e+=`;

`,t.constraints)for(var s in t.constraints[o])if(void 0!==i[s]){for(var a in t.variables)void 0!==t.variables[a][o]&&(e+=" "+t.variables[a][o]+" "+a.replace(n,"_"));e+=" "+i[s]+" "+t.constraints[o][s]+`;
`}if(t.ints)for(var l in e+=`

`,t.ints)e+="int "+l.replace(n,"_")+`;
`;if(t.unrestricted)for(var h in e+=`

`,t.unrestricted)e+="unrestricted "+h.replace(n,"_")+`;
`;return e}(t)}}),F=g(()=>{}),G=g(()=>{}),U=g(t=>{function e(t){return t=(t=(t=t.replace("\\r\\n",`\r
`)).split(`\r
`)).filter(function(t){return!(!0===RegExp(" 0$","gi").test(t)||!1===RegExp("\\d$","gi").test(t))}).map(function(t){return t.split(/\:{0,1} +(?=\d)/)}).reduce(function(t,e,i){return t[e[0]]=e[1],t},{})}t.reformat=W(),t.solve=function(t){return new Promise(function(i,n){"undefined"!=typeof window&&n("Function Not Available in Browser");var r=W()(t);t.external||n("Data for this function must be contained in the 'external' attribute. Not seeing anything there."),t.external.binPath||n("No Executable | Binary path provided in arguments as 'binPath'"),t.external.args||n("No arguments array for cli | bash provided on 'args' attribute"),t.external.tempName||n("No 'tempName' given. This is necessary to produce a staging file for the solver to operate on"),F().writeFile(t.external.tempName,r,function(r,o){if(r)n(r);else{var s=G().execFile;t.external.args.push(t.external.tempName),s(t.external.binPath,t.external.args,function(t,r){t?1===t.code?i(e(r)):n({code:t.code,meaning:{"-2":"Out of Memory",1:"SUBOPTIMAL",2:"INFEASIBLE",3:"UNBOUNDED",4:"DEGENERATE",5:"NUMFAILURE",6:"USER-ABORT",7:"TIMEOUT",9:"PRESOLVED",25:"ACCURACY ERROR",255:"FILE-ERROR"}[t.code],data:r}):i(e(r))})}})})}}),Q=g((t,e)=>{e.exports={lpsolve:U()}}),Y=g((t,e)=>{e.exports=function(t,e){var i,n,r,o,s,a=e.optimize,l=JSON.parse(JSON.stringify(e.optimize)),h=Object.keys(e.optimize),u=0,c={},f="",d={},p=[];for(delete e.optimize,n=0;n<h.length;n++)l[h[n]]=0;for(n=0;n<h.length;n++){for(s in e.optimize=h[n],e.opType=a[h[n]],i=t.Solve(e,void 0,void 0,!0),h)if(!e.variables[h[s]])for(o in i[h[s]]=i[h[s]]?i[h[s]]:0,e.variables)e.variables[o][h[s]]&&i[o]&&(i[h[s]]+=i[o]*e.variables[o][h[s]]);for(f="base",r=0;r<h.length;r++)i[h[r]]?f+="-"+(1e3*i[h[r]]|0)/1e3:f+="-0";if(!c[f]){for(c[f]=1,u++,r=0;r<h.length;r++)i[h[r]]&&(l[h[r]]+=i[h[r]]);delete i.feasible,delete i.result,p.push(i)}}for(n=0;n<h.length;n++)e.constraints[h[n]]={equal:l[h[n]]/u};for(n in e.optimize="cheater-"+Math.random(),e.opType="max",e.variables)e.variables[n].cheater=1;for(n in p)for(o in p[n])d[o]=d[o]||{min:1e99,max:-1e99};for(n in d)for(o in p)p[o][n]?(p[o][n]>d[n].max&&(d[n].max=p[o][n]),p[o][n]<d[n].min&&(d[n].min=p[o][n])):(p[o][n]=0,d[n].min=0);return{midpoint:i=t.Solve(e,void 0,void 0,!0),vertices:p,ranges:d}}}),H=g((t,e)=>{var i=L(),n=D(),r=N(),o=E(),s=q(),a=o.Constraint,l=o.Variable,h=o.Numeral,u=o.Term,c=Q(),f=function(){this.Model=n,this.branchAndCut=r,this.Constraint=a,this.Variable=l,this.Numeral=h,this.Term=u,this.Tableau=i,this.lastSolvedModel=null,this.External=c,this.Solve=function(t,e,i,r){if(r)for(var o in s)t=s[o](t);if(!t)throw Error("Solver requires a model to operate on");if("object"==typeof t.optimize&&Object.keys(t.optimize>1))return Y()(this,t);if(t.external){var a=Object.keys(c);if(a=JSON.stringify(a),!t.external.solver)throw Error("The model you provided has an 'external' object that doesn't have a solver attribute. Use one of the following:"+a);if(!c[t.external.solver])throw Error("No support (yet) for "+t.external.solver+". Please use one of these instead:"+a);return c[t.external.solver].solve(t)}t instanceof n||(t=new n(e).loadJson(t));var l=t.solve();if(this.lastSolvedModel=t,l.solutionSet=l.generateSolutionSet(),i)return l;var h={};return h.feasible=l.feasible,h.result=l.evaluation,h.bounded=l.bounded,l._tableau.__isIntegral&&(h.isIntegral=!0),Object.keys(l.solutionSet).forEach(function(t){0!==l.solutionSet[t]&&(h[t]=l.solutionSet[t])}),h},this.ReformatLP=W(),this.MultiObjective=function(t){return Y()(this,t)}};"function"==typeof define?define([],function(){return new f}):"object"==typeof window?window.solver=new f:"object"==typeof self&&(self.solver=new f),e.exports=new f}),J=g((t,e)=>{var i,n,r=1e-60;do r+=r,i=1+.1*r,n=1+.2*r;while(i<=1||n<=1)e.exports=r}),K=g((t,e)=>{e.exports=function(t,e,i){let n,r;for(let e=1;e<=i;e+=1){t[e][e]=1/t[e][e],r=-t[e][e];for(let i=1;i<e;i+=1)t[i][e]*=r;if(i<(n=e+1))break;for(let o=n;o<=i;o+=1){r=t[e][o],t[e][o]=0;for(let i=1;i<=e;i+=1)t[i][o]+=r*t[i][e]}}}}),X=g((t,e)=>{e.exports=function(t,e,i,n){let r,o;for(r=1;r<=i;r+=1){o=0;for(let e=1;e<r;e+=1)o+=t[e][r]*n[e];n[r]=(n[r]-o)/t[r][r]}for(let e=1;e<=i;e+=1){r=i+1-e,n[r]/=t[r][r],o=-n[r];for(let e=1;e<r;e+=1)n[e]+=o*t[e][r]}}}),Z=g((t,e)=>{e.exports=function(t,e,i,n){let r,o,s;for(let e=1;e<=i;e+=1){if(n[1]=e,s=0,(r=e-1)<1){if((s=t[e][e]-s)<=0)break;t[e][e]=Math.sqrt(s)}else{for(let i=1;i<=r;i+=1){o=t[i][e];for(let n=1;n<i;n+=1)o-=t[n][e]*t[n][i];o/=t[i][i],t[i][e]=o,s+=o*o}if((s=t[e][e]-s)<=0)break;t[e][e]=Math.sqrt(s)}n[1]=0}}}),tt=g((t,e)=>{var i=J(),n=K(),r=X(),o=Z();e.exports=function(t,e,s,a,l,h,u,c,f,d,p,v,m,y=0,g,b,x){let w,I,k,M,C,_,B,O,V,S,z,E,R,T,j=Math.min(a,p),A=2*a+j*(j+5)/2+2*p+1;for(let t=1;t<=a;t+=1)b[t]=e[t];for(let t=a+1;t<=A;t+=1)b[t]=0;for(let t=1;t<=p;t+=1)m[t]=0,h[t]=0;let P=[];if(0===x[1]){if(o(t,s,a,P),0!==P[1]){x[1]=2;return}r(t,s,a,e),n(t,s,a)}else{for(let i=1;i<=a;i+=1){l[i]=0;for(let n=1;n<=i;n+=1)l[i]+=t[n][i]*e[n]}for(let i=1;i<=a;i+=1){e[i]=0;for(let n=i;n<=a;n+=1)e[i]+=t[i][n]*l[n]}}u[1]=0;for(let i=1;i<=a;i+=1){l[i]=e[i],u[1]+=b[i]*l[i],b[i]=0;for(let e=i+1;e<=a;e+=1)t[e][i]=0}u[1]=-u[1]/2,x[1]=0;let $=a+a,L=$+j,N=L+j+1,D=N+j*(j+1)/2,q=D+p;for(let t=1;t<=p;t+=1){_=0;for(let e=1;e<=a;e+=1)_+=c[e][t]*c[e][t];b[q+t]=Math.sqrt(_)}function W(){return b[L+M]=b[L+M+1],b[L+M+1]=0,m[M]=0,M-=1,g[2]+=1,0}for(M=y,g[1]=0,g[2]=0,T=0;;){if(999===(T=function(){g[1]+=1,A=D;for(let t=1;t<=p;t+=1){A+=1,_=-f[t];for(let e=1;e<=a;e+=1)_+=c[e][t]*l[e];if(Math.abs(_)<i&&(_=0),t>v)b[A]=_;else if(b[A]=-Math.abs(_),_>0){for(let e=1;e<=a;e+=1)c[e][t]=-c[e][t];f[t]=-f[t]}}for(let t=1;t<=M;t+=1)b[D+m[t]]=0;k=0,C=0;for(let t=1;t<=p;t+=1)b[D+t]<C*b[q+t]&&(k=t,C=b[D+t]/b[q+t]);if(0===k){for(let t=1;t<=M;t+=1)h[m[t]]=b[L+t];return 999}return 0}()))return;for(;0!==(T=function(){for(let e=1;e<=a;e+=1){_=0;for(let i=1;i<=a;i+=1)_+=t[i][e]*c[i][k];b[e]=_}w=a;for(let t=1;t<=a;t+=1)b[w+t]=0;for(let e=M+1;e<=a;e+=1)for(let i=1;i<=a;i+=1)b[w+i]=b[w+i]+t[i][e]*b[e];E=!0;for(let t=M;t>=1;t-=1){_=b[t],w=(A=N+t*(t+3)/2)-t;for(let e=t+1;e<=M;e+=1)_-=b[A]*b[$+e],A+=e;_/=b[w],b[$+t]=_,!(m[t]<=v)&&(_<=0||(E=!1,I=t))}if(!E){B=b[L+I]/b[$+I];for(let t=1;t<=M;t+=1)m[t]<=v||b[$+t]<=0||(C=b[L+t]/b[$+t])<B&&(B=C,I=t)}_=0;for(let t=a+1;t<=a+a;t+=1)_+=b[t]*b[t];if(Math.abs(_)<=i){if(E)return x[1]=1,999;for(let t=1;t<=M;t+=1)b[L+t]=b[L+t]-B*b[$+t];return b[L+M+1]=b[L+M+1]+B,700}_=0;for(let t=1;t<=a;t+=1)_+=b[a+t]*c[t][k];O=-b[D+k]/_,R=!0,E||B<O&&(O=B,R=!1);for(let t=1;t<=a;t+=1)l[t]+=O*b[a+t],Math.abs(l[t])<i&&(l[t]=0);u[1]+=O*_*(O/2+b[L+M+1]);for(let t=1;t<=M;t+=1)b[L+t]=b[L+t]-O*b[$+t];if(b[L+M+1]=b[L+M+1]+O,R){m[M+=1]=k,A=N+(M-1)*M/2+1;for(let t=1;t<=M-1;t+=1)b[A]=b[t],A+=1;if(M===a)b[A]=b[a];else{for(let e=a;e>=M+1;e-=1)if(0!==b[e]&&(V=Math.max(Math.abs(b[e-1]),Math.abs(b[e])),S=Math.min(Math.abs(b[e-1]),Math.abs(b[e])),C=b[e-1]>=0?Math.abs(V*Math.sqrt(1+S*S/(V*V))):-Math.abs(V*Math.sqrt(1+S*S/(V*V))),V=b[e-1]/C,S=b[e]/C,1!==V)){if(0===V){b[e-1]=S*C;for(let i=1;i<=a;i+=1)C=t[i][e-1],t[i][e-1]=t[i][e],t[i][e]=C}else{b[e-1]=C,z=S/(1+V);for(let i=1;i<=a;i+=1)C=V*t[i][e-1]+S*t[i][e],t[i][e]=z*(t[i][e-1]+C)-t[i][e],t[i][e-1]=C}}b[A]=b[M]}}else{_=-f[k];for(let t=1;t<=a;t+=1)_+=l[t]*c[t][k];if(k>v)b[D+k]=_;else if(b[D+k]=-Math.abs(_),_>0){for(let t=1;t<=a;t+=1)c[t][k]=-c[t][k];f[k]=-f[k]}return 700}return 0}());){if(999===T)return;if(700===T){if(I===M)W();else{for(;function(){if(0!==b[w=(A=N+I*(I+1)/2+1)+I]&&(V=Math.max(Math.abs(b[w-1]),Math.abs(b[w])),S=Math.min(Math.abs(b[w-1]),Math.abs(b[w])),C=b[w-1]>=0?Math.abs(V*Math.sqrt(1+S*S/(V*V))):-Math.abs(V*Math.sqrt(1+S*S/(V*V))),V=b[w-1]/C,S=b[w]/C,1!==V)){if(0===V){for(let t=I+1;t<=M;t+=1)C=b[w-1],b[w-1]=b[w],b[w]=C,w+=t;for(let e=1;e<=a;e+=1)C=t[e][I],t[e][I]=t[e][I+1],t[e][I+1]=C}else{z=S/(1+V);for(let t=I+1;t<=M;t+=1)C=V*b[w-1]+S*b[w],b[w]=z*(b[w-1]+C)-b[w],b[w-1]=C,w+=t;for(let e=1;e<=a;e+=1)C=V*t[e][I]+S*t[e][I+1],t[e][I+1]=z*(t[e][I]+C)-t[e][I+1],t[e][I]=C}}}(),797===(T=function(){w=A-I;for(let t=1;t<=I;t+=1)b[w]=b[A],A+=1,w+=1;return b[L+I]=b[L+I+1],m[I]=m[I+1],(I+=1)<M?797:0}()););W()}}}}}}),te=g(t=>{var e=tt();t.solveQP=function(t,i,n,r=[],o=0,s=[0,0]){let a=[],l=[],h=[],u=[],c=[],f=[],d="",p=t.length-1,v=n[1].length-1;if(!r)for(let t=1;t<=v;t+=1)r[t]=0;if(p!==t[1].length-1&&(d="Dmat is not symmetric!"),p!==i.length-1&&(d="Dmat and dvec are incompatible!"),p!==n.length-1&&(d="Amat and dvec are incompatible!"),v!==r.length-1&&(d="Amat and bvec are incompatible!"),(o>v||o<0)&&(d="Value of meq is invalid!"),""!==d)return{message:d};for(let t=1;t<=v;t+=1)l[t]=0,u[t]=0;let m=Math.min(p,v);for(let t=1;t<=p;t+=1)h[t]=0;a[1]=0;for(let t=1;t<=2*p+m*(m+5)/2+2*v+1;t+=1)c[t]=0;for(let t=1;t<=2;t+=1)f[t]=0;return e(t,i,p,p,h,u,a,n,r,p,v,o,l,0,f,c,s),1===s[1]&&(d="constraints are inconsistent, no solution!"),2===s[1]&&(d="matrix D in quadratic function is not positive definite!"),{solution:h,Lagrangian:u,value:a,unconstrained_solution:i,iterations:f,iact:l,message:d}}}),ti=g((t,e)=>{e.exports=te()});function tn(t){for(let e of t)return t.delete(e),e}function tr(t,e,i){let n=t.get(e);void 0===n?t.set(e,new Set([i])):n.add(i)}function to(t,e,i){let n=t.get(e);void 0!==n&&(n.delete(i),n.size||t.delete(e))}var{toString:ts}=Object.prototype,{propertyIsEnumerable:ta}=Object.prototype;function*tl(t,...e){let i=new Set,n;for(;void 0!==(n=e.pop());)i.has(n)||(yield n,i.add(n),e.push(...t(n)))}function th(t,e){let i=[];for(let[n,r]of tp(e))i.push(t[n]),i.push(r);return i.push(t[t.length-1]),i.join("")}function tu(t,...e){return Error(th(t,tm(e,t=>{let e;return e=[],function t(i,n={},r=""){var o,s,a;let l,h=n.indent||"	",u;u=void 0===n.inlineCharacterLimit?{newline:`
`,newlineOrSpace:`
`,pad:r,indent:r+h}:{newline:"@@__STRINGIFY_OBJECT_NEW_LINE__@@",newlineOrSpace:"@@__STRINGIFY_OBJECT_NEW_LINE_OR_SPACE__@@",pad:"@@__STRINGIFY_OBJECT_PAD__@@",indent:"@@__STRINGIFY_OBJECT_INDENT__@@"};let c=t=>{if(void 0===n.inlineCharacterLimit)return t;let e=t.replace(RegExp(u.newline,"g"),"").replace(RegExp(u.newlineOrSpace,"g")," ").replace(RegExp(u.pad+"|"+u.indent,"g"),"");return e.length<=n.inlineCharacterLimit?e:t.replace(RegExp(u.newline+"|"+u.newlineOrSpace,"g"),`
`).replace(RegExp(u.pad,"g"),r).replace(RegExp(u.indent,"g"),r+h)};if(e.includes(i))return'"[Circular]"';if(null==i||"number"==typeof i||"boolean"==typeof i||"function"==typeof i||"symbol"==typeof i||(o=i,"[object RegExp]"===ts.call(o)))return String(i);if(i instanceof Date)return`new Date('${i.toISOString()}')`;if(Array.isArray(i)){if(0===i.length)return"[]";e.push(i);let o="["+u.newline+i.map((e,o)=>{let s=i.length-1===o?u.newline:","+u.newlineOrSpace,a=t(e,n,r+h);return n.transform&&(a=n.transform(i,o,a)),u.indent+a+s}).join("")+u.pad+"]";return e.pop(),c(o)}if(l=typeof(s=i),null!==s&&("object"===l||"function"===l)){let o=[...Object.keys(a=i),...Object.getOwnPropertySymbols(a).filter(t=>ta.call(a,t))];if(n.filter&&(o=o.filter(t=>n.filter(i,t))),0===o.length)return"{}";e.push(i);let s="{"+u.newline+o.map((e,s)=>{let a=o.length-1===s?u.newline:","+u.newlineOrSpace,l="symbol"==typeof e,c=!l&&/^[a-z$_][$\w]*$/i.test(e),f=l||c?e:t(e,n),d=t(i[e],n,r+h);return n.transform&&(d=n.transform(i,e,d)),u.indent+String(f)+": "+d+a}).join("")+u.pad+"}";return e.pop(),c(s)}return i=String(i=i.replace(/\\/g,"\\\\")).replace(/[\r\n]/g,t=>t===`
`?"\\n":"\\r"),!1===n.singleQuotes?(i=i.replace(/"/g,'\\"'),`"${i}"`):(i=i.replace(/'/g,"\\'"),`'${i}'`)}(t,{indent:"  ",singleQuotes:!1,inlineCharacterLimit:60},void 0)})))}function tc(t){return`internal error: ${t}; if you encounter this please submit an issue at: https://github.com/erikbrinkman/d3-dag/issues`}function tf(t,...e){return Error(tc(th(t,tm(e,t=>t.toString()))))}function td(t,e,...i){let[n,...r]=t,o=th(r,tm(i,t=>t.toString())),s=e.name||"anonymous";return Error("d3dagBuiltin"in e?tc(`builtin ${n}'${s}'${o}`):`custom ${n}'${s}'${o}`)}function*tp(t){let e=0;for(let i of t)yield[e++,i]}function*tv(t,e){for(let[i,n]of tp(t))yield*B(e(n,i))}function*tm(t,e){for(let[i,n]of tp(t))yield e(n,i)}function*ty(t,e){for(let[i,n]of tp(t))e(n,i)&&(yield n)}function tg(t,e){for(let[i,n]of tp(t))if(e(n,i))return!0;return!1}function*tb(...t){for(let e of t)yield*B(e)}function*tx(t){let e=t[Symbol.iterator](),i=e.next();if(!i.done){let t=i.value,n;for(;!(n=e.next()).done;)yield[t,n.value],t=n.value}}function tw(t){let e=[],i,n=new Map;for(let[r,o]of tp(t.nodes()))n.set(o,r),e.push({x:o.ux,y:o.uy,data:o.data}),o===t&&(i=r);let r=[];for(let{source:e,target:i,data:o,points:s}of t.links())r.push({source:n.get(e),target:n.get(i),points:s,data:o});return{nodes:e,links:r,index:i,v:1}}var tI=class{constructor(t,e,i,n="inactive"){this.node=t,this.indeg=e,this.outdeg=i,this.stat=n}bucket(){let t=0===this.indeg?-1/0:0===this.outdeg?1/0:this.indeg-this.outdeg;return"top"===this.stat?Math.min(t,0):"bottom"===this.stat?Math.max(t,0):t}isTop(){return this.indeg<=this.outdeg&&"bottom"!==this.stat||"top"===this.stat}};function tk(t,e){let i=t[e];if(void 0!==i)return i;{let i=new Set;return t[e]=i,i}}function tM(t){var e;let i;for(;t.length&&!(null!=(e=i=t[t.length-1])&&e.size);)t.pop();return i||void 0}function tC(t,e=()=>{}){let i=new Map,n=new Map,r=new Set,o=new Set,s=[],a=[];function l(t){return t===-1/0?r:t===1/0?o:t<=0?tk(s,-t):tk(a,t-1)}for(let r of t){let t=r.nparentLinks(),o=r.nchildLinks(),s=new tI(r,t,o),a=e(r);i.set(r,s),void 0===a?(s.stat="active",l(s.bucket()).add(s)):tr(n,a,s)}let h=[...n].sort(([t],[e])=>t-e).map(([,t])=>t),u=0,c=h.length,f=h.length?h[u++]:new Set,d=h.length>1?h[--c]:new Set;for(let t of f)t.stat="top",l(t.bucket()).add(t);for(let t of d)t.stat="bottom",l(t.bucket()).add(t);let p=Array(i.size),v=0,m=i.size,y;for(;y=function(){var t;let e;if(e=null!=(t=tn(r))?t:tn(o))return e;let i=tM(s),n=tM(a);return n?tn(s.length>a.length?i:n):i?tn(i):void 0}();){let{node:t}=y,e=y.isTop()?v++:--m;for(let[n,r]of(y.stat="ranked",p[e]=t,t.parentCounts())){let t=i.get(n);l(t.bucket()).delete(t),t.outdeg-=r,"ranked"!==t.stat&&"inactive"!==t.stat&&l(t.bucket()).add(t)}for(let[e,n]of t.childCounts()){let t=i.get(e);l(t.bucket()).delete(t),t.indeg-=n,"ranked"!==t.stat&&"inactive"!==t.stat&&l(t.bucket()).add(t)}if(f.delete(y),!f.size&&u<c)for(let t of f=h[u++])t.stat="top",l(t.bucket()).add(t);if(d.delete(y),!d.size&&u<c)for(let t of d=h[--c])t.stat="bottom",l(t.bucket()).add(t)}return p}function t_(t,e){let i=new Set,n=new Set,r=[],o;for(let s of t)if(!n.has(s)){for(r.push(s);o=r.pop();)i.delete(o),n.has(o)||(n.add(o),r.push(...e(o)));i.add(s)}return i}var tB,tO,tV,tS,tz,tE,tR,tT,tj,tA=class{constructor(){k(this,tB,0),k(this,tO,0),k(this,tV,0),k(this,tS,!0),k(this,tz,new Set),k(this,tE,new Set),k(this,tR,()=>{M(this,tB,I(this,tB)-1)}),k(this,tT,(t,e)=>{M(this,tO,I(this,tO)+1),t?M(this,tV,I(this,tV)+1):e||!0!==I(this,tS)||M(this,tS,null)}),k(this,tj,t=>{M(this,tO,I(this,tO)-1),t?M(this,tV,I(this,tV)-1):!1===I(this,tS)&&M(this,tS,null)})}*nodes(){for(let t of this.split())yield*B(t.nodes())}topological(t){return tC(this.nodes(),t)}*links(){for(let t of this.nodes())yield*B(t.childLinks())}nnodes(){return I(this,tB)}nlinks(){return I(this,tO)}*roots(){for(let t of this.split())yield*B(t.roots())}*leaves(){for(let t of this.split())yield*B(t.leaves())}*split(){let t;for(yield*B(I(this,tz));t=function(t){for(let e of t)return e}(I(this,tE));)yield t,t.nnodes()}connected(){let t=!1;for(let e of this.split()){if(t)return!1;t=!0}return!0}multi(){return!!I(this,tV)}acyclic(){if(null!==I(this,tS))return I(this,tS);for(let t of this.split())if(!t.acyclic())return M(this,tS,!1),!1;return M(this,tS,!0),!0}node(t){return M(this,tB,I(this,tB)+1),new t6(this,I(this,tz),I(this,tE),I(this,tR),I(this,tT),I(this,tj),t)}link(t,e,i){return t.link(t,e,i)}toJSON(){return tw(this)}};function tP(t){for(let e of t.values())for(let t of e)return t}function t$(t){return t instanceof t6}tB=new WeakMap,tO=new WeakMap,tV=new WeakMap,tS=new WeakMap,tz=new WeakMap,tE=new WeakMap,tR=new WeakMap,tT=new WeakMap,tj=new WeakMap;var tL,tN,tD,tq,tW,tF,tG,tU,tQ,tY,tH,tJ,tK,tX,tZ,t0,t1,t2,t6=class{constructor(t,e,i,n,r,o,s){this.data=s,k(this,tX),k(this,t0),k(this,tL,void 0),k(this,tN,void 0),k(this,tD,void 0),k(this,tq,void 0),k(this,tW,void 0),k(this,tF,void 0),k(this,tG,0),k(this,tU,0),k(this,tQ,new Map),k(this,tY,0),k(this,tH,new Map),k(this,tJ,void 0),k(this,tK,void 0),k(this,t2,t=>{let{source:e,target:i}=t,n=e.nchildLinksTo(i)>1;if(n){M(e,tG,I(e,tG)-1);let t=C(e,t0,t1).call(e);t.nlinks-=1,t.multis-=1}else{let t=C(e,tX,tZ).call(e);M(t,tK,null),I(this,tW).delete(t),I(this,tF).add(e),M(e,tJ,e),M(e,tK,null),I(this,tF).add(i),M(i,tJ,i),M(i,tK,null)}I(this,tq).call(this,n),to(I(e,tH),i,t),M(e,tY,I(e,tY)-1),to(I(i,tQ),e,t),M(i,tU,I(i,tU)-1)}),M(this,tL,t),M(this,tW,e),M(this,tF,i),M(this,tN,n),M(this,tD,r),M(this,tq,o),M(this,tJ,this),M(this,tK,{nnodes:1,nlinks:0,multis:0,acyclic:!0,roots:[this],leaves:[this]}),I(this,tW).add(this)}get x(){if(void 0===this.ux)throw tu`can't get \`x\` when \`ux\` is undefined`;return this.ux}set x(t){this.ux=t}get y(){if(void 0===this.uy)throw tu`can't get \`y\` when \`uy\` is undefined`;return this.uy}set y(t){this.uy=t}*nodes(){yield*B(tl(t=>tb(t.children(),t.parents()),this))}topological(t){return tC(this.nodes(),t)}*links(){for(let t of this.nodes())yield*B(t.childLinks())}nnodes(){return C(this,t0,t1).call(this).nnodes}nlinks(){return C(this,t0,t1).call(this).nlinks}*split(){yield this}connected(){return!0}multi(){return C(this,t0,t1).call(this).multis>0}acyclic(){let t=C(this,t0,t1).call(this);return null===t.acyclic?t.acyclic=function(t){let e,i=new Map(tm(t,t=>[t,t.nparents()])),n=[...tm(ty(i,([,t])=>0===t),([t])=>t)];for(let t of n)i.delete(t);for(;e=n.pop();)for(let t of e.children()){let e=i.get(t)-1;e?i.set(t,e):(i.delete(t),n.push(t))}return!i.size}(this.nodes()):t.acyclic}node(t){if(I(this,tL))return I(this,tL).node(t);throw tu`can't add a node from a deleted node`}link(t,e,i){if(I(this,tL)){if(t===e)throw tu`tried to create a link between the same node, but self loops are not supported`;if(t$(t)&&t$(e)&&I(t,tL)===I(e,tL)&&I(this,tL)===I(t,tL)){let n=new t8(I(this,tL),t,e,I(this,t2),i),r=t.nchildLinksTo(e)>0,o=C(t,tX,tZ).call(t),s=I(o,tK),a=C(e,tX,tZ).call(e),l=I(a,tK);if(r&&s)M(t,tG,I(t,tG)+1),s.nlinks+=1,s.multis+=1;else if(r)M(t,tG,I(t,tG)+1);else if(o===a&&s)s.nlinks+=1,!0===s.acyclic&&(s.acyclic=null);else if(o!==a&&s&&l){let[t,e,i,n]=s.nnodes>l.nnodes?[o,s,a,l]:[a,l,o,s];I(this,tW).delete(i),M(i,tJ,t),M(i,tK,void 0),e.nnodes+=n.nnodes,e.nlinks+=n.nlinks+1,e.multis+=n.multis,e.acyclic=!1!==e.acyclic&&!1!==n.acyclic&&(!0===e.acyclic&&!0===n.acyclic||null),e.roots=null,e.leaves=null}else o!==a&&(M(o,tK,null),M(a,tK,null));return I(this,tD).call(this,r,o!==a),M(t,tY,I(t,tY)+1),tr(I(t,tH),e,n),M(e,tU,I(e,tU)+1),tr(I(e,tQ),t,n),n}throw tu`when creating a link, both source and target must be current members of the same graph, and can't have been deleted`}throw tu`can't add a link from a deleted node`}nparents(){return I(this,tQ).size}nchildren(){return I(this,tH).size}nparentLinks(){return I(this,tU)}nchildLinks(){return I(this,tY)}nparentLinksTo(t){var e,i;return t$(t)&&null!=(i=null==(e=I(this,tQ).get(t))?void 0:e.size)?i:0}*parentLinksTo(t){if(t$(t)){let e=I(this,tQ).get(t);e&&(yield*B(e))}}nchildLinksTo(t){var e,i;return t$(t)&&null!=(i=null==(e=I(this,tH).get(t))?void 0:e.size)?i:0}*childLinksTo(t){if(t$(t)){let e=I(this,tH).get(t);e&&(yield*B(e))}}*parents(){yield*B(I(this,tQ).keys())}*children(){yield*B(I(this,tH).keys())}*parentCounts(){for(let[t,e]of I(this,tQ))yield[t,e.size]}*childCounts(){for(let[t,e]of I(this,tH))yield[t,e.size]}*parentLinks(){for(let t of I(this,tQ).values())yield*B(t)}*childLinks(){for(let t of I(this,tH).values())yield*B(t)}*ancestors(){yield*B(tl(t=>t.parents(),this))}*descendants(){yield*B(tl(t=>t.children(),this))}*roots(){let t=C(this,t0,t1).call(this);t.roots||(t.roots=[...t_(this.nodes(),t=>t.children())]),yield*B(t.roots)}*leaves(){let t=C(this,t0,t1).call(this);t.leaves||(t.leaves=[...t_(this.nodes(),t=>t.parents())]),yield*B(t.leaves)}parent(t,e){return this.link(t,this,e)}child(t,e){return this.link(this,t,e)}delete(){if(I(this,tL)){let t;for(;t=tP(I(this,tH));)t.delete();for(;t=tP(I(this,tQ));)t.delete();I(this,tW).delete(this),I(this,tF).delete(this),I(this,tN).call(this),M(this,tL,null),M(this,tK,null)}}toJSON(){return tw(this)}};tL=new WeakMap,tN=new WeakMap,tD=new WeakMap,tq=new WeakMap,tW=new WeakMap,tF=new WeakMap,tG=new WeakMap,tU=new WeakMap,tQ=new WeakMap,tY=new WeakMap,tH=new WeakMap,tJ=new WeakMap,tK=new WeakMap,tX=new WeakSet,tZ=function(){let t=this;for(;I(t,tJ)!==t;)M(t,tJ,I(I(t,tJ),tJ)),t=I(t,tJ);return t},t0=new WeakSet,t1=function(){let t=C(this,tX,tZ).call(this);if(void 0===I(t,tK))throw tf`undefined cached info`;if(null!==I(t,tK))return I(t,tK);{let t=0,e=0,i=0;for(let n of this.nodes())t+=1,e+=n.nchildLinks(),i+=I(n,tG),M(n,tJ,this),M(n,tK,void 0),I(this,tF).delete(n);return I(this,tW).add(this),M(this,tK,{nnodes:t,nlinks:e,multis:i,acyclic:null,roots:null,leaves:null})}},t2=new WeakMap;var t5,t9,t8=class{constructor(t,e,i,n,r){this.source=e,this.target=i,this.data=r,k(this,t5,void 0),k(this,t9,void 0),this.points=[],M(this,t5,t),M(this,t9,n)}delete(){I(this,t5)&&(I(this,t9).call(this,this),M(this,t5,null))}};function t3(t){function e(e,i){var n;return tm(null!=(n=t(e,i))?n:[],t=>[t,void 0])}return e.wrapped=t,e}function t7(t){if("object"!=typeof t||null===t||!("id"in t))throw tu`datum did not have an id field, and no id accessor was specified; try calling \`graphStratify().id(d => d...)\` to set a custom id accessor`;let{id:e}=t;if("string"==typeof e)return e;throw tu`datum has an id field that was not a string, and no id accessor was specified; try calling \`graphStratify().id(d => d...)\` to set a custom id accessor`}function t4(t){var e,i;if("object"!=typeof t||null===t)throw tu`default parentIds function expected datum to be an object but got: ${t}; try setting a custom accessor for parentIds with \`graphStratify().parentIds(d => ...)\``;if(!("parentIds"in t))return;let{parentIds:n}=t;if(void 0===n||"object"==typeof(i=n)&&null!==i&&Symbol.iterator in i&&"function"==typeof i[Symbol.iterator]&&(e=t=>"string"==typeof t,!tg(n,(t,i)=>!e(t,i))))return n;throw tu`default parentIds function expected parentIds to be an iterable of strings but got: ${n}; try setting a custom accessor for parentIds with \`graphStratify().parentIds(d => ...)\``}function et(...t){if(t.length)throw tu`got arguments to graphStratify(${t}), but constructor takes no arguments; these were probably meant as data which should be called as \`graphStratify()(...)\``;return function t(e){function i(t){var i;let r=new tA,o=new Map,s=[];for(let[a,l]of t.entries()){let t=function(t){if("string"!=typeof t)throw tu`id is supposed to be type string but got type ${typeof t}`;return t}(e.id(l,a)),h=r.node(l);for(let[t,n]of null!=(i=e.parentData(l,a))?i:[])s.push([t,h,n]);if(o.has(t))throw tu`found a duplicate id: ${n}, but ids passed to \`graphStratify()\` must be unique`;o.set(t,h)}for(let[t,e,i]of s){let n=o.get(t);if(!n)throw tu`missing id: ${t}; this id was references in a node's parentIds, but no node with that id exists`;r.link(n,e,i)}return r}function n(i){if(void 0===i)return e.id;{let{id:n}=e;return t(m(v({},y(e,["id"])),{id:i}))}}return i.id=n,i.parentData=function(i){if(void 0===i)return e.parentData;{let{parentIds:n,parentData:r}=e;return t(m(v({},y(e,["parentIds","parentData"])),{parentIds:function(t){function e(e,i){var n;return tm(null!=(n=t(e,i))?n:[],([t])=>t)}return e.wrapped=t,e}(i),parentData:i}))}},i.parentIds=function(i){if(void 0===i)return e.parentIds;{let{parentIds:n,parentData:r}=e;return t(m(v({},y(e,["parentIds","parentData"])),{parentIds:i,parentData:t3(i)}))}},i}({id:t7,parentIds:t4,parentData:t3(t4)})}function ee(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}t5=new WeakMap,t9=new WeakMap;var ei=x(H());function en(t,e,i,n,r={}){let o=ei.Solve.call({},{optimize:t,opType:e,constraints:n,variables:i,ints:r}),{feasible:s}=o,a=y(o,["feasible"]);if(!s)throw tf`could not find a feasible simplex solution`;return a}function er(t){let e=[...t];if(e.sort((t,e)=>t-e),0!==e.length){if(2===e.length)return(e[0]+e[1])/2;if(e.length%2!=0)return e[(e.length-1)/2];{let t=e.length/2,i=e[0],n=e[t-1],r=e[t],o=e[e.length-1],s=n-i,a=o-r;return(n*a+r*s)/(s+a)}}}function eo(...t){if(t.length)throw tu`got arguments to twolayerAgg(${t}); you probably forgot to construct twolayerAgg before passing to order: \`decrossTwoLayer().order(twolayerAgg())\`, note the trailing "()"`;return function t({aggregate:e}){function i(t,i,n){let[r,o]=n?[i,t]:[t,i],s=n?t=>t.parents():t=>t.children(),a=new Map(o.map((t,e)=>[t,e])),l=new Map(r.map(t=>{let i=a.get(t),n=null!=i?i:e(tm(s(t),t=>a.get(t)));return[t,n]}));!function(t,e){let i=new Map;for(let n of t){let t=e.get(n);void 0!==t&&function(t,e,i){let n=t.get(e);void 0===n?t.set(e,[i]):n.push(i)}(i,t,n)}let n=[...i.entries()].sort(([t],[e])=>t-e).flatMap(([,t])=>t),r=new Map(t.map((t,e)=>[t,e])),o=t.filter(t=>void 0===e.get(t)),s=Array(o.length).fill(null);(function t(e,i,a,l){if(i<=e)return;let h=Math.floor((e+i)/2),u=o[h],c=r.get(u),f=0,d=[0];for(let t=a;t<l;++t)f+=r.get(n[t])<c?-1:1,d.push(f);let p=a+d.indexOf(Math.min(...d));s[h]=p,t(e,h,a,p),t(h+1,i,p,l)})(0,o.length,0,n.length),s.push(n.length+1);let a=0,l=0;for(let[e,i]of n.entries()){for(;s[l]==e;)t[a++]=o[l++];t[a++]=i}for(;s[l]==n.length;)t[a++]=o[l++]}(r,l)}return i.aggregator=function(i){return void 0===i?e:t({aggregate:i})},i.d3dagBuiltin=!0,i}({aggregate:er})}function es([t,e,i]){if(t<=0||e<=0||i<=0)throw tu`simplex weights must be positive, but got: ${t}, ${e}, ${i}`}function ea(t,e){let i=new Map,n=new Map(t.map((t,e)=>[t,e]));return function(t,r){var o;let s=null==(o=i.get(t))?void 0:o.get(r);if(void 0!==s)return s;if(n.has(t)||n.has(r))return-1/0;{let o=0;for(let[i,s]of e(t)){let t=n.get(i);for(let[i,a]of e(r))o+=Math.sign(t-n.get(i))*s*a}let s=i.get(t);void 0===s?i.set(t,new Map([[r,o]])):s.set(r,o);let a=i.get(r);return void 0===a?i.set(r,new Map([[t,-o]])):a.set(t,-o),o}}}function el(...t){if(t.length)throw tu`got arguments to twolayerGreedy(${t}); you probably forgot to construct twolayerGreedy before passing to order: \`decrossTwoLayer().order(twolayerGreedy())\`, note the trailing "()"`;return function t({baseOp:e,doScan:i}){function n(t,n,r){e(t,n,r);let o=r?n:t,s=r?ea(t,t=>t.parentCounts()):ea(n,t=>t.childCounts());i?function(t,e){let i=Array(t.length*(t.length-1)/2);for(;;){let n=0;for(let r=1;r<t.length;++r){let o=0,s=n;for(let n=r-1;n>=0;--n)i[s]=o,o+=e(t[n],t[r]),s-=t.length-n-1;n+=t.length-r}let r=0,o=0,s=0,a=0;for(let n=0;n<t.length-1;++n){let l=0;for(let h=n+1;h<t.length;++h){l+=e(t[n],t[h]);let u=i[r++]+l;u>o&&(o=u,s=n,a=h)}}if(0===o)break;let l=t[a];t[a]=t[s],t[s]=l}}(o,s):function(t,e){let i=[[0,t.length]],n;for(;n=i.pop();){let[r,o]=n;if(r>=o)continue;let s=0,a=o;for(let i=r;i<o-1;++i){let n=e(t[i],t[i+1]);n>s&&(s=n,a=i)}if(a!==o){let e=t[a+1];t[a+1]=t[a],t[a]=e,i.push([r,a],[a+2,o])}}}(o,s)}return n.base=function(n){return void 0===n?e:t({baseOp:n,doScan:i})},n.scan=function(n){return void 0===n?i:t({baseOp:e,doScan:n})},n.d3dagBuiltin=!0,n}({baseOp:()=>{},doScan:!1})}function eh(t){let e=0;for(let[i,n]of tx(t)){let t=new Map(n.map((t,e)=>[t,e]));for(let[n,r]of i.entries())for(let o of i.slice(n+1))for(let[i,n]of r.childCounts())for(let[r,s]of o.childCounts())i!==r&&t.get(i)>t.get(r)&&(e+=n*s)}return e}function eu(...t){if(t.length)throw tu`got arguments to decrossDfs(${t}); you probably forgot to construct decrossDfs before passing to decross: \`sugiyama().decross(decrossDfs())\`, note the trailing "()"`;return function t(e){function i(t){let i;for(let n of(i=e.topDown?tl(t=>[...t.children()].sort((t,e)=>e.nchildren()-t.nchildren()),...tv(t,t=>[...ty(t,t=>!t.nparents())].sort((t,e)=>e.nchildren()-t.nchildren()))):tl(t=>[...t.parents()].sort((t,e)=>e.nparents()-t.nparents()),...tv(function(t,e=0,i=t.length,n=1){if(n>0)return function*(t,e,i,n){let r=Math.min(i,t.length);for(let i=e;i<r;i+=n)yield t[i]}(t,e,i,n);if(n<0)return function*(t,e,i,n){let r=Math.max(i,-1);for(let i=e;i>r;i+=n)yield t[i]}(t,e,i,n);throw tu`can't slice with zero stride`}(t,t.length-1,-1,-1),t=>[...ty(t,t=>!t.nchildren())].sort((t,e)=>e.nparents()-t.nparents()))),t))n.splice(0);for(let e of i){let{data:i}=e;if("node"===i.role)for(let n=i.topLayer;n<=i.bottomLayer;++n)t[n].push(e);else t[i.layer].push(e)}}return i.topDown=function(i){return void 0===i?e.topDown:t({topDown:i})},i.d3dagBuiltin=!0,i}({topDown:!0})}function ec(...t){if(t.length)throw tu`got arguments to decrossTwoLayer(${t}); you probably forgot to construct decrossTwoLayer before passing to decross: \`sugiyama().decross(decrossTwoLayer())\`, note the trailing "()"`;return function t(e){function i(t){let i=t.slice().reverse(),n=t.map(t=>t.slice()),r=eh(n);for(let o of e.inits.length?e.inits:[()=>{}]){o(t);let s=!0;for(let o=0;o<e.passes&&s;++o){for(let[i,n]of(s=!1,tx(t))){let t=n.slice();e.order(i,n,!0),n.some((e,i)=>t[i]!==e)&&(s=!0)}let o=eh(t);for(let[a,l]of(o<r&&(r=o,n=t.map(t=>t.slice())),tx(i))){let t=l.slice();e.order(l,a,!1),l.some((e,i)=>t[i]!==e)&&(s=!0)}let a=eh(t);a<r&&(r=a,n=t.map(t=>t.slice()))}}t.splice(0,t.length,...n)}return i.order=function(i){if(void 0===i)return e.order;{let{order:n}=e;return t(m(v({},y(e,["order"])),{order:i}))}},i.inits=function(i){if(void 0===i)return[...e.inits];{let{inits:n}=e;return t(m(v({},y(e,["inits"])),{inits:i}))}},i.passes=function(i){if(void 0===i)return e.passes;if(i<=0)throw tu`number of passes must be positive`;return t(m(v({},e),{passes:i}))},i.d3dagBuiltin=!0,i}({order:el().base(eo()),inits:[eu().topDown(!0),eu().topDown(!1)],passes:24})}function ef(t,e){return+!!(t&&e)}function ed(){}function ep(...t){if(t.length)throw tu`got arguments to layeringSimplex(${t}); you probably forgot to construct layeringSimplex before passing to layering: \`sugiyama().layering(layeringSimplex())\`, note the trailing "()"`;return function t(e){function i(t,i){var n;let r={},o={},s=new Map(tm(t.nodes(),(t,e)=>[t,e.toString()]));function a(t){return s.get(t)}function l(t,e,i,n,s=0){let h=r[a(e)],u=r[a(i)],c=`${t}: ${a(e)} -> ${a(i)}`;o[c]={min:n},h[c]=-1,u[c]=1,h.opt+=s,u.opt-=s}function h(t,e,i){l(`${t} before`,e,i,0),l(`${t} after`,i,e,0)}let u=[],c=new Map;for(let i of t.nodes()){r[a(i)]={opt:0};let t=e.rank(i);void 0!==t&&u.push([t,i]);let n=e.group(i);if(void 0!==n){let t=c.get(n);t?t.push(i):c.set(n,[i])}}let f=new Set;for(let n of t.topological(e.rank)){for(let[t,e]of n.childCounts())f.has(t)?l("link",t,n,i(t,n),e):l("link",n,t,i(n,t),e);f.add(n)}for(let[[t,e],[n,r]]of tx(u.sort(([t],[e])=>t-e)))t<n?l("rank",e,r,i(e,r)):h("rank",e,r);for(let t of c.values())for(let[e,i]of tx(t))h("group",e,i);try{let e=en("opt","max",r,o,{}),s=0,l=0;for(let r of t.nodes()){let t=null!=(n=e[a(r)])?n:0;r.y=t,s=Math.min(s,t-i(void 0,r)),l=Math.max(l,t+i(r,void 0))}for(let e of t.nodes())e.y-=s;return l-s}catch(t){throw c.size?tu`could not find a feasible simplex layout; this is likely due to group constraints producing an infeasible layout, try relaxing the functions you're passing to \`layeringSimplex().group(...)\``:tf`could not find a feasible simplex solution`}}return i.rank=function(i){if(void 0===i)return e.rank;{let{rank:n}=e;return t(m(v({},y(e,["rank"])),{rank:i}))}},i.group=function(i){if(void 0===i)return e.group;{let{group:n}=e;return t(m(v({},y(e,["group"])),{group:i}))}},i.d3dagBuiltin=!0,i}({rank:ed,group:ed})}function ev(...t){if(t.length)throw tu`got arguments to sugiyama(${t}), but constructor takes no arguments; these were probably meant as data which should be called as \`sugiyama()(...)\``;return function t(e,i){function n(t){let n;if(t.nnodes()){var r;let[o,s]=function(t){if("function"==typeof t)return[e=>t(e)[0],e=>t(e)[1]];{let[e,i]=t;return[()=>e,()=>i]}}(function(t){if("function"!=typeof t){let[e,i]=t;if(e<=0||i<=0)throw tu`all node sizes must be positive, but got width ${e} and height ${i}`;return()=>[e,i]}{let e=new Map;return i=>{let n=e.get(i);if(void 0===n){let[r,o]=n=t(i);if(r<=0||o<=0)throw tu`all node sizes must be positive, but got width ${r} and height ${o} for node with data: ${i.data}; make sure the callback passed to \`sugiyama().nodeSize(...)\` is doing that`;e.set(i,n)}return n}}}(e.nodeSize)),[a,l]=i.gap,h=e.layering(t,ef)+1,[u,c]=function(t,e,i,n,r){let o=new tA,s=Array(n).fill(!1),a=new Map;for(let e of t.nodes()){let t=e.uy;if(void 0===t)throw td`layering ${r} didn't assign a layer to a node`;if(t<0||t>=n)throw td`layering ${r} assigned node an invalid layer: ${t}`;{let i=tb(e.parentCounts(),e.childCounts());!s[t]&&tg(i,([{uy:e},i])=>i>1&&e===t-1)&&(s[t]=!0);let n={node:e,topLayer:t,bottomLayer:t,role:"node"};a.set(e,[n,o.node(n)])}}let l=0,h=s.map(t=>l+=+t);for(let[t]of a.values()){let e=h[t.topLayer];t.topLayer+=e,t.bottomLayer+=e}let u=function(t,e,i,n){for(let[i,[r,o]]of e){let s=r.bottomLayer;for(let r of i.childLinks()){let[i,a]=e.get(r.target),l=i.topLayer;if(l>s){let e=o;for(let i=s+1;i<l;++i){let n=t.node({link:r,layer:i,role:"link"});e.child(n,void 0),e=n}e.child(a)}else if(l<s){let e=a;for(let i=l+1;i<s;++i){let n=t.node({link:r,layer:i,role:"link"});e.child(n,void 0),e=n}e.child(o)}else throw td`layering ${n} assigned nodes with an edge to the same layer`}}let r=Array(i).fill(null).map(()=>[]);for(let e of t.nodes()){let{data:t}=e;if("node"===t.role){let{topLayer:i,bottomLayer:n}=t;for(let t=i;t<=n;++t)r[t].push(e)}else{let{layer:i}=t;r[i].push(e)}}for(let t of r)if(!t.length)throw td`layering ${n} didn't assign a node to every layer`;return r}(o,a,n+l,r),c=-i;for(let t of u){c+=i;let n=Math.max(-i,...tm(t,({data:t})=>"node"===t.role?e(t.node):-1/0)),r=c+n/2;for(let e of t)e.y=r;c+=n}return[u,c]}(t,s,l,h,e.layering);e.decross(u);let f=(r=function(t,e=0){return({data:i})=>"node"===i.role?t(i.node):e}(o),function(t,e){let i=((t?r(t):0)+(e?r(e):0))/2;return t&&e?i+a:i}),d=e.coord(u,f);(function(t,e,i,n,r=.001){for(let o of t){for(let t of o)if(void 0===t.ux)throw td`coord ${n} didn't assign an x to every node`;for(let[[t,s],[a,l]]of tx(tb([[void 0,0]],tm(o,t=>[t,t.x]),[[void 0,i]])))if(l-s<e(t,a)-r)throw td`coord ${n} assigned nodes too close for separation`}})(u,f,d,e.coord),function(t){for(let e of t)for(let t of e)if("node"===t.data.role){let{node:e}=t.data;for(let i of(e.x=t.x,e.y=t.y,t.children())){let n=[[t.x,t.y]],r;for(;"link"===i.data.role;)r=i.data.link,n.push([i.x,i.y]),[i]=i.children();n.push([i.x,i.y]);let o=i.data.node,s=tb(e.childLinksTo(o),e.parentLinksTo(o));r||([r]=s),r.source!==e&&n.reverse(),r.points.splice(0,r.points.length,...n)}}}(u),n={width:d,height:c}}else n={width:0,height:0};for(let i of e.tweaks)n=i(t,n);return n}return n.layering=function(n){if(void 0===n)return e.layering;{let{layering:r}=e;return t(m(v({},y(e,["layering"])),{layering:n}),i)}},n.decross=function(n){if(void 0===n)return e.decross;{let{decross:r}=e;return t(m(v({},y(e,["decross"])),{decross:n}),i)}},n.coord=function(n){if(void 0===n)return e.coord;{let{coord:r}=e;return t(m(v({},y(e,["coord"])),{coord:n}),i)}},n.tweaks=function(n){if(void 0===n)return e.tweaks;{let{tweaks:r}=e;return t(m(v({},y(e,["tweaks"])),{tweaks:n}),i)}},n.nodeSize=function(n){if(void 0===n)return e.nodeSize;if("function"!=typeof n&&(n[0]<=0||n[1]<=0)){let[t,e]=n;throw tu`constant nodeSize must be positive, but got: [${t}, ${e}]`}{let{nodeSize:r}=e;return t(m(v({},y(e,["nodeSize"])),{nodeSize:n}),i)}},n.gap=function(n){if(void 0!==n){let[r,o]=n;if(r<0||o<0)throw tu`gap width (${r}) and height (${o}) must be non-negative`;return t(e,m(v({},i),{gap:n}))}{let[t,e]=i.gap;return[t,e]}},n}({layering:ep(),decross:ec(),coord:function(...t){if(t.length)throw tu`got arguments to coordSimplex(${t}); you probably forgot to construct coordSimplex before passing to coord: \`sugiyama().coord(coordSimplex())\`, note the trailing "()"`;return function t(e){function i(t,i){var n;let r={},o={},s=function(t,e){if("function"!=typeof e){let[t,i,n]=e;return(e,r)=>{switch(+("node"===e.data.role)+ +("node"===r.data.role)){case 0:return n;case 1:return i;case 2:return t;default:throw tf`invalid count`}}}{let i=new Map;for(let n of tv(t,t=>t))if("node"===n.data.role){let t=n.data.node,r=new Map;for(let i of t.childLinks()){let{target:t}=i,n=e(i);es(n),r.set(t,n)}i.set(t,r)}return(t,e)=>{if("link"===t.data.role){let{source:n,target:r}=t.data.link,[,o,s]=i.get(n).get(r);return"link"===e.data.role?s:o}if("link"===e.data.role){let{source:t,target:n}=e.data.link,[,r]=i.get(t).get(n);return r}{let[n]=i.get(t.data.node).get(e.data.node);return n}}}}(t,e.weight),a=new Map,l=0;for(let e of t)for(let t of e)if(!a.has(t)){let e=`${l++}`;a.set(t,e),r[e]={}}function h(t){return a.get(t)}for(let e of t)for(let[t,n]of tx(e)){let e=h(t),s=h(n),a=`layer ${e} -> ${s}`,l=i(t,n);o[a]={min:l},r[e][a]=-1,r[s][a]=1}let u=function(t){let e=0,i=0;for(let n of t)i++,e+=(n-e)/i;return i?e:void 0}(tv(a.keys(),t=>tm(t.children(),e=>e.y-t.y)));for(let t of a.keys()){let e=h(t);for(let i of t.children()){let n=h(i),a=`link ${e} -> ${n}`,l=`${a} parent`;o[l]={min:0};let c=`${a} child`;o[c]={min:0},r[e][l]=1,r[e][c]=-1,r[n][l]=-1,r[n][c]=1;let f=s(t,i),d=(i.y-t.y)/u;r[a]={opt:f/d,[l]:1,[c]:1}}}let c=en("opt","min",r,o);for(let[t,e]of a)t.x=null!=(n=c[e])?n:0;let f=0,d=0;for(let e of t){let t=e[0];f=Math.min(f,t.x-i(void 0,t));let n=e[e.length-1];d=Math.max(d,n.x+i(n,void 0))}for(let t of a.keys())t.x-=f;let p=d-f;if(p<=0)throw tu`must assign nonzero width to at least one node; double check the callback passed to \`sugiyama().nodeSize(...)\``;return p}return i.weight=function(i){if(void 0===i)return e.weight;{"function"!=typeof i&&es(i);let{weight:n}=e;return t(m(v({},y(e,["weight"])),{weight:i}))}},i.d3dagBuiltin=!0,i}({weight:[1,2,8]})}(),nodeSize:[1,1],tweaks:[]},{gap:[1,1]})}x(ti())},61388:(t,e,i)=>{i.d(e,{_:()=>a});var n=i(36158),r=i(26261),o=i(66500),s=i(24880),a=class extends o.Q{#t;#e=void 0;#i;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,s.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,s.EN)(e.mutationKey)!==(0,s.EN)(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(t){this.#r(),this.#o(t)}getCurrentResult(){return this.#e}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#r(),this.#o()}mutate(t,e){return this.#n=e,this.#i?.removeObserver(this),this.#i=this.#t.getMutationCache().build(this.#t,this.options),this.#i.addObserver(this),this.#i.execute(t)}#r(){let t=this.#i?.state??(0,n.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#o(t){r.jG.batch(()=>{if(this.#n&&this.hasListeners()){let e=this.#e.variables,i=this.#e.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,e,i),this.#n.onSettled?.(t.data,null,e,i)):t?.type==="error"&&(this.#n.onError?.(t.error,e,i),this.#n.onSettled?.(void 0,t.error,e,i))}this.listeners.forEach(t=>{t(this.#e)})})}}},79915:(t,e,i)=>{i.d(e,{T:()=>l});var n=i(26261),r=i(1651),o=i(66500),s=i(24880);function a(t,e){return t.filter(t=>!e.includes(t))}var l=class extends o.Q{#t;#s;#a;#l;#h;#u;#c;#f;#d=[];constructor(t,e,i){super(),this.#t=t,this.#l=i,this.#a=[],this.#h=[],this.#s=[],this.setQueries(e)}onSubscribe(){1===this.listeners.size&&this.#h.forEach(t=>{t.subscribe(e=>{this.#p(t,e)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#h.forEach(t=>{t.destroy()})}setQueries(t,e){this.#a=t,this.#l=e,n.jG.batch(()=>{let t=this.#h,e=this.#v(this.#a);this.#d=e,e.forEach(t=>t.observer.setOptions(t.defaultedQueryOptions));let i=e.map(t=>t.observer),n=i.map(t=>t.getCurrentResult()),r=i.some((e,i)=>e!==t[i]);(t.length!==i.length||r)&&(this.#h=i,this.#s=n,this.hasListeners()&&(a(t,i).forEach(t=>{t.destroy()}),a(i,t).forEach(t=>{t.subscribe(e=>{this.#p(t,e)})}),this.#o()))})}getCurrentResult(){return this.#s}getQueries(){return this.#h.map(t=>t.getCurrentQuery())}getObservers(){return this.#h}getOptimisticResult(t,e){let i=this.#v(t),n=i.map(t=>t.observer.getOptimisticResult(t.defaultedQueryOptions));return[n,t=>this.#m(t??n,e),()=>this.#y(n,i)]}#y(t,e){return e.map((i,n)=>{let r=t[n];return i.defaultedQueryOptions.notifyOnChangeProps?r:i.observer.trackResult(r,t=>{e.forEach(e=>{e.observer.trackProp(t)})})})}#m(t,e){return e?(this.#u&&this.#s===this.#f&&e===this.#c||(this.#c=e,this.#f=this.#s,this.#u=(0,s.BH)(this.#u,e(t))),this.#u):t}#v(t){let e=new Map(this.#h.map(t=>[t.options.queryHash,t])),i=[];return t.forEach(t=>{let n=this.#t.defaultQueryOptions(t),o=e.get(n.queryHash);o?i.push({defaultedQueryOptions:n,observer:o}):i.push({defaultedQueryOptions:n,observer:new r.$(this.#t,n)})}),i}#p(t,e){let i=this.#h.indexOf(t);-1!==i&&(this.#s=function(t,e,i){let n=t.slice(0);return n[e]=i,n}(this.#s,i,e),this.#o())}#o(){if(this.hasListeners()){let t=this.#u,e=this.#y(this.#s,this.#d);t!==this.#m(e,this.#l?.combine)&&n.jG.batch(()=>{this.listeners.forEach(t=>{t(this.#s)})})}}}},31993:(t,e,i)=>{i.d(e,{j:()=>n});function n(t){return t}},94747:(t,e,i)=>{i.d(e,{n:()=>l});var n=i(96540),r=i(61388),o=i(26261),s=i(97665),a=i(54362);function l(t,e){let i=(0,s.jE)(e),[l]=n.useState(()=>new r._(i,t));n.useEffect(()=>{l.setOptions(t)},[l,t]);let h=n.useSyncExternalStore(n.useCallback(t=>l.subscribe(o.jG.batchCalls(t)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),u=n.useCallback((t,e)=>{l.mutate(t,e).catch(a.l)},[l]);if(h.error&&(0,a.G)(l.options.throwOnError,[h.error]))throw h.error;return{...h,mutate:u,mutateAsync:h.mutate}}},40458:(t,e,i)=>{i.d(e,{E:()=>d});var n=i(96540),r=i(79915),o=i(26261),s=i(1651),a=i(97665),l=i(98378),h=i(96672),u=i(68590),c=i(60791),f=i(54362);function d({queries:t,...e},i){let d=(0,a.jE)(i),p=(0,l.w)(),v=(0,h.h)(),m=n.useMemo(()=>t.map(t=>{let e=d.defaultQueryOptions(t);return e._optimisticResults=p?"isRestoring":"optimistic",e}),[t,d,p]);m.forEach(t=>{(0,c.jv)(t),(0,u.LJ)(t,v)}),(0,u.wZ)(v);let[y]=n.useState(()=>new r.T(d,m,e)),[g,b,x]=y.getOptimisticResult(m,e.combine),w=!p&&!1!==e.subscribed;n.useSyncExternalStore(n.useCallback(t=>w?y.subscribe(o.jG.batchCalls(t)):f.l,[y,w]),()=>y.getCurrentResult(),()=>y.getCurrentResult()),n.useEffect(()=>{y.setQueries(m,e)},[m,e,y]);let I=g.some((t,e)=>(0,c.EU)(m[e],t))?g.flatMap((t,e)=>{let i=m[e];if(i){let e=new s.$(d,i);if((0,c.EU)(i,t))return(0,c.iL)(i,e,v);(0,c.nE)(t,p)&&(0,c.iL)(i,e,v)}return[]}):[];if(I.length>0)throw Promise.all(I);let k=g.find((t,e)=>{let i=m[e];return i&&(0,u.$1)({result:t,errorResetBoundary:v,throwOnError:i.throwOnError,query:d.getQueryCache().get(i.queryHash),suspense:i.suspense})});if(k?.error)throw k.error;return b(x())}},12898:(t,e,i)=>{i.d(e,{n5:()=>R});var n=i(41089),r=i(16486),o=i(60070),s=i(50183),a=i(70240),l=i(72548);let h=t=>()=>t;function u(t,{sourceEvent:e,target:i,selection:n,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function c(t){t.preventDefault(),t.stopImmediatePropagation()}var f={name:"drag"},d={name:"space"},p={name:"handle"},v={name:"center"};let{abs:m,max:y,min:g}=Math;function b(t){return[+t[0],+t[1]]}function x(t){return[b(t[0]),b(t[1])]}var w={name:"x",handles:["w","e"].map(O),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},I={name:"y",handles:["n","s"].map(O),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},k=(["n","w","e","s","nw","ne","sw","se"].map(O),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),M={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},C={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},_={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},B={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function O(t){return{type:t}}function V(t){return!t.ctrlKey&&!t.button}function S(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function z(){return navigator.maxTouchPoints||"ontouchstart"in this}function E(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function R(){return function(t){var e,i=S,b=V,R=z,T=!0,j=(0,n.A)("start","brush","end"),A=6;function P(e){var i=e.property("__brush",F).selectAll(".overlay").data([O("overlay")]);i.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",k.overlay).merge(i).each(function(){var t=E(this).extent;(0,s.A)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([O("selection")]).enter().append("rect").attr("class","selection").attr("cursor",k.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=e.selectAll(".handle").data(t.handles,function(t){return t.type});n.exit().remove(),n.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return k[t.type]}),e.each($).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",D).filter(R).on("touchstart.brush",D).on("touchmove.brush",q).on("touchend.brush touchcancel.brush",W).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $(){var t=(0,s.A)(this),e=E(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-A/2:e[0][0]-A/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-A/2:e[0][1]-A/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+A:A}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+A:A})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function L(t,e,i){var n=t.__brush.emitter;return!n||i&&n.clean?new N(t,e,i):n}function N(t,e,i){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=i}function D(i){if((!e||i.touches)&&b.apply(this,arguments)){var n,o,h,u,x,O,V,S,z,R,j,A=this,P=i.target.__data__.type,N=(T&&i.metaKey?P="overlay":P)==="selection"?f:T&&i.altKey?v:p,D=t===I?null:_[P],q=t===w?null:B[P],W=E(A),F=W.extent,G=W.selection,U=F[0][0],Q=F[0][1],Y=F[1][0],H=F[1][1],J=0,K=0,X=D&&q&&T&&i.shiftKey,Z=Array.from(i.touches||[i],t=>{let e=t.identifier;return(t=(0,a.A)(t,A)).point0=t.slice(),t.identifier=e,t});(0,l.G)(A);var tt=L(A,arguments,!0).beforestart();if("overlay"===P){G&&(z=!0);let e=[Z[0],Z[1]||Z[0]];W.selection=G=[[n=t===I?U:g(e[0][0],e[1][0]),h=t===w?Q:g(e[0][1],e[1][1])],[x=t===I?Y:y(e[0][0],e[1][0]),V=t===w?H:y(e[0][1],e[1][1])]],Z.length>1&&to(i)}else n=G[0][0],h=G[0][1],x=G[1][0],V=G[1][1];o=n,u=h,O=x,S=V;var te=(0,s.A)(A).attr("pointer-events","none"),ti=te.selectAll(".overlay").attr("cursor",k[P]);if(i.touches)tt.moved=tr,tt.ended=ts;else{var tn=(0,s.A)(i.view).on("mousemove.brush",tr,!0).on("mouseup.brush",ts,!0);T&&tn.on("keydown.brush",function(t){switch(t.keyCode){case 16:X=D&&q;break;case 18:N===p&&(D&&(x=O-J*D,n=o+J*D),q&&(V=S-K*q,h=u+K*q),N=v,to(t));break;case 32:(N===p||N===v)&&(D<0?x=O-J:D>0&&(n=o-J),q<0?V=S-K:q>0&&(h=u-K),N=d,ti.attr("cursor",k.selection),to(t));break;default:return}c(t)},!0).on("keyup.brush",function(t){switch(t.keyCode){case 16:X&&(R=j=X=!1,to(t));break;case 18:N===v&&(D<0?x=O:D>0&&(n=o),q<0?V=S:q>0&&(h=u),N=p,to(t));break;case 32:N===d&&(t.altKey?(D&&(x=O-J*D,n=o+J*D),q&&(V=S-K*q,h=u+K*q),N=v):(D<0?x=O:D>0&&(n=o),q<0?V=S:q>0&&(h=u),N=p),ti.attr("cursor",k[P]),to(t));break;default:return}c(t)},!0),(0,r.A)(i.view)}$.call(A),tt.start(i,N.name)}function tr(t){for(let e of t.changedTouches||[t])for(let t of Z)t.identifier===e.identifier&&(t.cur=(0,a.A)(e,A));if(X&&!R&&!j&&1===Z.length){let t=Z[0];m(t.cur[0]-t[0])>m(t.cur[1]-t[1])?j=!0:R=!0}for(let t of Z)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);z=!0,c(t),to(t)}function to(t){var e;let i=Z[0],r=i.point0;switch(J=i[0]-r[0],K=i[1]-r[1],N){case d:case f:D&&(J=y(U-n,g(Y-x,J)),o=n+J,O=x+J),q&&(K=y(Q-h,g(H-V,K)),u=h+K,S=V+K);break;case p:Z[1]?(D&&(o=y(U,g(Y,Z[0][0])),O=y(U,g(Y,Z[1][0])),D=1),q&&(u=y(Q,g(H,Z[0][1])),S=y(Q,g(H,Z[1][1])),q=1)):(D<0?(J=y(U-n,g(Y-n,J)),o=n+J,O=x):D>0&&(J=y(U-x,g(Y-x,J)),o=n,O=x+J),q<0?(K=y(Q-h,g(H-h,K)),u=h+K,S=V):q>0&&(K=y(Q-V,g(H-V,K)),u=h,S=V+K));break;case v:D&&(o=y(U,g(Y,n-J*D)),O=y(U,g(Y,x+J*D))),q&&(u=y(Q,g(H,h-K*q)),S=y(Q,g(H,V+K*q)))}O<o&&(D*=-1,e=n,n=x,x=e,e=o,o=O,O=e,P in M&&ti.attr("cursor",k[P=M[P]])),S<u&&(q*=-1,e=h,h=V,V=e,e=u,u=S,S=e,P in C&&ti.attr("cursor",k[P=C[P]])),W.selection&&(G=W.selection),R&&(o=G[0][0],O=G[1][0]),j&&(u=G[0][1],S=G[1][1]),(G[0][0]!==o||G[0][1]!==u||G[1][0]!==O||G[1][1]!==S)&&(W.selection=[[o,u],[O,S]],$.call(A),tt.brush(t,N.name))}function ts(t){var i;if(!function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500)}else(0,r.y)(t.view,z),tn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);te.attr("pointer-events","all"),ti.attr("cursor",k.overlay),W.selection&&(G=W.selection),((i=G)[0][0]===i[1][0]||i[0][1]===i[1][1])&&(W.selection=null,$.call(A)),tt.end(t,N.name)}}function q(t){L(this,arguments).moved(t)}function W(t){L(this,arguments).ended(t)}function F(){var e=this.__brush||{selection:null};return e.extent=x(i.apply(this,arguments)),e.dim=t,e}return P.move=function(e,i,n){e.tween?e.on("start.brush",function(t){L(this,arguments).beforestart().start(t)}).on("interrupt.brush end.brush",function(t){L(this,arguments).end(t)}).tween("brush",function(){var e=this,n=e.__brush,r=L(e,arguments),s=n.selection,a=t.input("function"==typeof i?i.apply(this,arguments):i,n.extent),l=(0,o.A)(s,a);function h(t){n.selection=1===t&&null===a?null:l(t),$.call(e),r.brush()}return null!==s&&null!==a?h:h(1)}):e.each(function(){var e=arguments,r=this.__brush,o=t.input("function"==typeof i?i.apply(this,e):i,r.extent),s=L(this,e).beforestart();(0,l.G)(this),r.selection=null===o?null:o,$.call(this),s.start(n).brush(n).end(n)})},P.clear=function(t,e){P.move(t,null,e)},N.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,i,n){var r=(0,s.A)(this.that).datum();j.call(e,this.that,new u(e,{sourceEvent:i,target:P,selection:t.output(this.state.selection),mode:n,dispatch:j}),r)}},P.extent=function(t){return arguments.length?(i="function"==typeof t?t:h(x(t)),P):i},P.filter=function(t){return arguments.length?(b="function"==typeof t?t:h(!!t),P):b},P.touchable=function(t){return arguments.length?(R="function"==typeof t?t:h(!!t),P):R},P.handleSize=function(t){return arguments.length?(A=+t,P):A},P.keyModifiers=function(t){return arguments.length?(T=!!t,P):T},P.on=function(){var t=j.on.apply(j,arguments);return t===j?P:t},P}(w)}},16486:(t,e,i)=>{i.d(e,{A:()=>s,y:()=>a});var n=i(50183);let r={capture:!0,passive:!1};function o(t){t.preventDefault(),t.stopImmediatePropagation()}function s(t){var e=t.document.documentElement,i=(0,n.A)(t).on("dragstart.drag",o,r);"onselectstart"in e?i.on("selectstart.drag",o,r):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function a(t,e){var i=t.document.documentElement,s=(0,n.A)(t).on("dragstart.drag",null);e&&(s.on("click.drag",o,r),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in i?s.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}},70240:(t,e,i)=>{i.d(e,{A:()=>n});function n(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}},32658:(t,e,i)=>{i.d(e,{s_:()=>I,GS:()=>d});var n=i(41089),r=i(16486);function o(t){return((t=Math.exp(t))+1/t)/2}let s=function t(e,i,n){function r(t,r){var s,a,l=t[0],h=t[1],u=t[2],c=r[0],f=r[1],d=r[2],p=c-l,v=f-h,m=p*p+v*v;if(m<1e-12)a=Math.log(d/u)/e,s=function(t){return[l+t*p,h+t*v,u*Math.exp(e*t*a)]};else{var y=Math.sqrt(m),g=(d*d-u*u+n*m)/(2*u*i*y),b=(d*d-u*u-n*m)/(2*d*i*y),x=Math.log(Math.sqrt(g*g+1)-g);a=(Math.log(Math.sqrt(b*b+1)-b)-x)/e,s=function(t){var n,r,s=t*a,c=o(x),f=u/(i*y)*(c*(((n=Math.exp(2*(n=e*s+x)))-1)/(n+1))-((r=Math.exp(r=x))-1/r)/2);return[l+f*p,h+f*v,u*c/o(e*s+x)]}}return s.duration=1e3*a*e/Math.SQRT2,s}return r.rho=function(e){var i=Math.max(.001,+e),n=i*i;return t(i,n,n*n)},r}(Math.SQRT2,2,4);var a=i(50183),l=i(70240),h=i(72548);let u=t=>()=>t;function c(t,{sourceEvent:e,target:i,transform:n,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:r}})}function f(t,e,i){this.k=t,this.x=e,this.y=i}f.prototype={constructor:f,scale:function(t){return 1===t?this:new f(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new f(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var d=new f(1,0,0);function p(t){t.stopImmediatePropagation()}function v(t){t.preventDefault(),t.stopImmediatePropagation()}function m(t){return(!t.ctrlKey||"wheel"===t.type)&&!t.button}function y(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function g(){return this.__zoom||d}function b(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function x(){return navigator.maxTouchPoints||"ontouchstart"in this}function w(t,e,i){var n=t.invertX(e[0][0])-i[0][0],r=t.invertX(e[1][0])-i[1][0],o=t.invertY(e[0][1])-i[0][1],s=t.invertY(e[1][1])-i[1][1];return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function I(){var t,e,i,o=m,I=y,k=w,M=b,C=x,_=[0,1/0],B=[[-1/0,-1/0],[1/0,1/0]],O=250,V=s,S=(0,n.A)("start","zoom","end"),z=0,E=10;function R(t){t.property("__zoom",g).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",q).filter(C).on("touchstart.zoom",W).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function T(t,e){return(e=Math.max(_[0],Math.min(_[1],e)))===t.k?t:new f(e,t.x,t.y)}function j(t,e,i){var n=e[0]-i[0]*t.k,r=e[1]-i[1]*t.k;return n===t.x&&r===t.y?t:new f(t.k,n,r)}function A(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function P(t,e,i,n){t.on("start.zoom",function(){$(this,arguments).event(n).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(n).end()}).tween("zoom",function(){var t=arguments,r=$(this,t).event(n),o=I.apply(this,t),s=null==i?A(o):"function"==typeof i?i.apply(this,t):i,a=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),l=this.__zoom,h="function"==typeof e?e.apply(this,t):e,u=V(l.invert(s).concat(a/l.k),h.invert(s).concat(a/h.k));return function(t){if(1===t)t=h;else{var e=u(t),i=a/e[2];t=new f(i,s[0]-e[0]*i,s[1]-e[1]*i)}r.zoom(null,t)}})}function $(t,e,i){return!i&&t.__zooming||new L(t,e)}function L(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=I.apply(t,e),this.taps=0}function N(t,...e){if(o.apply(this,arguments)){var i=$(this,e).event(t),n=this.__zoom,r=Math.max(_[0],Math.min(_[1],n.k*Math.pow(2,M.apply(this,arguments)))),s=(0,l.A)(t);if(i.wheel)(i.mouse[0][0]!==s[0]||i.mouse[0][1]!==s[1])&&(i.mouse[1]=n.invert(i.mouse[0]=s)),clearTimeout(i.wheel);else{if(n.k===r)return;i.mouse=[s,n.invert(s)],(0,h.G)(this),i.start()}v(t),i.wheel=setTimeout(function(){i.wheel=null,i.end()},150),i.zoom("mouse",k(j(T(n,r),i.mouse[0],i.mouse[1]),i.extent,B))}}function D(t,...e){if(!i&&o.apply(this,arguments)){var n=t.currentTarget,s=$(this,e,!0).event(t),u=(0,a.A)(t.view).on("mousemove.zoom",function(t){if(v(t),!s.moved){var e=t.clientX-f,i=t.clientY-d;s.moved=e*e+i*i>z}s.event(t).zoom("mouse",k(j(s.that.__zoom,s.mouse[0]=(0,l.A)(t,n),s.mouse[1]),s.extent,B))},!0).on("mouseup.zoom",function(t){u.on("mousemove.zoom mouseup.zoom",null),(0,r.y)(t.view,s.moved),v(t),s.event(t).end()},!0),c=(0,l.A)(t,n),f=t.clientX,d=t.clientY;(0,r.A)(t.view),p(t),s.mouse=[c,this.__zoom.invert(c)],(0,h.G)(this),s.start()}}function q(t,...e){if(o.apply(this,arguments)){var i=this.__zoom,n=(0,l.A)(t.changedTouches?t.changedTouches[0]:t,this),r=i.invert(n),s=i.k*(t.shiftKey?.5:2),h=k(j(T(i,s),n,r),I.apply(this,e),B);v(t),O>0?(0,a.A)(this).transition().duration(O).call(P,h,n,t):(0,a.A)(this).call(R.transform,h,n,t)}}function W(i,...n){if(o.apply(this,arguments)){var r,s,a,u,c=i.touches,f=c.length,d=$(this,n,i.changedTouches.length===f).event(i);for(p(i),s=0;s<f;++s)a=c[s],u=[u=(0,l.A)(a,this),this.__zoom.invert(u),a.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,r=!0,d.taps=1+!!t);t&&(t=clearTimeout(t)),r&&(d.taps<2&&(e=u[0],t=setTimeout(function(){t=null},500)),(0,h.G)(this),d.start())}}function F(t,...e){if(this.__zooming){var i,n,r,o,s=$(this,e).event(t),a=t.changedTouches,h=a.length;for(v(t),i=0;i<h;++i)n=a[i],r=(0,l.A)(n,this),s.touch0&&s.touch0[2]===n.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===n.identifier&&(s.touch1[0]=r);if(n=s.that.__zoom,s.touch1){var u=s.touch0[0],c=s.touch0[1],f=s.touch1[0],d=s.touch1[1],p=(p=f[0]-u[0])*p+(p=f[1]-u[1])*p,m=(m=d[0]-c[0])*m+(m=d[1]-c[1])*m;n=T(n,Math.sqrt(p/m)),r=[(u[0]+f[0])/2,(u[1]+f[1])/2],o=[(c[0]+d[0])/2,(c[1]+d[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],o=s.touch0[1]}s.zoom("touch",k(j(n,r,o),s.extent,B))}}function G(t,...n){if(this.__zooming){var r,o,s=$(this,n).event(t),h=t.changedTouches,u=h.length;for(p(t),i&&clearTimeout(i),i=setTimeout(function(){i=null},500),r=0;r<u;++r)o=h[r],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=(0,l.A)(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<E)){var c=(0,a.A)(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return R.transform=function(t,e,i,n){var r=t.selection?t.selection():t;r.property("__zoom",g),t!==r?P(t,e,i,n):r.interrupt().each(function(){$(this,arguments).event(n).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},R.scaleBy=function(t,e,i,n){R.scaleTo(t,function(){var t=this.__zoom.k,i="function"==typeof e?e.apply(this,arguments):e;return t*i},i,n)},R.scaleTo=function(t,e,i,n){R.transform(t,function(){var t=I.apply(this,arguments),n=this.__zoom,r=null==i?A(t):"function"==typeof i?i.apply(this,arguments):i,o=n.invert(r),s="function"==typeof e?e.apply(this,arguments):e;return k(j(T(n,s),r,o),t,B)},i,n)},R.translateBy=function(t,e,i,n){R.transform(t,function(){return k(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof i?i.apply(this,arguments):i),I.apply(this,arguments),B)},null,n)},R.translateTo=function(t,e,i,n,r){R.transform(t,function(){var t=I.apply(this,arguments),r=this.__zoom,o=null==n?A(t):"function"==typeof n?n.apply(this,arguments):n;return k(d.translate(o[0],o[1]).scale(r.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof i?-i.apply(this,arguments):-i),t,B)},n,r)},L.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=(0,a.A)(this.that).datum();S.call(t,this.that,new c(t,{sourceEvent:this.sourceEvent,target:R,type:t,transform:this.that.__zoom,dispatch:S}),e)}},R.wheelDelta=function(t){return arguments.length?(M="function"==typeof t?t:u(+t),R):M},R.filter=function(t){return arguments.length?(o="function"==typeof t?t:u(!!t),R):o},R.touchable=function(t){return arguments.length?(C="function"==typeof t?t:u(!!t),R):C},R.extent=function(t){return arguments.length?(I="function"==typeof t?t:u([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),R):I},R.scaleExtent=function(t){return arguments.length?(_[0]=+t[0],_[1]=+t[1],R):[_[0],_[1]]},R.translateExtent=function(t){return arguments.length?(B[0][0]=+t[0][0],B[1][0]=+t[1][0],B[0][1]=+t[0][1],B[1][1]=+t[1][1],R):[[B[0][0],B[0][1]],[B[1][0],B[1][1]]]},R.constrain=function(t){return arguments.length?(k=t,R):k},R.duration=function(t){return arguments.length?(O=+t,R):O},R.interpolate=function(t){return arguments.length?(V=t,R):V},R.on=function(){var t=S.on.apply(S,arguments);return t===S?R:t},R.clickDistance=function(t){return arguments.length?(z=(t=+t)*t,R):Math.sqrt(z)},R.tapDistance=function(t){return arguments.length?(E=+t,R):E},R}f.prototype},27314:(t,e,i)=>{function n(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}i.d(e,{xA2:()=>n,GWP:()=>r.A,Ltv:()=>o.A,s_O:()=>s.s_,GSI:()=>s.GS}),i(12898);var r=i(60070),o=i(50183);i(72548);var s=i(32658)}}]);
//# sourceMappingURL=vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_tanstack_react-query_build_-2dfd94-69ba6ea4a28a.js.map