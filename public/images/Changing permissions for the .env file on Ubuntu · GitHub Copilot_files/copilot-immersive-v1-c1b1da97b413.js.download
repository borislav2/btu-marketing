"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["copilot-immersive-v1","ui_packages_code-mirror_CodeMirror_tsx","ui_packages_code-mirror_autocomplete_theme_ts-ui_packages_code-mirror_extensions_help-panels_-d428aa","ui_packages_failbot_failbot_ts"],{12927:(e,t,n)=>{n.d(t,{E7:()=>H});var a=n(74848),i=n(96540);let r=(0,i.createContext)({actions:[],staticMenuActions:[],label:"Actions",gap:0}),o=({children:e,value:{actions:t=[],staticMenuActions:n,variant:o="toolbar",label:s,gap:l}})=>{let c=(0,i.useMemo)(()=>({actions:t,staticMenuActions:n,variant:o,label:s,gap:l}),[t,n,o,s,l]);return(0,a.jsx)(r.Provider,{value:c,children:e})},s=()=>{let e=(0,i.useContext)(r);if(!e)throw Error("useActionBarContent must be used with ActionBarContentProvider.");return e};try{r.displayName||(r.displayName="ActionBarContentContext")}catch{}try{o.displayName||(o.displayName="ActionBarContentProvider")}catch{}let l=(0,i.createContext)({outerContainerRef:(0,i.createRef)(),itemContainerRef:(0,i.createRef)()}),c=({value:{anchorRef:e},children:t})=>{let n=(0,i.useRef)(null),r=(0,i.useRef)(null),o=(0,i.useMemo)(()=>({outerContainerRef:n,itemContainerRef:r,anchorRef:e}),[e]);return(0,a.jsx)(l.Provider,{value:o,children:t})},d=()=>{let e=(0,i.useContext)(l);if(!e)throw Error("useActionBarRef must be used with ActionBarRefProvider.");return e};try{l.displayName||(l.displayName="ActionBarRefContext")}catch{}try{c.displayName||(c.displayName="ActionBarRefProvider")}catch{}var u=n(73218),m=n(18610),p=n(45221),h=n(58748);let g=e=>{if(!e)return 0;let t=window.getComputedStyle(e);return t?.columnGap?parseInt(t.columnGap,10):0},f=(e,t)=>{let n=2*g(t),a=e.getBoundingClientRect().width,i=window.getComputedStyle(e);return a+(i?.marginLeft?parseInt(i.marginLeft,10):0)+(i?.marginRight?parseInt(i.marginRight,10):0)+n},v=(e,t)=>{let n=x(e,t);if(void 0===n)return;let a=n;return t&&(a-=t.offsetLeft),a},x=(e,t)=>{if(!e)return;let n=e.offsetWidth;return t&&(n-=t.offsetWidth),n},_=e=>"condensed"===e?"var(--base-size-4)":"spacious"===e?"var(--base-size-16)":"none"===e?0:"var(--base-size-8)",y=(0,i.createContext)({visibleChildEndIndex:0,justifySpaceBetween:!1,recalculateItemSize:u.l}),C=({children:e,value:{actionKeys:t}})=>{let n=t.length,[r,o]=(0,m.N)(n),{outerContainerRef:s,itemContainerRef:l}=d(),[c,u]=(0,i.useState)(),[g,_]=(0,i.useState)(),[C,j]=(0,i.useState)(new Map(t.map(e=>[e,void 0]))),[N,b]=(0,i.useState)(!1),S=(0,i.useMemo)(()=>t.slice(0,r).every(e=>C.has(e)&&"number"==typeof C.get(e)),[t,C,r]),I=(0,i.useCallback)(e=>{let n=t[e];if(n)return C.get(n)},[t,C]),w=(0,i.useCallback)((e,t)=>{let n=l.current;if(!n)return;let a=f(t,n);j(t=>{if(a===t.get(e)||isNaN(a))return t;let n=new Map(Array.from(t.entries()));return n.set(e,a),n})},[l]),E=(0,i.useCallback)(()=>{if(!S)return;let e=s.current,t=l.current,n=x(e,t);if(void 0===n)return;let a=v(e,t);void 0!==a&&n<=a&&o(Math.max(0,r-1))},[S,s,l,o,r]),T=(0,i.useCallback)(()=>{let e=s.current,t=l.current,a=x(e,t);if(void 0===a)return;let i=I(r);if(void 0===i)return;let c=v(e,t);void 0!==c&&a>c+i&&o(Math.min(n,r+1))},[s,l,I,r,o,n]),P=(0,i.useCallback)(()=>{let e=s.current,t=l.current;if(!e||!t)return;let n=e.offsetWidth;n&&(void 0===c||n<=c?E():n>c&&T(),u(n),b(n<=(g??t.offsetWidth)))},[T,E,g,c,s,l]);(0,p.A)(()=>{let e=l.current;if(!e)return;let n=new Map;for(let a of t){let t=e.querySelector(`[data-action-bar-item="${a}"]`);t&&n.set(a,f(t,e))}j(n)},[t,l]),(0,p.A)(()=>{let e=l.current;e&&_(e.offsetWidth)},[l]),(0,p.A)(()=>{P()},[P]),(0,h.w)(P,s);let k=(0,i.useMemo)(()=>({visibleChildEndIndex:r,justifySpaceBetween:N,recalculateItemSize:w}),[r,N,w]);return(0,a.jsx)(y.Provider,{value:k,children:e})},j=()=>(0,i.useContext)(y)||{justifySpaceBetween:!1,visibleChildEndIndex:0,recalculateItemSize:u.l};try{y.displayName||(y.displayName="ActionBarResizeContext")}catch{}try{C.displayName||(C.displayName="ActionBarResizeProvider")}catch{}var N=n(53949),b=n(69676),S=n(82678),I=n(34164),w=n(38621),E=n(14744),T=n.n(E),P=n(89323),k=n(87330),A=n(8338);let L={IconButton_0:"OverflowMenu-module__IconButton_0--P3118"},D=w.KebabHorizontalIcon,O="invisible",R=({anchorProps:{"aria-label":e,icon:t=D,variant:n=O,...r}={icon:D,variant:O}})=>{let{anchorRef:o}=d(),{actions:l,staticMenuActions:c,label:u}=s(),{visibleChildEndIndex:m}=j(),p=(0,i.useMemo)(()=>T()(r,{"aria-label":e?.trim()||`More ${u}`,icon:t,className:L.IconButton_0,variant:n}),[e,t,u,n,r]),h=(0,i.useMemo)(()=>l?.slice(m),[l,m]),g=h&&h.length>0,f=c&&c.length>0;return g||f?(0,a.jsxs)(P.W,{anchorRef:o,children:[(0,a.jsx)(P.W.Anchor,{children:(0,a.jsx)(k.K,{...(0,N.G)("overflow-menu-anchor"),...p})}),(0,a.jsx)(P.W.Overlay,{align:"end",children:(0,a.jsxs)(A.l,{children:[f&&c.map(e=>(0,a.jsx)(i.Fragment,{children:e.render()},e.key)),h?.map(e=>a.jsx(i.Fragment,{children:e.render(!0)},e.key))]})})]}):null};try{R.displayName||(R.displayName="OverflowMenu")}catch{}let B={Box_0:"VisibleAndOverflowContainer-module__Box_0--cTFgm",space:"VisibleAndOverflowContainer-module__space--BaowS"},M={Box_0:"VisibleItem-module__Box_0--wJA9C"},U=({children:e,actionKey:t})=>{let n=(0,i.useRef)(null),{recalculateItemSize:r}=j();return(0,p.A)(()=>{n.current&&r(t,n.current)},[n,r,t]),(0,a.jsx)("div",{...(0,N.G)(`action-bar-item-${t}`),"data-action-bar-item":t,ref:n,className:M.Box_0,children:e})};try{U.displayName||(U.displayName="VisibleItem")}catch{}let $={Box_1:"VisibleItems-module__Box_1--_dgKR"},V=({className:e,style:t})=>{let{itemContainerRef:n}=d(),{actions:i,gap:r}=s(),{visibleChildEndIndex:o}=j(),l=i?.slice(0,o);return(0,a.jsx)("div",{...(0,N.G)("action-bar"),ref:n,className:(0,I.$)(e,$.Box_1),style:{gap:r,...t},children:l?.map(({key:e,render:t})=>a.jsx(U,{actionKey:e,children:t(!1)},e))})};try{V.displayName||(V.displayName="VisibleItems")}catch{}let F=({overflowMenuToggleProps:e,children:t,...n})=>{let{outerContainerRef:i}=d(),{label:r,variant:o,gap:l}=s(),{justifySpaceBetween:c}=j();return(0,S.G)({containerRef:i,bindKeys:b.z0.ArrowHorizontal|b.z0.HomeAndEnd,focusOutBehavior:"wrap",disabled:"toolbar"!==o},[i]),(0,a.jsxs)("div",{ref:i,...(0,N.G)("action-bar-container"),role:"toolbar"===o?"toolbar":void 0,"aria-label":"toolbar"===o?r:void 0,style:{gap:l},className:(0,I.$)(B.Box_0,c&&B.space),children:[(0,a.jsx)(V,{...n}),t,(0,a.jsx)(R,{anchorProps:e})]})};try{F.displayName||(F.displayName="VisibleAndOverflowContainer")}catch{}let W="normal",z=({children:e,...t})=>(0,a.jsx)(F,{...t,children:e}),H=({actions:e=[],staticMenuActions:t,overflowMenuToggleProps:n,children:r,label:s,variant:l,density:d=W,anchorRef:u,className:m,style:p})=>{let h=(0,i.useMemo)(()=>({actions:e,staticMenuActions:t,variant:l,label:s,gap:_(d)}),[e,t,l,s,d]),g=(0,i.useMemo)(()=>({actionKeys:e.map(e=>e.key)}),[e]),f=t&&t.length>0,v=e&&e.length>0;if(!v&&!f)return null;let x={overflowMenuToggleProps:n,className:m,style:p};return(0,a.jsx)(c,{value:{anchorRef:u},children:(0,a.jsx)(o,{value:h,children:v?(0,a.jsx)(C,{value:g,children:(0,a.jsx)(z,{...x,children:r})}):(0,a.jsx)(z,{...x,children:r})})})};try{z.displayName||(z.displayName="InternalActionBar")}catch{}try{H.displayName||(H.displayName="ActionBar")}catch{}},56176:(e,t,n)=>{let a;function i(){if(!a)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return a}function r(){return a?.locale??"en-US"}function o(){return!!i().login}n.d(t,{JK:()=>r,M3:()=>o,_$:()=>i}),!function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{a=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},48741:(e,t,n)=>{n.d(t,{E:()=>a});let a=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},48031:(e,t,n)=>{n.d(t,{G:()=>i});var a=n(24774);function i(e=null,t="bottom"){return[a.S7.of(()=>({dom:e,top:"top"===t}))]}},42378:(e,t,n)=>{n.d(t,{BE:()=>s,Cw:()=>b,I6:()=>C,Lo:()=>d,Md:()=>g,TB:()=>j,TC:()=>y,TU:()=>m,YH:()=>f,Z3:()=>p,eO:()=>x,e_:()=>_,f9:()=>l,fV:()=>h,tJ:()=>v,td:()=>u,w0:()=>c,ye:()=>N});var a=n(15874),i=n(54528),r=n(6585),o=n(24774);let s=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),g=(e,t,n)=>{let a=h(e,t);_(e,a.from,a.from,n)},f=(e,t,n)=>{let a=h(e,t);_(e,a.from,a.from+n.length,"")},v=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},x=(e,t,n)=>e.sliceDoc(t,n),_=(e,t,n,a)=>{e.dispatch({changes:{from:t,to:n,insert:a}})},y=(e,t)=>{let n=s(e);_(e,n.from,n.to,t)},C=(e,t)=>new i.ZX(e.state.doc,t).next(),j=(e,t,n)=>{let a=new i.ZX(e.state.doc,t).next();e.dispatch({changes:{from:a.value.from,to:a.value.to,insert:n}})},N=(e,t,n,a,i)=>{if(void 0!==n)try{let s=h(e,t),l=h(e,n);if(s&&l){e.focus();let t=i?l.from+i:l.to;u(e,s.from+(a??0),t),e.dispatch({effects:[o.Lz.scrollIntoView(r.OF.range(s.from,l.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),l(e,n.from+(a??0)),e.dispatch({effects:[o.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function b(e){return e.state.facet(a.Xt)}},54533:(e,t,n)=>{n.d(t,{QA:()=>o,SI:()=>u,by:()=>d,fQ:()=>c,oy:()=>r,wt:()=>l});var a=n(82610),i=n(77342);function r(e){return e.split("#")[0]}function o(e){return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value}}function s(e,t){return`file:${e.name}#${t}`}function l(e,t,n){return"thread-scoped-file"===e.type?function(e,t){let n=r(e),a=t.get(n)??[],i=a.indexOf(e);return a.length>1&&-1!==i?i+1:null}(s(e,t),n)??void 0:void 0}function c(e,t,n=i.Wp,a){return{type:"file",id:s(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:a?new Date(a):new Date,isStreaming:!1,isUserEdited:n===i.Wp}}function d(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??i.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function u(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??i.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name}}},61202:(e,t,n)=>{var a,i=n(21253),r=n(56413),o=n(88292),s=n(74848);function l(e){return(0,s.jsx)(s.Fragment,{children:e.children})}try{l.displayName||(l.displayName="App")}catch{}var c=n(44848),d=n(82610),u=n(2622),m=n(65615),p=n(55184),h=n(38359),g=n(61663),f=n(96540),v=n(88104),x=n(8932),_=n(46988),y=n(10871),C=n(37827);let j={container:"ImmersiveDisabled-module__container--EDOnQ",content:"ImmersiveDisabled-module__content--dpYC9",footer:"ImmersiveDisabled-module__footer--xPpOC",bannerContainer:"ImmersiveDisabled-module__bannerContainer--Y_iqm"};function N(){return(0,s.jsxs)("div",{className:j.container,children:[(0,s.jsx)("div",{className:j.content,children:(0,s.jsx)(x.A,{})}),(0,s.jsx)("div",{className:j.footer,children:(0,s.jsx)("div",{className:j.bannerContainer,children:(0,s.jsx)(C.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,s.jsx)(y.z,{as:"a",href:"https://github.com/settings/copilot",onClick:()=>(0,_.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"}),children:"Settings"})})})})]})}try{N.displayName||(N.displayName="ImmersiveDisabled")}catch{}var b=n(88117),S=n(37937),I=n(68956),w=n(34164),E=n(69425),T=n(93589),P=n(12152),k=n(42252),A=n(69676),L=n(38621),D=n(82678),O=n(89323),R=n(87330),B=n(8338),M=n(71941),U=n(34614),$=n(68593);let V={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--woWrK"};function F({regionName:e}){return(0,s.jsx)("div",{className:V.errorFallbackContainer,children:(0,s.jsxs)($.A,{children:[(0,s.jsx)($.A.Visual,{children:(0,s.jsx)(L.AlertIcon,{size:"medium"})}),(0,s.jsx)($.A.Heading,{children:"Something went wrong"}),(0,s.jsxs)($.A.Description,{children:[e," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",(0,s.jsx)(U.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),"."]})]})})}try{F.displayName||(F.displayName="ErrorFallback")}catch{}let W={container:"ContentPreview-module__container--bV98v",toolbar:"ContentPreview-module__toolbar--b58FL",actions:"ContentPreview-module__actions--AGnBu",tabsContainer:"ContentPreview-module__tabsContainer--bNywg",tabs:"ContentPreview-module__tabs--Si9sh",rightDivider:"ContentPreview-module__rightDivider--Ta3Js",leftDivider:"ContentPreview-module__leftDivider--X7WDV",content:"ContentPreview-module__content--o15no"};var z=n(42742),H=n(7426),G=n(77342),q=n(22418),K=n(1301),Q=n(41686),X=n(64704),J=n(4576),Y=n(69930),Z=n(6429),ee=n(57991),et=n(10833),en=n(98830),ea=n(73218),ei=n(97286),er=n(79317),eo=n(53949),es=n(18312),el=n(54533);let ec={container:"CreateIssuePreview-module__container--m9PSk",toolbar:"CreateIssuePreview-module__toolbar--uGNIH FilePreview-module__toolbar--toYCM",form:"CreateIssuePreview-module__form--Fm4uO"};var ed=n(12649);let eu={anchor:"VersionSelector-module__anchor--HA1Ko"};function em({item:e}){let{versionedItems:t,openItem:n}=(0,v.xx)(),a=(0,el.oy)(e.id),i=t.get(a)??[];if(i.length<=1)return null;let r=i.indexOf(e.id);return(0,s.jsxs)(O.W,{children:[(0,s.jsx)(O.W.Button,{variant:"invisible",className:eu.anchor,children:(0,s.jsx)(ed.g,{version:r+1,"data-testid":"version-selector"})}),(0,s.jsx)(O.W.Overlay,{children:(0,s.jsx)(B.l,{selectionVariant:"single",children:i.map((t,a)=>(0,s.jsxs)(B.l.Item,{onSelect:()=>n(t),selected:t===e.id,children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(ed.g,{version:a+1})}),"Version ",a+1]},t))})})]})}try{em.displayName||(em.displayName="VersionSelector")}catch{}function ep({isPreviewOpening:e,issue:t,onClose:n,activeMessages:a}){let[i,r]=(0,f.useState)(e);(0,f.useEffect)(()=>{if(i){let e=setTimeout(()=>r(!1),500);return()=>clearTimeout(e)}},[i]);let{isLoading:o,data:l}=function(){let e=(0,es.useRelayEnvironment)();return(0,ei.I)({queryKey:["copilot-immersive-top-repos",e],queryFn:async()=>await (0,et.Xl)(e,10,!0).toPromise()})}(),{isLoading:c,data:d}=function({owner:e,repo:t}){let n=(0,es.useRelayEnvironment)();return(0,ei.I)({queryKey:["copilot-immersive-current-repo",n,e,t],queryFn:async()=>{if(!e||!t)return null;let a=await (0,et.DW)(n,e,t).toPromise();if(a?.repository!=null)return(0,es.readInlineData)(et.R6,a.repository)}})}(t),[u,p]=(0,f.useState)();async function h(e){if(!u)return e;let t=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),n=new Set;for(let e of t||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&n.add(t)}if(n.size>0){let t=Array.from(n).map(async e=>{let t=await fetch(e),n=await t.blob(),a=n.type.split("/")[1],i=`copilot-image.${a}`,r=await createImageBitmap(n),o=r.width;return r.close(),{file:new File([n],i,{type:n.type}),url:e,width:o}}),i=await Promise.all(t);for(let t of(await Promise.all(i.map(async e=>{if(e)return{uploadedFile:await (0,z.QM)(e.file,u.databaseId?.toString()),originalUrl:e.url,width:e.width}}))))if(t){let{uploadedFile:n,originalUrl:a,width:i}=t,r=n.url;if(r){let t=RegExp(`!\\[(.*?)\\]\\(${a}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${i}" src="${r}" />`)}}(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:n.size,threadId:a[0]?.threadID})}return e}let g=function(){let e=(0,m.Pk)(),t=(0,H.b)(),{updateItem:n,openItem:a,openPreviewPane:i,previewPaneOpen:r}=(0,v.xx)();return(0,f.useCallback)(async o=>{(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED",mode:"immersive",threadId:t.getSelectedThread(e)?.id,repositoryId:o.repository.databaseId,issueNumber:o.number});let s=o.number,l=o.repository.owner.login,c=o.repository.name,d=o.title,u=`issue:${l}/${c}/${s}`;n({id:u,messageId:G.Wp,name:d,owner:l,repo:c,number:s,type:"issue"}),a(u),r||i();let m={type:"text",text:`Fetch the issue details and return them in a code block with YAML following this example format:
\`\`\`list type="issue"
data:
- url: ${o.url}
  state: "open"
  draft: false
  title: "${d}"
  number: ${s}
  author: ${e.currentUserLogin}
  created_at: "2025-03-27T12:00:00Z"
  closed_at: "2025-03-27T12:00:00Z"
  labels:
  - name: "bug"
  - name: "good first issue"
\`\`\``};await t.sendChatMessage({thread:t.getSelectedThread(e),content:`Saved the issue to ${l}/${c}#${s}`,references:[m],topic:e.currentTopic,context:e.context,customInstructions:e.customInstructions,model:e.model})},[t,a,i,r,e,n])}(),{openItem:x,updateItem:y}=(0,v.xx)();return i||o||c?(0,s.jsx)(Y.Q,{optionConfig:{useViewportQueries:!1}}):null==l&&null==d?(0,s.jsx)("span",{children:"No repositories found."}):(0,s.jsx)(X.S,{optionConfig:(0,Q.S)({storageKeyPrefix:t.id}),preselectedData:{repository:u},...(0,eo.G)("create-issue-preview"),children:(0,s.jsxs)("div",{className:ec.container,children:[(0,s.jsxs)("div",{className:ec.toolbar,children:[l&&(0,s.jsx)(eh,{topRepos:l,onRepoChange:p,draftIssueRepo:d??void 0,selectedRepo:u}),(0,s.jsx)(em,{item:t}),(0,s.jsx)(q.l,{hideCreateMore:!0})]}),null==u?(0,s.jsx)(Y.Q,{optionConfig:{useViewportQueries:!1}}):(0,s.jsx)("div",{className:ec.form,children:(0,s.jsx)(eg,{title:t.name,description:function(e){if(!e)return"";let t=a.flatMap(e=>e.mediaContent||[]),n=/(\[.*\]\(image[0-9]+\))/g.exec(e);if(!n)return e;for(let a of n){let n=parseInt(a.match(/\(image([0-9]+)\)/)[1],10),i=t[n-1]?.chatAttachmentUrl||t[n-1]?.url;i&&(e=e.replace(a,`[image${n}](${i})`))}return e}(t.body),assignees:t.assignees,onCreate:g,onChange:(e,n)=>{if(e!==t.name||n!==t.body){let a=`${(0,el.oy)(t.id)}#user-edited`,i={...t,id:a,name:e,body:n};y(i),x(i.id)}},onClose:n,onBeforeCreate:h})})]})})}function eh({topRepos:e,onRepoChange:t,draftIssueRepo:n,selectedRepo:a}){let[i,r]=(0,f.useState)(),{setRepository:o}=(0,J.u)(),l=(0,f.useCallback)(e=>{null!=e&&(o(e),t(e))},[o,t]);return(0,f.useEffect)(()=>{n?.id!==i?.id&&(r(n),null!=n&&l(n))},[l,n,n?.id,i,i?.id]),(0,f.useEffect)(()=>{null==a&&null!=n&&l(n)},[l,a,n]),(0,s.jsx)(et.ow,{initialRepository:a??n,onSelect:l,options:{hasIssuesEnabled:!0},topRepositoriesData:e.viewer,enforceAtleastOneSelected:!0})}function eg({title:e,description:t="",assignees:n,onCreate:a,onChange:i,onClose:r,onBeforeCreate:o}){let l=(0,f.useRef)(null),{repository:c,setAssignees:d}=(0,J.u)(),[m,p]=(0,f.useState)(e),[h,g]=(0,f.useState)(t),{isLoading:v,data:x}=function({owner:e,repo:t,assignees:n}){let a=(0,es.useRelayEnvironment)(),i=(0,en.M)({includeAuthorableBots:!1,includeAssignableBots:!0});return(0,ei.I)({queryKey:["copilot-immersive-assignees",a,i,e,t,n],queryFn:async()=>{if(!e||!t||!n)return[];let r=await (0,er.SD)({environment:a,query:ee.OE,variables:{owner:e,name:t,loginNames:n.join(",")??[],first:n.length??0,capabilities:i}}).toPromise();if(r?.repository?.suggestedActors?.nodes!=null)return(r?.repository?.suggestedActors?.nodes??[]).flatMap(e=>e?[(0,es.readInlineData)(Z.G1,e)]:[])}})}({owner:c?.owner.login,repo:c?.name,assignees:n});return((0,f.useEffect)(()=>{u.W.createIssueIncludeAssignee&&!v&&x&&d(x)},[v,x,d]),(0,f.useEffect)(()=>{p(e),g(t)},[t,e]),null==c)?null:(0,s.jsx)(K.e,{repository:c,title:m,body:h,setTitle:e=>{p(e),i?.(e,h)},setBody:e=>{g(e),i?.(m,e)},resetTitleAndBody:ea.l,clearOnCreate:r??ea.l,issueFormRef:l,onCreateSuccess:({issue:e})=>a?.(e),onCreateError:ea.l,onCancel:r??ea.l,onBeforeCreate:o})}try{ep.displayName||(ep.displayName="CreateIssuePreview")}catch{}try{eh.displayName||(eh.displayName="RepositoryPicker")}catch{}try{eg.displayName||(eg.displayName="CreateIssueForm")}catch{}var ef=n(34225),ev=n(26514),ex=n(55516),e_=n(23976),ey=n(55847),eC=n(54006);let ej=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)},eN={container:"FilePreview-module__container--_pENP",contentWrapper:"FilePreview-module__contentWrapper--CRC1E",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--bIVZV",toolbar:"FilePreview-module__toolbar--toYCM",toolbarLeft:"FilePreview-module__toolbarLeft--FG_Fy",toolbarLoC:"FilePreview-module__toolbarLoC--cjBe0",toolbarActions:"FilePreview-module__toolbarActions--GZPSm"};var eb=n(33764),eS=n(21728);let eI={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function ew(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var eE=n(47584),eT=n(75632);let eP={container:"SandboxView-module__container--_qS7F",iframe:"SandboxView-module__iframe--bgP8I"},ek={error:"ErrorMessage-module__error--EPInF",errorIcon:"ErrorMessage-module__errorIcon--qRxBg",errorHeader:"ErrorMessage-module__errorHeader--ePU6Q"};function eA(e){let t;let n=(0,eS.c)(4),{error:a}=e;if(n[0]!==a){let e,i;let r=a?.split("\n")??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("span",{className:ek.errorIcon,children:(0,s.jsx)(L.StopIcon,{size:24})}),i=(0,s.jsx)("h2",{className:ek.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=i):(e=n[2],i=n[3]),t=(0,s.jsxs)("div",{className:ek.error,children:[e,i,r.length>0?(0,s.jsx)("p",{children:r.map(eL)}):(0,s.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=a,n[1]=t}else t=n[1];return t}function eL(e){return(0,s.jsxs)(s.Fragment,{children:[e,(0,s.jsx)("br",{})]},`error-line-${e}}`)}try{eA.displayName||(eA.displayName="ErrorMessage")}catch{}function eD(e){let t,n,a,i;let r=(0,eS.c)(11),{content:o,scripts:l,styles:c,viewscreenUrl:d}=e,u=(0,eT.G7)("viewscreen_sandbox");r[0]!==d?(n=new URL("view/sandbox?url=client://sandbox",d).toString(),t=new URL(n,eE.fV.origin),r[0]=d,r[1]=t,r[2]=n):(t=r[1],n=r[2]);let m=t.origin,p=(0,f.useRef)(null),h=(0,f.useRef)(null);r[3]!==o||r[4]!==l||r[5]!==c?(a={content:o,scripts:l,styles:c},r[3]=o,r[4]=l,r[5]=c,r[6]=a):a=r[6];let{renderState:g,errorMessage:v}=function(e,t,n,a){let i,r,o,s,l,c;let d=(0,eS.c)(16),[u,m]=(0,f.useState)(eI.LOADING),[p,h]=(0,f.useState)();d[0]!==t||d[1]!==e||d[2]!==a?(i=n=>(function(e,t,n,a,i,r){let o=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!o)return;let s=o.body,l=n.current?.contentWindow;switch(s){case"hello":ew(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),ew(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":r(eI.ERROR),o.payload?.error&&i(o.payload.error);break;case"loading":r(eI.LOADING);break;case"loaded":r(eI.LOADED);break;case"ready":if(!n.current||!a.current)return;r(eI.READY)}})(n,0,e,t,h,m),d[0]=t,d[1]=e,d[2]=a,d[3]=i):i=d[3];let g=i;return d[4]!==g?(r=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),o=[g],d[4]=g,d[5]=r,d[6]=o):(r=d[5],o=d[6]),(0,f.useEffect)(r,o),d[7]!==t||d[8]!==e||d[9]!==n||d[10]!==u?(s=()=>{u===eI.READY&&e.current&&t.current&&function(e,t,n){let a={type:"render:cmd",body:{cmd:"sandbox:data:ready","sandbox:data:ready":{...n}}};ew(e.contentWindow,a)}(e.current,t.current,n)},l=[t,e,n,u],d[7]=t,d[8]=e,d[9]=n,d[10]=u,d[11]=s,d[12]=l):(s=d[11],l=d[12]),(0,f.useEffect)(s,l),d[13]!==p||d[14]!==u?(c={renderState:u,errorMessage:p},d[13]=p,d[14]=u,d[15]=c):c=d[15],c}(p,h,a,m);return u?(r[7]!==v||r[8]!==g||r[9]!==n?(i=(0,s.jsx)("div",{ref:h,className:eP.container,children:g===eI.ERROR?(0,s.jsx)(eA,{error:v}):(0,s.jsx)("iframe",{ref:p,className:eP.iframe,sandbox:"allow-scripts",title:"Preview page for the user provided code",src:n})}),r[7]=v,r[8]=g,r[9]=n,r[10]=i):i=r[10],i):null}try{eD.displayName||(eD.displayName="SandboxView")}catch{}let eO={loadingContainer:"HtmlPreview-module__loadingContainer--b987j",loadingHead:"HtmlPreview-module__loadingHead--abHb3",loadingText:"HtmlPreview-module__loadingText--WYXW5"};function eR(e,t,n){let a=`file:${e}`;if(!n.has(a))return null;let i=n.get(a)??[],r=i[i.length-1];if(!r)return null;let o=t.get(r);return o&&"file"===o.type?o:null}function eB({file:e}){let{previewUrl:t}=(0,h.X)(),{items:n,versionedItems:a}=(0,v.xx)(),{scripts:i,styles:r,files:o}=function(e,t,n){let a=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>eR(e,t,n)),i=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>eR(e,t,n)),r=Array.from(e.matchAll(RegExp("<script(?![^>]*\\bsrc=).*?>(.*?)<\\/script>","gms"))).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...a.map(e=>e?.value??""),...r,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join("\n"),styles:i.map(e=>e?.value??"").join("\n"),files:a.concat(i)}}(e.value,n,a),[l,c]=(0,f.useState)(!1),d=(e.isStreaming||o.some(e=>!e||e.isStreaming))&&!l;return((0,f.useEffect)(()=>{if(d){let e=setTimeout(()=>{c(!0)},3e3);return()=>clearTimeout(e)}}),d)?(0,s.jsxs)("div",{className:eO.loadingContainer,children:[(0,s.jsx)("div",{className:eO.loadingHead,children:(0,s.jsx)(eb.Ay,{animationType:"thinking",loopAnimation:!0,mode:"immersive"})}),(0,s.jsx)("p",{className:eO.loadingText,children:"Preparing your preview\u2026"})]}):(0,s.jsx)(eD,{scripts:i,styles:r,content:e.value,viewscreenUrl:t})}try{eB.displayName||(eB.displayName="HtmlPreview")}catch{}var eM=n(24880),eU=n(44968),e$=n(57572),eV=n(63867),eF=n(74022);let eW={markdownPreview:"MarkdownPreview-module__markdownPreview--TTDgv",spinner:"MarkdownPreview-module__spinner--hV_1B",error:"MarkdownPreview-module__error--MpG_1",errorIcon:"MarkdownPreview-module__errorIcon--ZskC4",errorHeader:"MarkdownPreview-module__errorHeader--WHC6c"};function ez({file:e}){let t=function(e,t){let[n,a]=(0,f.useState)(e),i=(0,f.useMemo)(()=>(0,eF.A)(a,2e3),[2e3]);return(0,f.useEffect)(()=>i(e),[i,e]),n}(e.value,2e3),{status:n,data:a}=(0,ei.I)({queryKey:["copilot-immersive","MarkdownPreview",t,e.name],queryFn:async()=>{let n=await (0,e$.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:t,filename:e.name}});if(!n.ok)throw Error(`Failed to load rendered markdown (${n.status} on ${n.url})`);return await n.json()},placeholderData:eM.rX,staleTime:1/0});return(0,s.jsx)("div",{className:(0,w.$)("readme html-blob blob",eW.markdownPreview),children:"pending"===n?(0,s.jsx)("div",{className:eW.spinner,children:(0,s.jsx)(eV.A,{srText:"Loading Markdown preview\u2026"})}):"error"===n?(0,s.jsxs)("div",{className:eW.error,children:[(0,s.jsx)("span",{className:eW.errorIcon,children:(0,s.jsx)(L.StopIcon,{size:24})}),(0,s.jsx)("h2",{className:eW.errorHeader,children:"Markdown rendering failed"}),(0,s.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,s.jsx)(eU.mo,{className:"markdown-body",html:a.html})})}try{ez.displayName||(ez.displayName="MarkdownPreview")}catch{}function eH({file:e,onClose:t}){let{removeItems:n,updateItem:a,versionedItems:i}=(0,v.xx)(),r=(0,m.Pk)(),o=e.isStreaming?r.messages[r.messages.length-1]:r.messages.find(t=>t.id===e.messageId),{linesOfCode:l,isPreviewable:c,size:u}=(0,f.useMemo)(()=>{let t=new Blob([e.value]).size,n=new Set(["markdown","html"]);return{linesOfCode:e.value.split("\n").length,isPreviewable:n.has(e.language),size:function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(t)}},[e.language,e.value]);!function(e,t){let{reference:n}=e,a=(0,H.b)(),{isLoading:i,isError:r,data:o}=(0,ei.I)({queryKey:["copilot-reference-preview","copilot","references",n?.type,n?(0,d.Vb)(n):void 0],queryFn:async()=>{if(!n||"file"!==n.type||e.value)return null;let i=await a.service.hydrateReference(n);return i.ok?(t({...e,value:i.payload.contents,isStreaming:!1}),i.payload):null},staleTime:Number.POSITIVE_INFINITY});(0,f.useEffect)(()=>{o?.contents&&e.value!==o.contents&&t({...e,value:o.contents,isStreaming:!1})},[o?.contents,e,t])}(e,a);let[p,h]=(0,f.useState)("code"),g=(0,f.useCallback)(()=>n([e.id]),[e.id,n]);(0,f.useEffect)(()=>{(o?.error?.type==="publicCode"||o?.error?.type==="filtered")&&t()},[o?.error,t]);let x=i.get((0,el.oy)(e.id)),y=e.isUserEdited&&x&&x.indexOf(e.id)>0;return(0,s.jsxs)("div",{className:eN.container,children:[(0,s.jsxs)("div",{className:eN.toolbar,children:[(0,s.jsxs)("div",{className:eN.toolbarLeft,children:[c&&(0,s.jsxs)(e_.I,{"aria-label":"File view",onChange:e=>{let t=0===e?"preview":"code";h(t),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:[(0,s.jsx)(e_.I.Button,{selected:"preview"===p,children:"Preview"}),(0,s.jsx)(e_.I.Button,{selected:"code"===p,children:"Code"})]}),(0,s.jsx)(em,{item:e}),(0,s.jsxs)("p",{className:eN.toolbarLoC,children:[l," ",1===l?"line":"lines"," \xb7 ",u]})]}),(0,s.jsxs)("div",{className:eN.toolbarActions,children:[y&&(0,s.jsx)(ey.Q,{onClick:g,children:"Revert"}),(0,s.jsx)(ev.T,{textToCopy:e.value,ariaLabel:"Copy code",onCopy:()=>(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}),(0,s.jsx)(R.K,{"aria-label":"Download code",icon:L.DownloadIcon,variant:"invisible",onClick:()=>{ej(new File([e.value],e.name)),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}})]})]}),(0,s.jsx)("div",{className:eN.contentWrapper,children:c&&"preview"===p?(0,s.jsx)(eq,{file:e}):(0,s.jsx)(eG,{file:e})})]})}function eG({file:e}){let{openItem:t,updateItem:n,versionedItems:a}=(0,v.xx)(),i=function(e,t){let n=e.get((0,el.oy)(t.id))??[];return n[n.length-1]===t.id}(a,e),r=!e.isStreaming&&i&&(!e.reference||"thread-scoped-file"===e.reference.type),o=(0,f.useId)(),l=(0,f.useMemo)(()=>(function({language:e,value:t}){let n=/^\t/m.test(t)?"tab":"space";return{indentUnit:function(e,t){if("space"!==t)return 8;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,n),indentWithTabs:"tab"===n,lineWrapping:function(e){let t=(0,eC.v)(e);return t?.wrap??!1}(e)}})(e),[e]),[c,d]=(0,f.useState)(),u=c?.id===e.id?c.value:e.value,{messages:p}=(0,m.Pk)(),h=(0,ex.d)(()=>{n({...e,value:u})},500),g=(0,f.useCallback)(a=>{if(r&&a!==e.value){if(e.isUserEdited)d({value:a,id:e.id}),h();else{let i={...e,messageId:G.Wp,id:`file:${e.name}#${p.length}`,timestamp:new Date,isUserEdited:!0,value:a};n(i),t(i.id),d({value:a,id:i.id})}}},[e,r,p.length,t,h,n]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{id:o,className:"sr-only",children:[e.name," file contents"]}),(0,s.jsx)(ef.default,{ariaLabelledBy:o,containerClassName:eN.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!r,spacing:l,value:u,onChange:g,placeholder:"Loading..."})]})}function eq({file:e}){return"markdown"===e.language?(0,s.jsx)(ez,{file:e}):"html"===e.language?(0,s.jsx)(eB,{file:e}):null}try{eH.displayName||(eH.displayName="FilePreview")}catch{}try{eG.displayName||(eG.displayName="CodeMirrorView")}catch{}try{eq.displayName||(eq.displayName="PreviewComponent")}catch{}let eK={container:"ImagePreview-module__container--AUrb4",imageElement:"ImagePreview-module__imageElement--DNVl1"};function eQ({image:e}){return(0,s.jsx)("div",{className:eK.container,children:(0,s.jsx)("img",{className:eK.imageElement,src:e.url,alt:e.altText})})}try{eQ.displayName||(eQ.displayName="ImagePreview")}catch{}var eX=n(7520),eJ=n(3172);let eY={container:"IssuePreview-module__container--XUu9S"},eZ=(0,f.memo)(function({isPreviewOpening:e,issue:t,onClose:n}){let[a,i]=(0,f.useState)(e);(0,f.useEffect)(()=>{if(a){let e=setTimeout(()=>i(!1),500);return()=>clearTimeout(e)}},[a]);let r=(0,f.useMemo)(()=>({navigate:ea.l,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:n}),[n]),o=(0,f.useMemo)(()=>({owner:t.owner,repo:t.repo,number:t.number,type:"Issue"}),[t.number,t.owner,t.repo]);return a?(0,s.jsx)(Y.Q,{optionConfig:r}):(0,s.jsx)("div",{className:eY.container,children:(0,s.jsx)(eJ.e,{children:(0,s.jsx)(eX.cI,{itemIdentifier:o,optionConfig:r})})})});try{eZ.displayName||(eZ.displayName="IssuePreview")}catch{}function e0({isOpening:e,onClose:t,previewItem:n,activeMessages:a}){let i=null;switch(n.type){case"file":i=(0,s.jsx)(eH,{file:n,onClose:t});break;case"issue":i=(0,s.jsx)(eZ,{isPreviewOpening:e,issue:n,onClose:t});break;case"new-issue":i=(0,s.jsx)(ep,{isPreviewOpening:e,issue:n,activeMessages:a,onClose:t});break;case"image":i=(0,s.jsx)(eQ,{image:n})}return i?(0,s.jsx)(P.t,{fallback:(0,s.jsx)(F,{regionName:"This workbench item"}),children:i}):null}try{e0.displayName||(e0.displayName="ContentPreviewItem")}catch{}let e1={tabContainer:"ContentPreviewTab-module__tabContainer--TyGLZ",tabContent:"ContentPreviewTab-module__tabContent--zNIXv",isActive:"ContentPreviewTab-module__isActive--xbw0T",mainButton:"ContentPreviewTab-module__mainButton--Y_fZZ",icon:"ContentPreviewTab-module__icon--Ff5yz",title:"ContentPreviewTab-module__title--WZajJ",closeButton:"ContentPreviewTab-module__closeButton--DACs7"};function e2({file:e}){return e.isStreaming?(0,s.jsx)(eV.A,{size:"small"}):"markdown"===e.language?(0,s.jsx)(L.MarkdownIcon,{}):(0,s.jsx)(L.CodeIcon,{})}function e5({item:e}){switch(e.type){case"file":return(0,s.jsx)(e2,{file:e});case"image":return(0,s.jsx)(L.ImageIcon,{});case"issue":return(0,s.jsx)(L.IssueOpenedIcon,{});default:return null}}let e3=(0,f.forwardRef)(function({onClick:e,onClose:t,isActive:n,item:a,controlHintId:i,tabPanelId:r,...o},l){let c=()=>{t&&t(),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},d=(0,f.useRef)(null),u=a.name;return(0,s.jsx)("div",{className:e1.tabContainer,children:(0,s.jsxs)("div",{className:(0,w.$)(e1.tabContent,{[e1.isActive]:n}),children:[(0,s.jsxs)("button",{className:e1.mainButton,type:"button",role:"tab","aria-selected":n?"true":void 0,"aria-describedby":i,"aria-controls":r,onClick:t=>{e&&e(t),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},onKeyDown:e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":c();break;case"tab":if(e.shiftKey)break;e.preventDefault(),d.current?.focus()}},onAuxClick:e=>{1===e.button&&c()},ref:l,...o,children:[(0,s.jsx)("span",{className:e1.icon,children:(0,s.jsx)(e5,{item:a})}),(0,s.jsx)("span",{className:e1.title,"data-title":u,"data-testid":`content-preview-tab-${a.id}`,children:u})]}),(0,s.jsx)("div",{className:e1.closeButton,children:(0,s.jsx)(R.K,{icon:L.XIcon,size:"small",variant:"invisible","aria-label":`Close ${u}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:c,ref:d})})]})})});try{e2.displayName||(e2.displayName="CodeTabIcon")}catch{}try{e5.displayName||(e5.displayName="TabIcon")}catch{}try{e3.displayName||(e3.displayName="ContentPreviewTab")}catch{}var e4=n(47767);function e6(){return(0,s.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})})}try{e6.displayName||(e6.displayName="DiceIcon")}catch{}let e7={container:"EmptyState-module__container--iHvWJ",icon:"EmptyState-module__icon--e1df9",heading:"EmptyState-module__heading--p3oK5",subtitle:"EmptyState-module__subtitle--oksOj"};function e8(){let e=(0,H.b)(),t=(0,m.Pk)(),n=(0,e4.zy)(),a=e.getSelectedThread(t),i=(0,h.X)(),[r,o]=(0,f.useState)([]);return(0,f.useEffect)(()=>{var e;if(Array.isArray(e=i.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=i.icebreakers.find(e=>"interactional"===e.type);e&&e.data.length>0&&o(e.data)}},[i.icebreakers,n]),(0,s.jsxs)("div",{className:e7.container,children:[(0,s.jsx)(L.BrowserIcon,{size:24,className:e7.icon}),(0,s.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),(0,s.jsx)("h2",{className:e7.heading,children:"View files directly within Copilot"}),(0,s.jsx)("p",{className:e7.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),(0,s.jsx)(ey.Q,{leadingVisual:e6,onClick:()=>{if(0===r.length)return;let n=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(r),i=0===t.messages.length?a:e.getSelectedThread(t),o=t.currentUserLogin,s=n.message;e.sendChatMessage({thread:i,content:s.replaceAll("$$USERNAME$$",o),references:t.currentReferences,topic:t.currentTopic,context:t.context,customInstructions:t.customInstructions,model:t.model}),(0,_.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:t.currentTopic?.name,mode:"immersive",suggestionId:n.id})},disabled:t.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]})}try{e8.displayName||(e8.displayName="EmptyState")}catch{}let e9={container:"LoadingState-module__container--a0Cz6"};function te(){return(0,s.jsx)("div",{className:e9.container,children:(0,s.jsx)(eV.A,{size:"large"})})}try{te.displayName||(te.displayName="LoadingState")}catch{}function tt(e,t,n={}){(0,_.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function tn({returnFocusRef:e}){let{items:t,openItems:n,selectedItem:a,openItem:i,closeItem:r,closePreviewPane:o,openPreviewPane:l,showLoadingState:d,previewPaneOpen:u}=(0,v.xx)(),p=(0,k.S)(u),h=u&&!p,g=p&&!u,x=n.map(e=>t.get(e)).filter(e=>e?.type==="file"),y=(0,c.nu)((0,m.A3)("activePlugin")),C=(0,f.useId)(),j=(0,f.useId)(),N=(0,f.useId)(),b=n.map(e=>t.get(e)).filter(e=>!!e),{messages:S}=(0,m.Pk)(),I=(0,T.B)(S);(0,f.useEffect)(()=>{g&&e.current?.focus()},[g,e]);let P=async()=>{let e=x.map(e=>new File([e.value],e.name));ej(new File([await (0,M._6)(e).blob()],"files.zip"))},U=b.find(e=>e.id===a)??b[0],$=(0,f.useCallback)((e=!1)=>{if(U){let t=e&&1===b.length;r(U.id),t&&(o(),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[r,o,b.length,U]),V=(0,f.useRef)([]),F=(0,f.useRef)(null);(0,D.G)({containerRef:F,focusableElementFilter:e=>"tab"===e.role,bindKeys:A.z0.ArrowHorizontal|A.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[b]);let z=!(0,E.g)(F),H=e=>{let t=b[e];if(!t)return;let n=V.current[e+1]??V.current[e-1]??F.current;n?.focus();let a=1===b.length;r(t.id),a&&o(),tt("filePreviewTab.close",t)};return y?.PreviewAreaComponent?(0,s.jsx)(ta,{plugin:y,closePreviewPane:o,openPreviewPane:l}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:W.toolbar,children:[(0,s.jsx)("div",{className:(0,w.$)(W.actions,W.rightDivider),children:(0,s.jsx)(ti,{})}),(0,s.jsx)("div",{className:W.tabsContainer,children:(0,s.jsxs)("div",{className:W.tabs,role:"tablist","aria-label":"Workbench items",ref:F,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[b.map((e,t)=>(0,s.jsx)(e3,{id:e.id===a?C:void 0,tabPanelId:e.id===a?j:void 0,controlHintId:N,isActive:e.id===a,onClick:()=>{i(e.id),tt("filePreviewTab.click",e)},onClose:()=>H(t),item:e,ref:e=>{V.current[t]=e}},e.id)),(0,s.jsx)("span",{id:N,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,s.jsx)("span",{})]})}),n.length>0&&(0,s.jsx)("div",{className:(0,w.$)(W.actions,z&&W.leftDivider),children:(0,s.jsxs)(O.W,{children:[(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(R.K,{icon:L.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,s.jsx)(O.W.Overlay,{children:(0,s.jsxs)(B.l,{children:[x.length>0&&(0,s.jsxs)(B.l.Item,{onSelect:P,children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.FileZipIcon,{})}),"Download all files"]}),(0,s.jsxs)(B.l.Item,{onSelect:()=>{for(let e of n)r(e);(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.XIcon,{})}),"Close all tabs"]})]})})]})})," "]}),(0,s.jsx)("div",{className:W.content,role:"tabpanel",id:j,"aria-labelledby":C,children:d?(0,s.jsx)(te,{}):U?(0,s.jsx)(e0,{isOpening:h,previewItem:U,onClose:$,activeMessages:I}):(0,s.jsx)(e8,{})})]})}function ta({closePreviewPane:e,plugin:t,openPreviewPane:n}){let a=(0,m.Pk)(),{PreviewAreaComponent:i}=t;return i?(0,s.jsx)(i,{chatState:a,closePreviewPane:e,openPreviewPane:n,plugin:t},a.selectedThreadID):null}function ti(){let{closePreviewPane:e}=(0,v.xx)();return(0,s.jsx)(R.K,{variant:"invisible",icon:L.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{e(),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}})}function tr(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:W.toolbar,children:(0,s.jsx)("div",{className:(0,w.$)(W.actions,W.rightDivider),children:(0,s.jsx)(ti,{})})}),(0,s.jsx)("div",{className:(0,w.$)(W.content),children:(0,s.jsx)(F,{regionName:"The workbench"})})]})}function to(e){let t=(0,f.useId)();return(0,s.jsxs)("aside",{"aria-labelledby":t,className:W.container,tabIndex:-1,"data-testid":"content-preview",children:[(0,s.jsx)("h2",{id:t,className:"sr-only",children:"Workbench"}),(0,s.jsx)(P.t,{fallback:(0,s.jsx)(tr,{}),children:(0,s.jsx)(tn,{...e})})]})}try{tn.displayName||(tn.displayName="ContentPreviewInner")}catch{}try{ta.displayName||(ta.displayName="PluginContent")}catch{}try{ti.displayName||(ti.displayName="CloseContentPreviewButton")}catch{}try{tr.displayName||(tr.displayName="ContentPreviewFallback")}catch{}try{to.displayName||(to.displayName="ContentPreview")}catch{}var ts=n(33513);function tl(){let{pathname:e}=(0,e4.zy)();return(0,f.useMemo)(()=>e.includes("/share/"),[e])}function tc({messageID:e,messageIndex:t,messageTimestamp:n}){let{openPreviewPane:a,openItem:i,updateItem:r}=(0,v.xx)();return(0,f.useCallback)((o,s)=>{let l;switch(s.type){case"file":l=(0,el.by)(s,e,n);break;case"thread-scoped-file":l=(0,el.fQ)(s,t,e,n);break;case"issue":l=(0,el.SI)(s,e);break;default:return}o.preventDefault(),r(l),i(l.id),a()},[e,t,n,a,i,r])}let td=/\/copilot\/c\/([^/]+)/,tu=/\/copilot\/share\/([^/]+)/;function tm(){let e=eE.fV.pathname;return(0,f.useMemo)(()=>{let t=e.match(td)||e.match(tu);if(!t)return null;let[,n]=t;return n??null},[e])}var tp=n(47173);let th={banner:"ChatInputBanners-module__banner--QlUDL"};var tg=n(64633),tf=n(39483),tv=n(91321);let tx={container:"EditorUpsellBanner-module__container--CVVb2",banner:"EditorUpsellBanner-module__banner--nLwUI",title:"EditorUpsellBanner-module__title--UkB0l",description:"EditorUpsellBanner-module__description--wNgDi",actions:"EditorUpsellBanner-module__actions--tJUAU",editorButton:"EditorUpsellBanner-module__editorButton--gkwOw",closeButton:"EditorUpsellBanner-module__closeButton--qXUPm"};function t_(){let e=(0,m.A3)("isEditorUpsellBannerDismissed"),t=(0,H.b)(),{isLicensedLimited:n}=(0,b.x)(),a=(0,f.useId)(),i="editor_upsell_banner",r=(e,t)=>{u.W.freeToPaidTelemetry?(0,tg.F)(e,i,"immersive",t):(0,_.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})};return e||!n?null:(0,s.jsx)("div",{className:tx.container,children:(0,s.jsxs)("section",{className:tx.banner,"aria-labelledby":a,children:[(0,s.jsx)("h2",{className:tx.title,id:a,children:"Install Copilot in your favorite code editor"}),(0,s.jsx)("p",{className:tx.description,children:"Copilot is available for a multitude of editors to fit your needs"}),(0,s.jsxs)(tv.A,{className:tx.actions,children:[(0,s.jsx)(y.z,{className:tx.editorButton,href:tf.A.vscode.url,leadingVisual:(0,s.jsx)("img",{src:tf.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{r("vscode","ide_menu_primary_button_click")},children:tf.A.vscode.name}),(0,s.jsxs)(O.W,{children:[(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(R.K,{"aria-label":"More editors",icon:L.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{r("menu","ide_menu_open")}})}),(0,s.jsx)(O.W.Overlay,{align:"end",children:(0,s.jsx)(B.l,{children:(0,s.jsx)(tg.t,{menuLocation:i,mode:"immersive"})})})]})]}),(0,s.jsx)(R.K,{variant:"invisible",className:tx.closeButton,icon:L.XIcon,"aria-label":"Dismiss banner",onClick:()=>{t.dismissEditorUpsellBanner(),(0,_.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}})]})})}try{t_.displayName||(t_.displayName="EditorUpsellBanner")}catch{}function ty({onDismiss:e,className:t}){return(0,s.jsx)("div",{className:t,children:(0,s.jsx)(C.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{e(),(0,_.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}})})}try{ty.displayName||(ty.displayName="ProPlusSuccessBanner")}catch{}function tC({onDismiss:e,className:t}){let{resetDate:n}=(0,b.x)();return(0,s.jsx)("div",{className:t,children:(0,s.jsx)(C.l,{variant:"upsell",title:"Limit reached soon",description:`You only have a few free responses remaining. Your limit resets on ${n}.`,hideTitle:!0,primaryAction:(0,s.jsx)(y.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,_.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade"}),onDismiss:()=>{e(),(0,_.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})}})})}try{tC.displayName||(tC.displayName="QuotaMeterBanner")}catch{}var tj=n(31806),tN=n(10967);function tb({topic:e}){return"type"in e&&"docset"===e.type?(0,s.jsx)(tI,{docset:e}):(0,s.jsx)(tS,{repo:e})}function tS({repo:e}){let t=(0,m.pn)(e=>e.model&&!e.model.hasLimitedCapabilities),n=`${e.ownerLogin}/${e.name}`,[a,i]=(0,tN.vn)(n),r=(0,f.useRef)(!1),o=a.code===tN.W5.Unindexed||a.docs===tN.W5.Unindexed;(0,f.useEffect)(function(){!r.current&&o&&t&&(r.current=!0,i())},[t,o,i]);let l=(0,f.useRef)(null);return(0,s.jsx)(tj.Z,{icon:(0,s.jsx)(L.RepoIcon,{}),topic:e,removeButtonRef:l})}function tI({docset:e}){let t=(0,H.b)(),n=(0,m.pn)(t=>t.currentReferences.find(t=>"docset"===t.type&&t.id===e.id)),a=(0,f.useCallback)(()=>t.removeReference(n),[t,n]),{status:i,data:r}=(0,ei.I)({queryKey:["copilot-immersive-v1","docsets"],queryFn:async()=>{let e=await t.fetchKnowledgeBases();if(!e.ok)throw Error(e.error);return e.payload},select:t=>t.find(t=>t.id===e.id)});(0,f.useEffect)(function(){"success"===i&&void 0===r&&a()},[i,r,a]);let o=(0,f.useRef)(null);return r?(0,s.jsx)(tj.Z,{icon:(0,s.jsx)(L.BookIcon,{}),topic:r,removeButtonRef:o}):null}try{tb.displayName||(tb.displayName="TopicIndicator")}catch{}try{tS.displayName||(tS.displayName="RepoTopicIndicator")}catch{}try{tI.displayName||(tI.displayName="KbTopicIndicator")}catch{}function tw({onDismiss:e,className:t}){return(0,s.jsx)("div",{className:t,children:(0,s.jsx)(C.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{e(),(0,_.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}})})}try{tw.displayName||(tw.displayName="TrialSuccessBanner")}catch{}function tE(){let e=(0,m.pn)(e=>null!==e.selectedThreadID),{ambientError:t}=(0,m.Pk)(),n=(0,b.x)().licenseType,a=function(){let{isLicensedLimited:e,chatQuotaRemaining:t}=(0,b.x)(),[n,a]=(0,f.useState)(()=>S.J.getMeterBannerFlag()??!1);return(0,f.useEffect)(()=>{if(e&&void 0!==t){let e=S.J.getMeterBannerFlag();t>0&&t<=10?null===e?(S.J.setMeterBannerFlag(!0),a(!0)):a(e):(S.J.removeMeterBannerFlag(),a(!1))}},[e,t]),{visible:n&&void 0!==t&&e,onDismiss:()=>{S.J.setMeterBannerFlag(!1),a(!1)}}}(),i=function(){let[e,t]=(0,f.useState)(()=>(S.J.getTrialSuccessBannerFlag()&&!S.J.getProPlusSuccessBannerFlag())??!1);return{visible:e,onDismiss:()=>{S.J.removeTrialSuccessBannerFlag(),t(!1)}}}(),r=function(){let[e,t]=(0,f.useState)(()=>S.J.getProPlusSuccessBannerFlag()??!1);return{visible:e,onDismiss:()=>{S.J.removeProPlusSuccessBannerFlag(),S.J.removeTrialSuccessBannerFlag(),t(!1)}}}(),o=function(){let e=(0,m.pn)(e=>(0,d.Z6)(e.currentTopic)?e.currentTopic:void 0),t=(0,m.pn)(e=>e.currentReferences.find(e=>"docset"===e.type));return u.W.topicsAsReferences?null:e??t}();return(0,s.jsxs)(s.Fragment,{children:[!a.visible&&!t&&!i.visible&&!o&&!e&&(0,s.jsx)(t_,{}),a.visible&&(0,s.jsx)(tC,{className:th.banner,onDismiss:a.onDismiss}),t&&(0,s.jsx)(tp.P,{ambientError:t,useLargerBorderRadius:!0}),i.visible&&n===G.mF.LicensedFull&&(0,s.jsx)(tw,{className:th.banner,onDismiss:i.onDismiss}),r.visible&&(0,s.jsx)(ty,{className:th.banner,onDismiss:r.onDismiss}),o&&(0,s.jsx)(tb,{topic:o})]})}try{tE.displayName||(tE.displayName="ChatInputBanners")}catch{}var tT=n(14987),tP=n(80938),tk=n(25408),tA=n(57393),tL=n(2640),tD=n(57516),tO=n(47139),tR=n(87335),tB=n(32837),tM=n(4460);function tU(){let e=(0,H.b)();return(0,f.useCallback)(async t=>{window.location.pathname!==d.Jz&&((0,tM.kd)(d.Jz),e.dispatch({type:"SELECT_PLUGIN",plugin:null}),await e.selectThread(null,t))},[e])}var t$=n(46928),tV=n(53526),tF=n(73451),tW=n(67138),tz=n(74144);let tH={hideOnDesktop:"ConversationActions-module__hideOnDesktop--zHNNV"};var tG=n(37404),tq=n(76797),tK=n(52464),tQ=n(46309);let tX={container:"ShareConversationDialog-module__container--wpFqj",innerContainer:"ShareConversationDialog-module__innerContainer--ew7o4",infoIcon:"ShareConversationDialog-module__infoIcon--w3s7C",sharedLinkContainer:"ShareConversationDialog-module__sharedLinkContainer--3dbSk",textInputContainer:"ShareConversationDialog-module__textInputContainer--_LqvX",textInput:"ShareConversationDialog-module__textInput--ag3aq",success:"ShareConversationDialog-module__success--DAoLb",spinner:"ShareConversationDialog-module__spinner--iCok4",successIcon:"ShareConversationDialog-module__successIcon--_uV9B",mutedText:"ShareConversationDialog-module__mutedText--uOtOA",warningText:"ShareConversationDialog-module__warningText--mnPk3",snapshotText:"ShareConversationDialog-module__snapshotText--XnOm_",bannerContainer:"ShareConversationDialog-module__bannerContainer--v41YW",buttonStack:"ShareConversationDialog-module__buttonStack--AQnkh",lockIcon:"ShareConversationDialog-module__lockIcon--q0IrF",cancelButton:"ShareConversationDialog-module__cancelButton--qmzvU",quickFadeUp:"ShareConversationDialog-module__quickFadeUp--bxfGb"},tJ=({closeDialog:e,threadId:t})=>{let n=(0,m.Pk)(),a=(0,H.b)(),[i,r]=(0,f.useState)(!1),[o,l]=(0,f.useState)(!1),[c,d]=(0,f.useState)(!1),[p,h]=(0,f.useState)(!1),{selectedThreadID:g,ssoOrganizations:v,apiUrl:x,threads:y,isWaitingOnCopilot:j}=n,N=y.get(t||g),[b,S]=(0,f.useState)(()=>N?.sharedID||""),[I,w]=(0,f.useState)(()=>N?.sharedMessageID?N.sharedMessageID:""),E=eE.fV.origin,T=`${E}/copilot/share/${b}`;(0,f.useEffect)(()=>{if(i){let e=setTimeout(()=>r(!1),1500);return()=>clearTimeout(e)}},[i]),(0,f.useEffect)(()=>{if(c){let e=setTimeout(()=>d(!1),1500);return()=>clearTimeout(e)}},[c]);let P=(0,f.useCallback)(async()=>{try{await (0,tq.D)(T),r(!0),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},[T]);(0,f.useEffect)(()=>{(t||g)&&S(N?.sharedID||"")},[N?.sharedID,g,t]);let k=(0,f.useCallback)(async()=>{l(!0);let e=t||g,n=new tG.k(x,v),i=await n.shareThread(e,u.W.copilotShareActiveSubthread?a.FindLastMessageID():"");if(i.ok){l(!1);let{sharedAt:t,sharedID:n,sharedMessageID:r}=i.payload;S(n),d(!0),w(r);let o=y.get(e);a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{...o,sharedID:n,sharedAt:t,sharedMessageID:r}}),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive"})}else l(!1)},[x,a,g,v,y,t]),A=(0,f.useCallback)(async()=>{if(!p){h(!0);return}h(!1),l(!0);let e=t||g,n=new tG.k(x,v),i=await n.unshareThread(e);i.ok?(l(!1),w(""),a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{...i.payload}}),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive"})):l(!1)},[x,a,g,p,v,t]);return(0,s.jsx)(tz.l,{title:b?"Conversation shared":"Share conversation",onClose:e,width:"large",children:(0,s.jsxs)("div",{className:tX.container,children:[(0,s.jsx)(C.l,{"aria-label":"Private content banner",hideTitle:!0,title:"This conversation may contain private content",className:tX.bannerContainer,description:(0,s.jsx)(s.Fragment,{children:"Only users with access to referenced private content can view this conversation."})}),(0,s.jsxs)(tQ.B,{direction:"vertical",gap:"condensed",children:[(0,s.jsx)(tQ.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:u.W.copilotLiveSharing&&I?(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:tX.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):(0,s.jsx)("span",{className:tX.mutedText,children:b?"This conversation is now shared. Anyone with the link can view it. Keep in mind that it is live and publicly accessible.":"This conversation is private and only visible to you. Share it to make it accessible to others with the link."})}),(0,s.jsx)("div",{className:tX.innerContainer,children:(0,s.jsx)("div",{className:tX.sharedLinkContainer,children:(0,s.jsx)("div",{className:tX.textInputContainer,children:(0,s.jsx)(tW.A,{"aria-label":"Shared link",readOnly:!0,disabled:""===b,value:b&&T,placeholder:b?void 0:"Conversation link will appear here after sharing",className:tX.textInput,trailingAction:b?(0,s.jsx)(tW.A.Action,{onClick:()=>void P(),icon:L.CopyIcon,"aria-label":"Copy link"}):void 0})})})})]}),(0,s.jsxs)(tQ.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"space-between",className:tX.buttonStack,children:[b?j?(0,s.jsxs)("div",{children:[(0,s.jsx)(eV.A,{size:"small",className:tX.spinner}),(0,s.jsx)(tK.A,{size:"medium",className:tX.mutedText,children:"Copilot is responding..."})]}):o?(0,s.jsxs)("div",{className:tX.quickFadeUp,children:[(0,s.jsx)(eV.A,{size:"small",className:tX.spinner}),b?"Unsharing conversation...":"Sharing conversation..."]}):p?(0,s.jsxs)("div",{className:tX.quickFadeUp,children:[(0,s.jsx)(tK.A,{size:"medium",className:tX.warningText,children:"Confirm unsharing this conversation?"}),(0,s.jsx)(ey.Q,{variant:"default",onClick:()=>h(!1),className:tX.cancelButton,children:"Cancel"})]}):i?(0,s.jsxs)("div",{className:tX.quickFadeUp,children:[(0,s.jsx)(L.CheckIcon,{className:tX.successIcon}),(0,s.jsx)(tK.A,{size:"medium",className:tX.success,children:"Copied to clipboard"})]}):c?(0,s.jsxs)("div",{className:tX.quickFadeUp,children:[(0,s.jsx)(L.CheckIcon,{className:tX.successIcon}),(0,s.jsx)(tK.A,{size:"medium",className:tX.success,children:"Conversation shared"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(L.UnlockIcon,{className:tX.lockIcon}),(0,s.jsx)(tK.A,{size:"medium",className:tX.mutedText,children:"Visible to anyone with the link"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(L.LockIcon,{className:tX.lockIcon}),(0,s.jsx)(tK.A,{size:"medium",className:tX.mutedText,children:"Only visible to you"})]}),(()=>{if(!b)return(0,s.jsx)(ey.Q,{variant:"primary",disabled:o||j,onClick:k,children:"Share"})})(),(()=>{if(b)return(0,s.jsx)(ey.Q,{variant:"danger",disabled:o,onClick:A,children:"Unshare"})})()]})]})})};try{tJ.displayName||(tJ.displayName="ShareConversationDialog")}catch{}function tY({onOpenDialog:e,showShare:t=!0,hideShareOnDesktop:n=!1,isShared:a=!1}){let{canShareThread:i}=(0,h.X)(),{isWaitingOnCopilot:r,messages:o}=(0,m.Pk)(),l=(0,d.Q7)(o).length>0||r;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B.l.Item,{onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),e("rename")},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.PencilIcon,{})}),"Rename"]}),t&&i&&(0,s.jsxs)(B.l.Item,{className:n?tH.hideOnDesktop:void 0,disabled:l,onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),e("share")},children:[(0,s.jsx)(B.l.LeadingVisual,{children:a?(0,s.jsx)(L.UnlockIcon,{}):(0,s.jsx)(L.LockIcon,{})}),a?"Shared":"Share"]}),(0,s.jsxs)(B.l.Item,{variant:"danger",onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),e("delete")},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.TrashIcon,{})}),"Delete"]})]})}function tZ({visibleDialog:e,onClose:t,threadName:n,threadId:a,selectedThreadId:i,onStartLoading:r,onFinishLoading:o}){let{threads:l}=(0,m.Pk)(),c=(0,H.b)(),u=(0,t$.Z)(),p=(0,f.useCallback)(async()=>{t(),(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),r();let e=l.get(a);e&&(a===i&&u(d.Jz),await c.deleteThread(e)),o()},[l,a,i,u,c,o,r,t]),h=(0,f.useCallback)(async e=>{t(),(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),r();let n=l.get(a);n&&await c.renameThread(n,e),o()},[l,a,c,r,o,t]);return(0,s.jsx)(s.Fragment,{children:"delete"===e?(0,s.jsx)(t0,{onCancel:t,onConfirm:p}):"rename"===e?(0,s.jsx)(t1,{currentName:n,onCancel:t,onSubmit:h}):"share"===e?(0,s.jsx)(tJ,{closeDialog:()=>{t(),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},threadId:i}):null})}let t0=({onConfirm:e,onCancel:t})=>(0,s.jsx)(tV.K,{title:"Delete conversation",onClose:n=>{"confirm"===n?((0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"}),e()):((0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),t())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),t1=({currentName:e,onCancel:t,onSubmit:n})=>{let[a,i]=(0,f.useState)(void 0),r=(0,f.useRef)(null),o=(0,f.useId)(),l=()=>{(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),t()};return(0,s.jsx)(tz.l,{title:"Rename conversation",onClose:l,width:"small",footerButtons:[{content:"Cancel",onClick:l},{content:"Update",buttonType:"primary",type:"submit",form:o,onClick:()=>(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}],initialFocusRef:r,children:(0,s.jsx)("form",{id:o,onSubmit:e=>{e.preventDefault();let t=r.current?.value?.trim()??"";t?t.length>100?i("max_length"):n(t):i("required")},children:(0,s.jsxs)(tF.A,{required:!0,children:[(0,s.jsx)(tF.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),(0,s.jsx)(tW.A,{ref:r,defaultValue:e,maxLength:100,block:!0}),"required"===a&&(0,s.jsx)(tF.A.Validation,{variant:"error",children:"Enter a name"}),"max_length"===a&&(0,s.jsx)(tF.A.Validation,{variant:"error",children:"Name cannot exceed 100 characters"})]})})})};try{tY.displayName||(tY.displayName="ConversationActions")}catch{}try{tZ.displayName||(tZ.displayName="ConversationActionDialogs")}catch{}try{t0.displayName||(t0.displayName="DeleteDialog")}catch{}try{t1.displayName||(t1.displayName="RenameDialog")}catch{}let t2={header:"Header-module__header--ufLgW",leftControls:"Header-module__leftControls--nKUjx",leftControlsCollapsed:"Header-module__leftControlsCollapsed--FpvQ8",centerControls:"Header-module__centerControls--R1eiB",rightControls:"Header-module__rightControls--Ce65x",editedPromptIndicator:"Header-module__editedPromptIndicator--k1vcE",leadingVisual:"Header-module__leadingVisual--O6MuP",hideOnDesktop:"Header-module__hideOnDesktop--RUpod"},t5={shareButton:"ManageSharedConversationButton-module__shareButton--A4cNu",menuButton:"ManageSharedConversationButton-module__menuButton--BAXN7",successState:"ManageSharedConversationButton-module__successState--o6D7d",hideOnMobile:"ManageSharedConversationButton-module__hideOnMobile--HzeSN"};var t3=n(8386),t4=n(56221);let t6={dialog:"ManageSharedConversationDialog-module__dialog--z3inf",actionButtons:"ManageSharedConversationDialog-module__actionButtons--G0uy0",alertIcon:"ManageSharedConversationDialog-module__alertIcon--_wdVB",footer:"ManageSharedConversationDialog-module__footer--oM89t",mutedText:"ManageSharedConversationDialog-module__mutedText--PpzDj",footerContent:"ManageSharedConversationDialog-module__footerContent--dn3my",footerLeft:"ManageSharedConversationDialog-module__footerLeft--zNhJd",footerRight:"ManageSharedConversationDialog-module__footerRight--BnYqJ",confirmationText:"ManageSharedConversationDialog-module__confirmationText--WVHff",quickFadeUp:"ManageSharedConversationDialog-module__quickFadeUp--QK9E0",conversationLink:"ManageSharedConversationDialog-module__conversationLink--Q_zJc"},t7={container:"UnshareConversationDialog-module__container--vV3vj",innerContainer:"UnshareConversationDialog-module__innerContainer--aVe0T",sharedLinkContainer:"UnshareConversationDialog-module__sharedLinkContainer--pLncF",textInputContainer:"UnshareConversationDialog-module__textInputContainer--EHz0c",textInput:"UnshareConversationDialog-module__textInput--geVKg",buttonStack:"UnshareConversationDialog-module__buttonStack--IQJqH",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--iNgZ2",threadTitle:"UnshareConversationDialog-module__threadTitle--aYFcp",threadDescription:"UnshareConversationDialog-module__threadDescription--Cpoli"},t8=({closeDialog:e,threadId:t})=>{let n=(0,m.Pk)(),a=(0,H.b)(),[i,r]=(0,f.useState)(!1),[o,l]=(0,f.useState)(!1),{selectedThreadID:c,ssoOrganizations:d,apiUrl:u,threads:p}=n,[h,g]=(0,f.useState)(n.messages),[v,x]=(0,f.useState)(()=>{let e=p.get(t);return e?.sharedID||""}),y=(0,f.useRef)(""!==v);(0,f.useEffect)(()=>{let e=async()=>{if(0===h.filter(e=>e.threadID===t).length){let e=new tG.k(n.apiUrl,n.ssoOrganizations),t=await e.listSharedThreadMessages(v);t.ok&&g(t.payload.messages)}};v&&e()},[v,t]);let C=p.get(t||c),j=h[h.length-1],N=j?.content||"",b=eE.fV.origin,S=`${b}/copilot/share/${v||"..."}`;(0,f.useEffect)(()=>{if(i){let e=setTimeout(()=>r(!1),1500);return()=>clearTimeout(e)}},[i]);let I=(0,f.useCallback)(async()=>{try{await (0,tq.D)(S),r(!0),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},[S]);(0,f.useEffect)(()=>{let e=t||c;if(e){let t=p.get(e);x(t?.sharedID||"")}},[a,x,c,p,t]);let w=(0,f.useCallback)(async()=>{let n=t||c;l(!0);let i=new tG.k(u,d),r=await i.unshareThread(n);r.ok&&(a.dispatch({type:"SHARED_THREAD_UPDATED",thread:{...r.payload}}),y.current=!1,e(),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive"}))},[u,e,a,c,d,t]),E=(0,f.useCallback)(()=>{r(!1)},[]),T=(0,f.useCallback)(()=>{E(),e()},[e,E]);return(0,s.jsx)(tz.l,{title:"Unshare conversation",onClose:T,width:"large",children:(0,s.jsxs)("div",{className:t7.container,children:[(0,s.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),(0,s.jsxs)(tQ.B,{direction:"vertical",className:t7.threadInfoStack,"aria-label":"Thread information",children:[(0,s.jsx)("span",{className:t7.threadTitle,children:C?.name||""}),(0,s.jsx)("span",{className:t7.threadDescription,children:N})]}),(0,s.jsx)(tQ.B,{direction:"vertical",gap:"condensed",children:(0,s.jsx)("div",{className:t7.innerContainer,children:(0,s.jsx)("div",{className:t7.sharedLinkContainer,children:(0,s.jsx)("div",{className:t7.textInputContainer,children:(0,s.jsx)(tW.A,{"aria-label":"Shared link",readOnly:!0,disabled:""===v,value:v&&S,placeholder:v?void 0:S,className:t7.textInput,size:"large",trailingAction:(0,s.jsx)(tW.A.Action,{onClick:I,icon:i?L.CheckIcon:L.CopyIcon,"aria-label":i?"Copied!":"Copy link",disabled:o})})})})})}),(0,s.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),(0,s.jsxs)(tQ.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:t7.buttonStack,children:[(0,s.jsx)(ey.Q,{onClick:e,children:"Cancel"}),(()=>{if(v)return(0,s.jsx)(ey.Q,{onClick:w,variant:"danger",children:"Unshare"})})()]})]})})};try{t8.displayName||(t8.displayName="UnshareConversationDialog")}catch{}let t9=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},ne=({closeDialog:e})=>{let t=(0,H.b)(),n=(0,m.Pk)(),[a,i]=(0,f.useState)(0),[r,o]=(0,f.useState)([]),[l,c]=(0,f.useState)(!0),[d,u]=(0,f.useState)(!1),[p,h]=(0,f.useState)(null),[g,v]=(0,f.useState)(!1),[x,y]=(0,f.useState)(5>r.length),C=5*a,j=r.slice(C,C+5);(0,f.useEffect)(()=>{(async()=>{let e=await t.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:t9(e.updatedAt),sharedUrl:`${eE.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${eE.fV.origin}/copilot/c/${e.id}`}))),c(!1)})()},[t]),(0,f.useEffect)(()=>{x&&a>0&&r.length<=5*a&&i(0),y(5<r.length)},[r,a,5]);let N=(0,f.useCallback)(()=>{e()},[e]),b=(0,f.useCallback)(async()=>{if(!g){v(!0);return}v(!1),c(!0);try{(await t.unshareAllThreads()).ok&&(o([]),await t.fetchThreads())}finally{c(!1)}},[g,t]),S=e=>{h(e),u(!0)},I=async()=>{u(!1),h(null),c(!0);let e=await t.fetchSharedThreads();e&&o(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:t9(e.updatedAt),sharedUrl:`${eE.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${eE.fV.origin}/copilot/c/${e.id}`}))),c(!1)},w=l||"error"===n.sharedThreadsLoading.state||0===r.length,E=e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`,T=(0,f.useMemo)(()=>l?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===n.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[l,n.sharedThreadsLoading.state]);return(0,s.jsxs)(tz.l,{title:"Manage shared conversations",width:"xlarge",className:t6.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:N,footerButtons:r.length>0?[{buttonType:"default",content:g?"Cancel":"Close",onClick:g?()=>v(!1):N},{buttonType:"danger",content:"Unshare all",onClick:()=>{b()}}]:[],renderFooter:({footerButtons:e})=>e?.length?(0,s.jsx)(tz.l.Footer,{className:t6.footer,children:(0,s.jsxs)("div",{className:t6.footerContent,children:[(0,s.jsx)("div",{className:t6.footerLeft,children:g&&(0,s.jsx)("div",{className:`${t6.confirmationText} ${t6.quickFadeUp}`,children:E(r.length)})}),(0,s.jsx)("div",{className:t6.footerRight,children:e&&(0,s.jsx)(tz.l.Buttons,{buttons:e})})]})}):null,children:[w?(0,s.jsxs)($.A,{children:[(0,s.jsx)($.A.Visual,{children:T.isSpinner?(0,s.jsx)(tQ.B,{direction:"horizontal",align:"center",children:(0,s.jsx)(eV.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,s.jsx)("div",{className:t6.mutedText,children:"error"===T.result?(0,s.jsx)(L.AlertIcon,{size:"medium",className:t6.alertIcon,"aria-label":"Error loading shared conversations"}):(0,s.jsx)(L.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,s.jsx)($.A.Heading,{children:T.heading}),(0,s.jsx)($.A.Description,{children:T.description})]}):(0,s.jsxs)(t3.X.Container,{children:[(0,s.jsx)(t4.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,s.jsx)(U.A,{href:e.threadUrl,className:t6.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,s.jsx)("span",{className:t6.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,s.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:t6.actionButtons,children:[(0,s.jsx)(ev.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,s.jsx)(R.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:L.UnlinkIcon,variant:"invisible",onClick:()=>S(e)})]})})}],data:j}),r.length>5&&(0,s.jsx)(t3.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,totalCount:r.length,onChange:e=>{i(e.pageIndex)},showPages:!1})]}),d&&p&&(0,s.jsx)(t8,{threadId:p.id,closeDialog:I})]})};try{ne.displayName||(ne.displayName="ManageSharedConversationDialog")}catch{}let nt=({isShared:e=!1})=>{let{isWaitingOnCopilot:t,messages:n,selectedThreadID:a,threads:i}=(0,m.Pk)(),[r,o]=(0,f.useState)(!1),[l,c]=(0,f.useState)(!1),[u,p]=(0,f.useState)(!1),[h,g]=(0,f.useState)(!1),[v,x]=(0,f.useState)(!1),[y,C]=(0,f.useState)("Copy link"),j=(0,d.Q7)(n),N=j.length>0||t,b=i.get(a)?.sharedID,S=`${eE.fV.origin}/copilot/share/${b||"..."}`,I=i.get(a),w=e&&I?.sharedMessageID,E=e&&!I?.sharedMessageID,T=(0,f.useCallback)(async e=>{"preventDefault"in e&&(e.preventDefault(),e.stopPropagation());try{await (0,tq.D)(S),g(!0),C("Copied!"),setTimeout(()=>{g(!1),C("Copy link")},2e3),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},[S]),P=()=>{N||(c(!0),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_MANAGE_SHARED_CONVERSATIONS_DIALOG_OPEN",mode:"immersive"}))},k="Share";return w?k="Shared":E&&(k="Sharing"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(tv.A,{"data-testid":"manage-shared-conversations",className:`${t5.shareButton} ${t5.hideOnMobile}`,children:[(0,s.jsx)(ey.Q,{leadingVisual:e?L.UnlockIcon:L.LockIcon,disabled:N,onClick:()=>o(!0),"aria-label":j.length>0?"Disabled for Copilot extensions":t?"Copilot is responding\u2026":e?"Update conversation":"Share conversation",children:k}),(0,s.jsxs)(O.W,{open:v,onOpenChange:x,children:[(0,s.jsx)(O.W.Button,{"aria-label":"Additional share options",icon:L.TriangleDownIcon,className:t5.menuButton}),(0,s.jsx)(O.W.Overlay,{width:"small",children:(0,s.jsx)(B.l,{children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B.l.Item,{onSelect:T,children:[(0,s.jsx)(B.l.LeadingVisual,{children:h?(0,s.jsx)(L.CheckIcon,{className:t5.successState}):(0,s.jsx)(L.CopyIcon,{})}),(0,s.jsx)("span",{className:h?t5.successState:void 0,children:y})]},"copy-link"),(0,s.jsxs)(B.l.Item,{variant:"danger",onSelect:()=>{N||(p(!0),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_OPEN",mode:"immersive"}))},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.UnlinkIcon,{})}),"Unshare"]},"Unshare-link"),(0,s.jsx)(B.l.Divider,{}),(0,s.jsxs)(B.l.Item,{onSelect:P,children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.ChecklistIcon,{})}),"Manage shared conversations"]},"manage-link")]}):(0,s.jsxs)(B.l.Item,{onSelect:P,children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.ChecklistIcon,{})}),"Manage shared conversations"]},"manage-link")})})]})]}),r&&(0,s.jsx)(tJ,{closeDialog:()=>{o(!1),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})}}),l&&(0,s.jsx)(ne,{closeDialog:()=>{c(!1),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_MANAGE_SHARED_CONVERSATIONS_DIALOG_CLOSE",mode:"immersive"})}}),u&&(0,s.jsx)(t8,{threadId:a,closeDialog:()=>{p(!1),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_CLOSE",mode:"immersive"})}})]})};try{nt.displayName||(nt.displayName="ManageSharedConversationButton")}catch{}let nn={content:"PreviewModelCapabilityWarning-module__content--oyFl0",header:"PreviewModelCapabilityWarning-module__header--r2ydd",row:"PreviewModelCapabilityWarning-module__row--u6n_X",rowIcon:"PreviewModelCapabilityWarning-module__rowIcon--dTgPI"};function na(){let e=(0,m.A3)("model"),[t,n]=(0,f.useState)(!1),a=(0,f.useRef)(null);return e&&e.hasLimitedCapabilities?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.K,{className:"fgColor-accent",variant:"invisible","aria-label":"Model capabilities",icon:()=>(0,s.jsx)(L.InfoIcon,{className:"fgColor-accent"}),ref:a,onClick:()=>{n(!0),(0,_.BI)("dotcom_chat.activate",{target:"PREVIEW_MODEL_INFO_OPEN",mode:"immersive"})}}),t&&(0,s.jsx)(tz.l,{title:`Limited capabilities (${e.displayName})`,width:"large",onClose:()=>{n(!1),(0,_.BI)("dotcom_chat.activate",{target:"PREVIEW_MODEL_INFO_CLOSE",mode:"immersive"})},returnFocusRef:a,children:(0,s.jsxs)("div",{className:nn.content,children:[(0,s.jsx)("p",{children:"While this model is better at reasoning, it is generally slower for everyday tasks and has limited capabilities in retrieving external data. Here are a few of the common actions that are not supported:"}),(0,s.jsxs)("ul",{className:"border rounded-2",children:[(0,s.jsx)("h3",{className:nn.header,children:"Not supported"}),(0,s.jsxs)("li",{className:nn.row,children:[(0,s.jsx)(L.BookIcon,{className:nn.rowIcon})," Using knowledge bases"]}),(0,s.jsxs)("li",{className:nn.row,children:[(0,s.jsx)(L.IssueOpenedIcon,{className:nn.rowIcon})," Retrieving issues"]}),(0,s.jsxs)("li",{className:nn.row,children:[(0,s.jsx)(L.GitPullRequestIcon,{className:nn.rowIcon})," Retrieving pull requests"]}),(0,s.jsxs)("li",{className:nn.row,children:[(0,s.jsx)(L.CommentDiscussionIcon,{className:nn.rowIcon})," Retrieving discussions"]})]})]})})]}):null}try{na.displayName||(na.displayName="PreviewModelCapabilityWarning")}catch{}let ni={shareButton:"ShareConversationButton-module__shareButton--_CML9",hideOnMobile:"ShareConversationButton-module__hideOnMobile--AYVjz"},nr=({isShared:e=!1})=>{let{isWaitingOnCopilot:t,messages:n}=(0,m.Pk)(),[a,i]=(0,f.useState)(!1),r=(0,d.Q7)(n),o=r.length>0||t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ey.Q,{leadingVisual:e?L.UnlockIcon:L.LockIcon,disabled:o,onClick:()=>{o||(i(!0),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_OPEN",mode:"immersive"}))},"aria-label":r.length>0?"Disabled for Copilot extensions":t?"Copilot is responding\u2026":"Share conversation",className:`${ni.shareButton} ${ni.hideOnMobile}`,children:e?"Shared":"Share"}),a&&(0,s.jsx)(tJ,{closeDialog:()=>{i(!1),(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})}})]})};try{nr.displayName||(nr.displayName="ShareConversationButton")}catch{}var no=n(53904),ns=n(30631);let nl="DependabotIcon",nc="blue",nd={BeakerIcon:L.BeakerIcon,BookIcon:L.BookIcon,BroadcastIcon:L.BroadcastIcon,CloudIcon:L.CloudIcon,CodeIcon:L.CodeIcon,DatabaseIcon:L.DatabaseIcon,DependabotIcon:L.DependabotIcon,HubotIcon:L.HubotIcon,OrganizationIcon:L.OrganizationIcon,PlusIcon:L.PlusIcon,ProjectRoadmapIcon:L.ProjectRoadmapIcon,TelescopeIcon:L.TelescopeIcon,TerminalIcon:L.TerminalIcon},nu=Object.keys(nd),nm=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"],np=e=>nm.find(t=>t===e)??nc,nh={container:"SpacesAvatar-module__container--zJJUl",auburn:"SpacesAvatar-module__auburn--CIKFA",blue:"SpacesAvatar-module__blue--csQQ0",brown:"SpacesAvatar-module__brown--n04yP",coral:"SpacesAvatar-module__coral--_ML4p",cyan:"SpacesAvatar-module__cyan--o0MwN",gray:"SpacesAvatar-module__gray--vvb1W",green:"SpacesAvatar-module__green--Ro4IV",indigo:"SpacesAvatar-module__indigo--_0T4q",lemon:"SpacesAvatar-module__lemon--gsHE8",lime:"SpacesAvatar-module__lime--vRdDX",olive:"SpacesAvatar-module__olive--G1neu",orange:"SpacesAvatar-module__orange--FmpCu",pine:"SpacesAvatar-module__pine--jFhFP",pink:"SpacesAvatar-module__pink--vHHwu",plum:"SpacesAvatar-module__plum--M6SF6",purple:"SpacesAvatar-module__purple--_4Sak",red:"SpacesAvatar-module__red--IUpfe",teal:"SpacesAvatar-module__teal--q0AMo",yellow:"SpacesAvatar-module__yellow--DdvtA"},ng={auburn:nh.auburn,blue:nh.blue,brown:nh.brown,coral:nh.coral,cyan:nh.cyan,gray:nh.gray,green:nh.green,indigo:nh.indigo,lemon:nh.lemon,lime:nh.lime,olive:nh.olive,orange:nh.orange,pine:nh.pine,pink:nh.pink,plum:nh.plum,purple:nh.purple,red:nh.red,teal:nh.teal,yellow:nh.yellow};function nf({icon:e,color:t,size:n=16}){let{SpaceIcon:a,spaceColor:i}=(0,f.useMemo)(()=>({SpaceIcon:e&&e in nd!=!1?nd[e]:nd[nl],spaceColor:np(t)}),[e,t]);return(0,s.jsx)("div",{style:{"--custom-size":`var(--base-size-${2*n})`},className:(0,w.$)(nh.container,ng[i]),children:(0,s.jsx)(a,{size:n})})}try{nf.displayName||(nf.displayName="SpacesAvatar")}catch{}let nv={spacesIconContainer:"SpacesBreadcrumbs-module__spacesIconContainer--sEuSq",spacesText:"SpacesBreadcrumbs-module__spacesText--mM2A0"};function nx({selectedCopilotSpace:e,threadName:t}){let n=e?.name??"",a=e?.iconType??"",i=e?.iconColor??"",r=(0,t$.Z)();return(0,s.jsx)(s.Fragment,{children:(0,I.k1)()?(0,s.jsxs)(no.A,{className:nv.spacesText,children:[(0,s.jsx)(no.A.Item,{onClick:e=>{e.preventDefault(),r(d.VR)},href:d.VR,children:"Spaces"}),(0,s.jsx)(no.A.Item,{selected:!0,children:(0,s.jsxs)("div",{className:nv.spacesIconContainer,children:[(0,s.jsx)(nf,{icon:a,color:i,size:12}),"\xa0",(0,s.jsx)(ns.A,{inline:!0,title:n,children:n})]})})]}):void 0!==e?(0,s.jsxs)(no.A,{className:nv.spacesText,children:[(0,s.jsx)(no.A.Item,{onClick:e=>{e.preventDefault(),r(d.VR)},href:d.VR,children:"Spaces"}),(0,s.jsx)(no.A.Item,{href:(0,I.Cb)(e.id),onClick:t=>{t.preventDefault(),r((0,I.Cb)(e.id))},children:(0,s.jsx)(ns.A,{inline:!0,title:n,children:n})}),(0,s.jsx)(no.A.Item,{selected:!0,children:(0,s.jsxs)("div",{className:nv.spacesIconContainer,children:[(0,s.jsx)(nf,{icon:a,color:i,size:12}),"\xa0",(0,s.jsx)(ns.A,{inline:!0,title:t,children:t})]})})]}):null})}try{nx.displayName||(nx.displayName="SpacesBreadcrumbs")}catch{}let n_={dialog:"SystemPromptDialog-module__dialog--DZtq2",content:"SystemPromptDialog-module__content--OeMCM",description:"SystemPromptDialog-module__description--eb7_P",textareaContainer:"SystemPromptDialog-module__textareaContainer--MN8c4",textarea:"SystemPromptDialog-module__textarea--MK1JE"},ny=(0,f.forwardRef)(function(e,t){let n=(0,H.b)(),[a,i]=(0,f.useState)(!1),[r,o]=(0,f.useState)(void 0);return(0,f.useImperativeHandle)(t,()=>({openDialog:()=>i(!0)})),(0,f.useEffect)(()=>{(async()=>{o(await n.getSystemPrompt())})()},[n]),(0,s.jsx)(s.Fragment,{children:a&&(0,s.jsx)(tz.l,{onClose:()=>{i(!1),(0,_.BI)("dotcom_chat.activate",{target:"SYSTEM_PROMPT_DIALOG_CLOSE",mode:"immersive"})},title:"System prompt",renderBody:()=>(0,s.jsxs)("div",{className:n_.content,children:[(0,s.jsxs)("p",{className:n_.description,children:["The system prompt for"," ",(0,s.jsx)(U.A,{muted:!0,inline:!0,href:"https://github.com/copilot",children:"GitHub Copilot"})," ","is a set of instructions that guides the LLM to provide enhanced functionality and output quality based on user input."]}),(0,s.jsx)("div",{className:n_.textareaContainer,children:(0,s.jsx)("textarea",{className:n_.textarea,readOnly:!0,children:r})})]}),className:n_.dialog})})});try{ny.displayName||(ny.displayName="SystemPromptDialog")}catch{}function nC({showModelPicker:e=!0,showPreviewPaneButton:t=!0,conversationSpecificItems:n,isSidebarOpen:a}){let i=(0,H.b)(),r=(0,m.Pk)(),{currentTopic:o,repoCustomInstructionsEnabled:l,selectedThreadID:c,threads:p,messagesLoading:g,currentReferences:x}=r,y=(0,m.pn)(e=>(0,d.CB)(i.getSelectedThread(e))),C=(0,I.iI)()||i.getSelectedThread(r)?.customCopilotID,j=r.customCopilots?.find(e=>e.id===C);j?(0,tL.D)(`${y} \xb7 GitHub Copilot Spaces \xb7 ${j.name}`):(0,tL.D)(`${y} \xb7 GitHub Copilot`);let N=(0,f.useRef)(null),E=(0,f.useRef)(null),T=tU(),P=(0,f.useMemo)(()=>(0,tD.X)(),[]),k=(0,eT.G7)("copilot_staff_prompt_dialog")&&P,[A,D]=(0,f.useState)(!1),[M,U]=(0,f.useState)(!1),$=(0,f.useRef)(null),V=!!S.J.settings?.instructionPrompt,{isLicensedLimited:F}=(0,b.x)(),W=u.W.repoCustomInstructions||u.W.repoCustomInstructionsPreview,{previewPaneOpen:z,openPreviewPane:G}=(0,v.xx)(),q=(0,f.useRef)(null),[K,Q]=(0,f.useState)(null),X=o?.customInstructions||[];u.W.topicsAsReferences&&(X=(0,d.NJ)(x));let J=W&&X.length>0,[Y,Z,ee]=(0,tB.B)(!1),et=tl(),{canShareThread:en}=(0,h.X)(),ea="loaded"===g.state,ei=C&&eE.fV?.pathname!==d.VR,[er,eo]=(0,f.useState)(!1),es=en&&!et&&c&&ea;return(0,s.jsxs)("div",{className:t2.header,children:[j&&(0,s.jsx)("div",{className:a?t2.leftControls:t2.leftControlsCollapsed,children:(0,s.jsx)(nx,{selectedCopilotSpace:j,threadName:y})}),(0,s.jsx)("div",{className:t2.centerControls,children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tP.Y,{onNewThreadSelected:T,limited:F}),(0,s.jsx)(na,{})]})}),(0,s.jsxs)("div",{className:t2.rightControls,children:[es&&(u.W.copilotManageSharedConversations?(0,s.jsx)(nt,{isShared:!!p.get(c)?.sharedID}):(0,s.jsx)(nr,{isShared:!!p.get(c)?.sharedID})),(0,s.jsxs)(O.W,{children:[(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(R.K,{icon:L.KebabHorizontalIcon,"aria-label":"Menu",onClick:()=>(0,_.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"}),className:(0,w.$)(V&&t2.editedPromptIndicator),ref:q,loading:Y})}),(0,s.jsx)(O.W.Overlay,{width:"small",children:(0,s.jsxs)(B.l,{children:[n,c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B.l.Group,{children:[(0,s.jsx)(B.l.GroupHeading,{children:"Conversation"}),(0,s.jsx)(tY,{onOpenDialog:Q,isShared:!!p.get(c)?.sharedID,showShare:!0,hideShareOnDesktop:!0})]}),(0,s.jsx)(B.l.Divider,{})]}),(0,s.jsxs)(B.l.Group,{children:[(0,s.jsx)(B.l.GroupHeading,{children:"Prompt"}),J&&(0,s.jsxs)(B.l.Item,{onSelect:()=>{i.toggleRepoCustomInstructions(!l)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.RepoIcon,{})}),l?"Disable custom instructions":"Enable custom instructions"]}),(0,s.jsxs)(B.l.Item,{onSelect:()=>{U(!0),(0,_.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.NoteIcon,{})}),"Personal instructions"]}),(0,s.jsxs)(B.l.Item,{onSelect:()=>{E.current?.openDialog(),(0,_.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SYSTEM_PROMPT",mode:"immersive"})},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.CpuIcon,{})}),"System prompt"]}),k&&(0,s.jsxs)(B.l.Item,{onSelect:()=>D(!0),children:[(0,s.jsx)(B.l.LeadingVisual,{children:V?(0,s.jsx)("span",{className:(0,w.$)(t2.editedPromptIndicator,t2.leadingVisual),children:(0,s.jsx)(L.BeakerIcon,{})}):(0,s.jsx)(L.BeakerIcon,{})}),"Edit prompt",(0,s.jsx)(B.l.TrailingVisual,{children:(0,s.jsx)(tO.A,{variant:"attention",children:"Staff"})})]})]}),(0,s.jsx)(B.l.Divider,{}),(0,s.jsxs)(B.l.Group,{children:[u.W.copilotManageSharedConversations&&(0,s.jsxs)(B.l.Item,{className:t2.hideOnDesktop,onSelect:()=>{eo(!0)},children:["Manage shared conversations",(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.ListUnorderedIcon,{})})]}),(0,s.jsxs)(B.l.Item,{onSelect:()=>{N.current?.openDialog(),(0,_.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:["Give feedback",(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.CommentIcon,{})})]}),F&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(B.l.LinkItem,{href:"/github-copilot/signup/copilot_individual",onClick:()=>(0,_.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_UPGRADE_PRO",mode:"immersive"}),children:["Upgrade to Pro",(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.CopilotIcon,{})})]})}),(0,s.jsxs)(B.l.LinkItem,{href:"/settings/copilot",onClick:()=>(0,_.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"}),children:["Settings",(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.GearIcon,{})})]})]})]})})]}),t&&!z&&!ei&&(0,s.jsx)(R.K,{icon:L.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),G()}}),(0,s.jsx)(ny,{ref:E}),(0,s.jsx)(tT.l,{ref:N,mode:"immersive"}),c&&(0,s.jsx)(tZ,{visibleDialog:K,onClose:()=>{(0,tR.flushSync)(()=>Q(null)),q.current?.focus()},threadName:y,threadId:c,selectedThreadId:c,onStartLoading:Z,onFinishLoading:ee})]}),A&&(0,s.jsx)(tA.X,{promptDialogRef:$,onDismiss:()=>D(!1)}),M&&(0,s.jsx)(tk.Y,{onDismiss:()=>U(!1)}),er&&(0,s.jsx)(ne,{closeDialog:()=>{eo(!1)}})]})}try{nC.displayName||(nC.displayName="Header")}catch{}var nj=n(56056),nN=n(26871),nb=n(89401),nS=n(2120),nI=n(39363),nw=n(33492),nE=n(38568),nT=n(72659),nP=n(66349),nk=n(72160),nA=n(67264),nL=n(61982),nD=n(47920),nO=n(32132);let nR=({functionCall:e,manager:t,panelWidth:n,messageInterrupted:a})=>{let{functionMetadata:i,functionRenderer:r,parsedArgs:o}=(0,nO.BO)(e),l=(0,f.useMemo)(()=>a&&"started"===e.status?{...e,status:"error"}:e,[e,a]);return(0,s.jsx)(s.Fragment,{children:i&&r&&o&&r(l,i,t,n,o,!1)})};try{nR.displayName||(nR.displayName="FunctionCallBadge")}catch{}var nB=n(79887),nM=n(82005),nU=n(73786),n$=n(4181),nV=n(50260),nF=n(40650),nW=n(53914),nz=n(27297),nH=n(34407),nG=n(11499),nq=n(1088);let nK={imageAttachment:"ChatImageAttachment-module__imageAttachment--YlPWs"},nQ=({messageId:e,src:t,alt:n,name:a,mode:i})=>{let{openPreviewPane:r,openItem:o,updateItem:l}=(0,v.xx)(),c=`image:${e}`,d=(0,f.useCallback)(e=>{e.metaKey||e.ctrlKey||((0,_.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),o(c),r(),e.preventDefault())},[c,r,o]);return(0,f.useEffect)(()=>{l({altText:n,id:c,messageId:e,name:a,type:"image",url:t})},[c,n,e,a,t,l]),(0,s.jsx)("div",{className:nK.imageAttachment,children:(0,s.jsx)(nq.o,{src:t,alt:n,onClick:d,mode:i,useOverlay:!0})})},nX=(0,f.memo)(nQ);try{nQ.displayName||(nQ.displayName="ChatImageAttachmentUnmemoized")}catch{}try{nX.displayName||(nX.displayName="ChatImageAttachment")}catch{}let nJ={chatMessage:"ChatMessage-module__chatMessage--rtt38",user:"ChatMessage-module__user--UoWHh",editing:"ChatMessage-module__editing--BMp49",content:"ChatMessage-module__content--MYneF",references:"ChatMessage-module__references--Kunt2",messageArea:"ChatMessage-module__messageArea--CoOmf",userMessage:"ChatMessage-module__userMessage--xvIFp",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--DJyyk",actions:"ChatMessage-module__actions--Jllb6",ai:"ChatMessage-module__ai--WrCO3",latest:"ChatMessage-module__latest--IZwZP",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--MCwTL",avatar:"ChatMessage-module__avatar--KYI8V",sharedThreadActions:"ChatMessage-module__sharedThreadActions--Z9ffu ChatMessage-module__actions--Jllb6",sharedMessageCheckpoint:"ChatMessage-module__sharedMessageCheckpoint--eublt",icon:"ChatMessage-module__icon--UUMMx",skillExecutionText:"ChatMessage-module__skillExecutionText--pIBPI",errorFallback:"ChatMessage-module__errorFallback--d0bNW",blinkingCursor:"ChatMessage-module__blinkingCursor--M3kDA"};function nY({className:e,messageID:t,messageIndex:n,messageTimestamp:a,references:i,size:r}){let o=tc({messageID:t,messageIndex:n,messageTimestamp:a}),{updateItem:l,versionedItems:c}=(0,v.xx)();return(0,f.useEffect)(()=>{for(let e of i)"thread-scoped-file"===e.type&&l((0,el.fQ)(e,n,t,a))},[t,n,a,i,l]),(0,s.jsx)(nP.t,{references:i,onClickReference:o,size:r,className:e,align:"right",getReferenceVersion:e=>(0,el.wt)(e,n,c)})}try{nY.displayName||(nY.displayName="ChatMessageReferences")}catch{}let nZ={container:"ChatPagingComponent-module__container--nH9hp",disabledButton:"ChatPagingComponent-module__disabledButton--hCGPC",pageIndicator:"ChatPagingComponent-module__pageIndicator--HoVKG"};function n0({currentPage:e,totalPages:t,onPrev:n,onNext:a,isUserMessage:i,disabled:r=!1}){if(e<1)throw Error("currentPage must be greater than or equal to 1");if(t<1)throw Error("totalPages must be greater than or equal to 1");if(e>t)throw Error("currentPage must be less than or equal to totalPages");let o=1===e||r,l=e===t||r,c=o?nZ.disabledButton:"",d=l?nZ.disabledButton:"";return(0,s.jsxs)("div",{className:nZ.container,"data-testid":"chat-paging-component",children:[(0,s.jsx)(R.K,{variant:"invisible","aria-label":"Previous response",onClick:()=>{o||((0,_.BI)("dotcom_chat.activate",{target:i?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE",mode:"immersive"}),n(e-1))},icon:L.ChevronLeftIcon,className:c}),(0,s.jsxs)("span",{className:nZ.pageIndicator,children:[e,"/",t]}),(0,s.jsx)(R.K,{variant:"invisible","aria-label":"Next response",onClick:()=>{l||((0,_.BI)("dotcom_chat.activate",{target:i?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE",mode:"immersive"}),a(e+1))},icon:L.ChevronRightIcon,className:d})]})}try{n0.displayName||(n0.displayName="ChatPagingComponent")}catch{}let n1={container:"CreateIssueConfirmation-module__container--ii5bh",icon:"CreateIssueConfirmation-module__icon--T6JFn",previewText:"CreateIssueConfirmation-module__previewText--P9WB4"};function n2({confirmation:e,message:t,messageIndex:n,isLatestMessage:a}){let i=(0,m.Pk)(),{updateItem:r,openItem:o,openPreviewPane:l,versionedItems:c}=(0,v.xx)(),d=JSON.stringify(Object.values(e.confirmation).sort()),u=i.allClientConfirmations?.includes(d)&&!a,{tag:p,title:h,description:g,assignees:x,owner:y,repository:C}=(0,f.useMemo)(()=>JSON.parse(e.confirmation.arguments),[e.confirmation]),j=`new-issue:${t.threadID}-${p}`,N=`${j}#${n}`,b=c.get(j)??[],S=b.indexOf(N),I=b.length>1&&-1!==S?S+1:null,w=(0,f.useCallback)(()=>{o(N),l(),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_CREATE_ISSUE_OPENED",mode:"immersive"})},[N,o,l]);return(0,f.useEffect)(()=>{r({messageId:t.id,tag:p,name:h||"",body:g,assignees:x,owner:y,repo:C,id:N,type:"new-issue"});let e=b.length<=1||I===b.length;!u&&a&&e&&w()},[r,p,h,g,x,y,C,I,b.length,u,N,a,t.id,w]),(0,s.jsxs)("div",{className:n1.container,role:"button",onClick:w,onKeyDown:e=>{("Enter"===e.code||"Space"===e.code)&&w()},tabIndex:0,...(0,eo.G)("create-issue-confirmation"),children:[(0,s.jsx)(L.PencilIcon,{className:n1.icon}),(0,s.jsx)("span",{className:n1.previewText,children:h}),null!=I&&(0,s.jsx)(ed.g,{version:I})]})}try{n2.displayName||(n2.displayName="CreateIssueConfirmation")}catch{}var n5=n(64542);let n3=(0,f.createContext)(null),n4=()=>{let e=(0,f.useContext)(n3);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{n3.displayName||(n3.displayName="ContentPreviewBlockContext")}catch{}var n6=n(19919),n7=n(47970),n8=n(66211),n9=n(53110);function ae({className:e}){return(0,s.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:e,children:[(0,s.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,s.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,s.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})})]})}try{ae.displayName||(ae.displayName="ExpandIcon")}catch{}let at={container:"FileBlock-module__container--zWu5c",header:"FileBlock-module__header--X7DLN",language:"FileBlock-module__language--fbEB2",name:"FileBlock-module__name--rkkGx",previewCode:"FileBlock-module__previewCode--EieE9",isClipped:"FileBlock-module__isClipped--Z6AMg",expandIconContainer:"FileBlock-module__expandIconContainer--JwHHA",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--BRMgP"};function an({language:e,name:t,code:n,line:a,children:i,isClipped:r,isStreaming:o,index:l,startOffset:c,endOffset:d}){let{message:u}=(0,nT.V)(),{updateItem:m,openItem:p,openPreviewPane:h,versionedItems:g,openItems:x}=(0,v.xx)(),{messageIndex:y,messageId:C,messageTimestamp:j,autoOpenPreviewPane:N,markdown:b,hasAutoOpenedPreviewPaneRef:S}=n4(),{name:I}=(0,eC.v)(e),E=`file:${t}`,T=`${E}#${y}.${a}`,P=!!n,k=g.get(E)??[],A=k.indexOf(T),D=k.length>1&&-1!==A?A+1:null,O=(0,f.useCallback)((e,t=!0)=>{(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive"}),p(T,t||x.length<1||0===l),e&&h()},[p,T,x.length,l,h]);(0,f.useEffect)(()=>{let a=n?.trimEnd();P&&C!==G.Wp&&-1!==b.indexOf(a)&&m({messageId:C,id:T,language:e,name:t,value:n,type:"file",timestamp:new Date(j),isStreaming:o,isUserEdited:!1})},[n,e,C,t,m,T,P,j,o,b]),(0,f.useEffect)(()=>{o&&P&&C!==G.Wp&&(O(N&&!S.current,!1),S.current=!0)},[o,P,O,N,C,S]);let[B,M]=(0,f.useState)(!1),{publicCodeReferences:U,codeVulnerabilities:$}=(0,n8.R)(u.copilotAnnotations,c,d);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"position-relative",children:[(0,s.jsxs)("button",{className:at.container,onClick:()=>O(!0),"aria-label":`View file: ${t}`,"data-testid":`chat-message-view-file-${t}`,children:[(0,s.jsxs)("div",{className:at.header,children:[(0,s.jsxs)("div",{className:at.language,children:[o?(0,s.jsx)(eV.A,{size:"small",className:n5.s}):eC.Y.has(I)?(0,s.jsx)(L.MarkdownIcon,{className:n5.s}):(0,s.jsx)(L.CodeIcon,{className:n5.s}),(0,s.jsx)("span",{className:at.name,children:t}),null!==D&&(0,s.jsx)(ed.g,{version:D})]}),(0,s.jsx)("div",{className:at.expandIconContainer,children:(0,s.jsx)(ae,{})})]}),(0,s.jsx)("pre",{className:(0,w.$)(at.previewCode,r&&at.isClipped),"aria-hidden":!0,children:(0,s.jsx)("code",{children:i})})]}),(U.length>0||$.length>0)&&(0,s.jsx)("div",{className:at.insightsButtonContainer,children:(0,s.jsx)(R.K,{variant:"invisible",size:"small",icon:L.ShieldIcon,"aria-label":"Code insights",onClick:()=>M(!0)})})]}),B&&(0,s.jsx)(n9.t,{publicCodeReferences:U,codeVulnerabilities:$,onClose:()=>M(!1)})]})}try{an.displayName||(an.displayName="FileBlock")}catch{}let aa="data-fileblock-props",ai=(0,n6.F)(aa),ar=RegExp("^name=(?<name>[^\\s]+)"),ao=RegExp("^name=(?<name>[^\\s]+)\\n?"),as={code:(e,t)=>{let n=(0,n6.k)(e,aa);return n?(0,s.jsx)(an,{...n,children:e.children}):t}};var al=n(72534);function ac({owner:e,repo:t,issueNumber:n,href:a,children:i}){let{updateItem:r,openItem:o,openPreviewPane:l}=(0,v.xx)(),{messageId:c}=n4(),d=Number(n),u=function(e,t,n,a,i){let r=`Issue #${i}`;if(!n||!a||!i||isNaN(i))return r;let o=e.find(e=>e.id===t),s=o?.references,l=s?.find(e=>"issue"===e.type&&e.number===i&&e.repository.name===a&&e.repository.owner===n),c=l?.title;if(c)return c;let d=s?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${a}`&&e.data.number===i),u=d?.data;return u?.title??r}((0,m.A3)("messages"),c,e,t,d),p=`issue:${e}/${t}/${d}`;return(0,f.useEffect)(()=>{e&&t&&r({messageId:c,name:u,number:d,owner:e,repo:t,id:p,type:"issue"})},[p,c,d,e,t,u,r]),(0,s.jsx)(U.A,{href:a,onClick:e=>{e.metaKey||e.ctrlKey||(o(p),l(),(0,_.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},target:"_blank",rel:"noreferrer",children:i})}try{ac.displayName||(ac.displayName="IssueLinkBlock")}catch{}let ad="data-issuelink-props",au=(0,n6.F)(ad),am=RegExp("\\/(?<owner>[^/]+)\\/(?<repo>[^/]+)\\/issues\\/(?<number>\\d+)"),ap={span:(e,t)=>{let n=(0,n6.k)(e,ad);return n?(0,s.jsx)(ac,{...n}):t}},ah=(RegExp("^(?<lang>[^\\s]+)\\s+type=(?<type>[^\\s]+)"),RegExp("^(?:`{3,}|~{3,})+(?<lang>[^\\s]+)\\ntype=(?<type>[^\\s]+)"),RegExp("^type=(?<type>[^\\s]+)\\n?")),ag=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;var af=n(62456),av=n(89169),ax=n(46008),a_=n(57210);let ay={list:"IssueListBlock-module__list--GM7vt",streaming:"IssueListBlock-module__streaming--HSaKx",item:"IssueListBlock-module__item--Z3Nv7",link:"IssueListBlock-module__link--xHV6N",content:"IssueListBlock-module__content--kXyl1",metadata:"IssueListBlock-module__metadata--fIv1v",header:"IssueListBlock-module__header--tb2Am",title:"IssueListBlock-module__title--KvqP1",unknownTitle:"IssueListBlock-module__unknownTitle--tj7iM",number:"IssueListBlock-module__number--FIbRR",labels:"IssueListBlock-module__labels--ergn3",labelIcon:"IssueListBlock-module__labelIcon--AdciQ",description:"IssueListBlock-module__description--FVdIE",icon:"IssueListBlock-module__icon--KVpem",open:"IssueListBlock-module__open--yTQ0j",draft:"IssueListBlock-module__draft--FrF8w",done:"IssueListBlock-module__done--SRM4P",closed:"IssueListBlock-module__closed--jfPZH",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--SawNd"},aC={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function aj({item:e,isStreaming:t}){let n,a;let i=e.author;e.merged_at?(n=e.merged_at,a="Merged"):e.closed_at?(n=e.closed_at,a="Closed"):e.created_at&&(n=e.created_at,a="Opened");let r=n?new Date(n):null;return r&&isNaN(r.getTime())&&(r=null),i&&r||!t?(0,s.jsxs)("span",{className:ay.description,children:[i," ",i?a?.toLowerCase():a," ",r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(av.A,{date:r,format:"micro"})," ago"]})]}):null}let aN=e=>{try{let t=(0,a_.load)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(aC.fromUnknown);return null}catch{return null}};function ab({data:e,type:t,isStreaming:n}){let[a,i]=(0,f.useState)(()=>aN(e)??[]),{updateItem:r,openItem:o,openPreviewPane:l}=(0,v.xx)(),{messageId:c}=n4();return(0,f.useEffect)(()=>i(t=>aN(e)??t),[e]),(0,f.useEffect)(()=>{"issue"===t?(0,_.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,_.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},[t]),(0,s.jsx)("ul",{className:(0,w.$)(ay.list,n&&ay.streaming),children:a.map((e,i)=>{let d={...e,type:t},u=n&&i===a.length-1,{icon:m,colorClass:p}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,s.jsx)(L.IssueDraftIcon,{"aria-label":"Draft issue"}),t=ay.draft):"closed"===e.state&&e.draft&&(n=(0,s.jsx)(L.SkipIcon,{"aria-label":"Closed draft issue"}),t=ay.draft):(n=(0,s.jsx)(L.IssueClosedIcon,{"aria-label":"Closed issue"}),t=ay.done):(n=(0,s.jsx)(L.IssueOpenedIcon,{"aria-label":"Open issue"}),t=ay.open);else if("pr"===e.type){let a="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!a&&e.draft?(n=(0,s.jsx)(L.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=ay.draft):"open"!==e.state||a||e.draft?"closed"!==e.state||a?"closed"===e.state&&a&&(n=(0,s.jsx)(L.GitMergeIcon,{"aria-label":"Merged pull request"}),t=ay.done):(n=(0,s.jsx)(L.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=ay.closed):(n=(0,s.jsx)(L.GitPullRequestIcon,{"aria-label":"Pull request"}),t=ay.open)}return{icon:n,colorClass:t}}(d);return(0,s.jsx)("li",{className:ay.item,children:(0,s.jsxs)("div",{className:ay.content,children:[(0,s.jsx)("div",{className:(0,w.$)(p,ay.icon),children:m}),(0,s.jsxs)("div",{className:ay.header,children:[u&&!d.title?null:(0,s.jsx)("a",{href:d.url??"#",className:ay.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),d.url)){if("issue"===d.type){(0,_.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:n}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(d.url);if(e&&t&&n){let a=`issue:${e}/${t}/${n}`;r({messageId:c,name:d.title??`Issue #${n}`,number:n,owner:e,repo:t,id:a,type:"issue"}),o(a),l()}}else(0,_.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(d.url,"_self")}},target:"_blank",rel:"noreferrer",children:d.title||void 0===d.number?(0,s.jsxs)(s.Fragment,{children:[d.title?(0,s.jsx)("span",{className:ay.title,children:d.title}):(0,s.jsx)("span",{className:(0,w.$)(ay.title,ay.unknownTitle),children:"Unknown issue"}),void 0!==d.number&&(0,s.jsxs)("span",{className:ay.number,children:["#",d.number]})]}):(0,s.jsxs)("span",{className:ay.title,children:["#",d.number]})}),(0,s.jsxs)("div",{className:ay.labels,children:[d.labels?.length?d.labels.map(e=>(0,s.jsx)(tO.A,{size:"small",variant:"secondary",children:e},e)):null,0!==d.comments&&void 0!==d.comments&&(0,s.jsxs)(tO.A,{size:"small",variant:"secondary",children:[(0,s.jsx)(L.CommentIcon,{className:ay.labelIcon,size:12}),d.comments]})]})]}),(0,s.jsx)(aj,{item:d,isStreaming:u}),(0,s.jsx)("div",{className:ay.metadata,children:void 0===d.assignees_avatar_urls?null:0===d.assignees_avatar_urls.length?(0,s.jsx)("div",{className:ay.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,s.jsx)(L.PersonIcon,{size:12})}):(0,s.jsx)("div",{role:"img","aria-label":`${d.assignees_avatar_urls.length} ${1===d.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,s.jsx)(ax.A,{disableExpand:!0,children:d.assignees_avatar_urls.map(e=>(0,s.jsx)(af.r,{src:e,alt:"Assignee avatar"},e))})})})]})},i)})})}try{aj.displayName||(aj.displayName="Description")}catch{}try{ab.displayName||(ab.displayName="ListBlock")}catch{}let aS="data-issues-list-block",aI=(0,n6.F)(aS),aw={div:(e,t)=>{let n=(0,n6.k)(e,aS);return n?(0,s.jsx)(ab,{...n}):t}},aE=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,...r})=>{let o=(0,f.useRef)(!1),l=(0,f.useMemo)(()=>{let e=[...r.extensions??[],function(e){return{transformMarkdown:t=>(0,n7.YR)(t,"code",t=>{let n=t.lang??"",{name:a,code:i}=function(e,t){let n=e&&ar.exec(e);if(n)return{name:n.groups?.name,code:t};let a=ao.exec(t);return a?{name:a.groups?.name,code:t.replace(ao,"")}:{code:t}}(t.meta??void 0,t.value);if(!a)return;e.includes(a)||e.push(a);let r=i.split("\n",6),o=6===r.length,s=o?r.join("\n"):`${r.join("\n")}
`,l=t.position?.start.line??0;t.value=s,t.data={...t.data,hName:"code",hProperties:{[ai]:JSON.stringify({language:n,name:a,code:i,line:l,isStreaming:t.isStreaming??!1,isClipped:o,index:e.indexOf(a),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,n7.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&ai in a.properties&&n.children.splice(t,1,a)}),reactComponents:as}}([])];return u.W.immersiveIssuePreview&&(e=[...e,{transformMarkdown:e=>(0,n7.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=am.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:a="",number:i=""}=t.groups;e.data={hName:"span",hProperties:{[au]:JSON.stringify({owner:n,repo:a,issueNumber:i,href:e.url,children:(0,al.d)(e)})}}}),reactComponents:ap},{transformMarkdown:e=>(0,n7.YR)(e,"code",e=>{if("list"!==e.lang)return;let t=ag(ah.exec(e.meta??"")?.groups?.type??"");("issue"===t||"pr"===t)&&(e.data={hName:"div",hProperties:{[aI]:JSON.stringify({data:e.value,type:t,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,n7.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&aI in a.properties&&n.children.splice(t,1,a)}),reactComponents:aw}]),e},[r.extensions]);return(0,s.jsx)(n3.Provider,{value:(0,f.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:a,markdown:i,hasAutoOpenedPreviewPaneRef:o}),[e,t,n,a,i,o]),children:(0,s.jsx)(n5.T,{...r,markdown:i,extensions:l,chatMode:"immersive"})})};try{aE.displayName||(aE.displayName="MarkdownViewer")}catch{}let aT={container:"UserMessageEdit-module__container--rqkMG",input:"UserMessageEdit-module__input--LbiZ1",inputContainer:"UserMessageEdit-module__inputContainer--tewB2",actions:"UserMessageEdit-module__actions--_YMp2"},aP=({messageContent:e,onSubmit:t,onCancel:n,disableSubmit:a=!1})=>{let[i,r]=(0,f.useState)(e),o=(0,f.useRef)(null);return(0,f.useEffect)(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)},[i]),(0,s.jsxs)(nG.tL,{commands:{"copilot-chat:send-message":a?void 0:()=>{(0,_.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),t(i)},"github:cancel":()=>{n(),r(e),(0,_.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})}},className:aT.container,...(0,eo.G)("user-message-edit-box"),children:[(0,s.jsx)("div",{className:aT.inputContainer,children:(0,s.jsx)("textarea",{ref:o,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,value:i,onChange:e=>r(e.target.value),className:aT.input,autoFocus:!0,onInput:()=>{o.current&&(o.current.style.height="auto",o.current.style.height=`${o.current.scrollHeight}px`)},onFocus:e=>e.target.setSelectionRange(0,e.target.value.length)})}),(0,s.jsxs)("div",{className:aT.actions,children:[(0,s.jsx)(nG.cQ,{commandId:"github:cancel",children:"Cancel"}),(0,s.jsx)(nG.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...(0,eo.G)("user-message-edit-submit"),disabled:a,children:"Send"})]})]})};try{aP.displayName||(aP.displayName="UserMessageEdit")}catch{}let ak=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isFirstReply:a,isLoading:i,isStreaming:r,panelWidth:o,messageIndex:l,autoOpenPreviewPane:c})=>{let{message:p}=(0,nT.V)(),h=(0,H.b)(),g=(0,m.Pk)(),{items:x,versionedItems:y,openItem:C,removeItems:j,updateItem:N,openItems:b,openItemsBeforeSubthreadChange:S,setOpenItemsBeforeSubthreadChange:I,messagesBeforeSubthreadChange:E,setMessagesBeforeSubthreadChange:P,enableLoadingState:k,disableLoadingState:A,openPreviewPane:D,closePreviewPane:O,previewPaneOpen:B}=(0,v.xx)();(0,f.useEffect)(()=>{let e=g.currentReferences.find(e=>"figma"===e.type);if(u.W.immersiveFigmaIntegration&&e){let t={altText:e.title,type:"image",url:e.fullImageUrl,id:`image:${e.fullImageUrl}`,messageId:p.id,name:e.title};x.has(`image:${e.fullImageUrl}`)||N(t)}},[x,p.id,p.references,B,g.currentReferences,N]),(0,f.useEffect)(()=>{u.W.immersiveFigmaIntegration&&(x.size>0?D():O())},[O,x,D]);let M=(0,f.useCallback)(()=>{let e=[],t=p;for(;null!=t;)e.push(t.id),t=void 0!==t.selectedChildIndex?g.messages[t.selectedChildIndex]:void 0;let n=new Map;for(let[e,t]of x){let a=n.get(t.messageId)||[];a.push(e),n.set(t.messageId,a)}let a=[];for(let t of e){let e=n.get(t);if(e)for(let t of e)a.push(t)}for(let[e,t]of x)t.messageId===G.Wp&&a.push(e);I([...b]),P(g.messages.map(e=>e.id)),a.some(e=>b.includes(e))&&k(),j(a)},[x,k,p,b,j,P,I,g.messages]),{handleConfirmationAction:U,handleRetryErrorMessage:$,handleRetryCopilotResponse:V,handleEditUserMessage:F,hasClientConfirmations:W,isAgentError:z,isAI:q,isCopilot:K,isError:Q,isInterrupted:X,isLoading:J,isUser:Y,myRef:Z,onFeedbackSubmitted:ee,rendererConfig:et,renderFeedback:en,shouldShowMessageActions:ea,skillExecutionToUseForRespondingText:ei,showRetryButton:er}=(0,nF.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLoading:i,isStreaming:r,removeOutdatedContentPreviewItems:M}),es=tl(),ec=g.editingMessage===p.id,ed=r&&!Q&&!p.confirmations&&!ea&&n&&(!e||q),eu=(0,T.CX)(g.messages,p),em=(eu?.childMessageIndexes?.findIndex(e=>e===l)||0)+1||1,ep=eu?.childMessageIndexes?.length||1,eh=ep>=nW.L9,eg=h.maxMessagesReached(),ef=ep>1,ex=p.mediaContent?.find(e=>e.mediaType.startsWith("image/")),e_=u.W.attachImagesImmersive&&void 0!==ex||!1,ey=u.W.copilotUIRefs,eC=ea&&es&&(K||ef);(0,f.useEffect)(()=>{if(void 0===p.selectedChildIndex){if(E.includes(p.id))for(let e of S){let t=y.get((0,el.oy)(e));if(t){let e=t.at(-1);e&&C(e,!1)}}A()}},[y,A,p.id,p.selectedChildIndex,b,C,E,S]);let ej=(0,f.useCallback)(()=>{let e=em-1;h.setSelectedMessage(g.messages[eu.childMessageIndexes[e-1]]),M()},[em,h,eu,M,g.messages]),eN=(0,f.useCallback)(()=>{let e=em-1;h.setSelectedMessage(g.messages[eu.childMessageIndexes[e+1]]),M()},[em,h,eu,M,g.messages]),eb=tU(),{model:eS,availableModels:eI}=(0,m.bP)("model","availableModels"),ew=eS??nz.UB;if(u.W.retryModelPicker){let e=eI??[nz.UB];p.model&&(ew=e.find(e=>e.id===p.model)||ew)}let eE=Y&&g.messages.findLast(e=>"user"===e.role)?.id===p.id,eT=()=>h.startEditingMessage(p.id),eP=eh||eg,ek=K&&J&&n&&!p.content,eA=(0,f.useCallback)(e=>{h.setWrapCodeLines(e)},[h]);return(0,s.jsxs)("div",{className:(0,w.$)("message-container",nJ.chatMessage,Y&&nJ.user,q&&nJ.ai,ec?nJ.editing:"",n&&nJ.latest),ref:Z,...(0,eo.G)(`message-${Q?"error":r?"streaming":p.id}`),children:[q?(0,s.jsx)(nA.W,{isLoading:J&&n,isLoadingSkills:(p.skillExecutions??[]).length>0&&J&&""===p.content&&n,isError:Q&&p.error?.type!=="agentUnauthorized",className:nJ.avatar,mode:g.mode,isFirstMessage:a,message:p.content||"",createdAt:p.createdAt}):null,Y&&e_&&(0,s.jsx)(nX,{name:ex?.name||"Uploaded image",messageId:p.id,src:ex?.url||"",alt:`Uploaded image${ex?.name?`: ${ex.name}`:""}`,mode:g.mode}),Y&&p.references&&p.references.length>0&&(0,s.jsx)(nY,{className:nJ.references,messageID:p.id,messageTimestamp:p.createdAt,messageIndex:l,references:p.references,size:"medium"}),!ec&&(0,s.jsx)("div",{className:nJ.content,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:(0,w.$)("js-snippet-clipboard-copy-unpositioned",nJ.messageArea),children:[Y?(0,s.jsx)(n$.R,{accessibleHeader:aO("You",p.content??""),className:nJ.userMessage,children:p.content??""}):(0,s.jsxs)(s.Fragment,{children:[!u.W.newImmersiveReferencesUI&&K&&p.skillExecutions?.map((e,t)=>s.jsx(nR,{functionCall:e,manager:h,panelWidth:o,messageInterrupted:p.interrupted},t)),ek&&(u.W.newImmersiveReferencesUI?(0,s.jsx)(nV.b,{className:(0,w.$)(nJ.skillExecutionText,"mb-2"),children:`${(0,nO.WA)(ei)}...`}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:nJ.blinkingCursor,children:"\u258B"}),(0,s.jsx)("span",{className:"sr-only",children:"Waiting for reply\u2026"})]})),u.W.newImmersiveReferencesUI&&p.references&&p.references.length>0&&p.content&&(0,s.jsx)(nP.s,{className:"mb-2",references:p.references,isImmersive:!0}),K&&i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nH.O,{variant:"rounded",height:"12px",width:"random"}),(0,s.jsx)(nH.O,{variant:"rounded",height:"12px",width:"random"}),(0,s.jsx)(nH.O,{variant:"rounded",height:"12px",width:"random"})]}):!W&&p.content&&(0,s.jsx)(aA,{children:(0,s.jsx)(aE,{autoOpenPreviewPane:c,markdown:p.content,messageId:p.id,messageIndex:l,messageTimestamp:p.createdAt,accessibleHeader:aO("Copilot",p.content??""),copilotAnnotations:p.copilotAnnotations,wrapCodeLines:g.wrapCodeLines,onWrapCodeLinesChange:eA,...et})}),Q?(0,s.jsx)(nL.K,{manager:h}):null,z&&p.agentErrors&&!ey&&(0,s.jsx)(nL.h,{errors:p.agentErrors}),X?(0,s.jsx)(nB.h,{messageHasContent:!!p.content||!!p.skillExecutions?.length}):null,q&&(0,d.Ye)(p.confirmations).map((e,t)=>{switch(e.confirmation.name){case"indexrepo":return null;case"create-issue":return(0,s.jsx)(n2,{confirmation:e,message:p,messageIndex:l,isLatestMessage:n},t);default:return(0,s.jsx)(nk.m,{confirmation:e,handleConfirmation:U,isLatestMessage:n},t)}})]}),ef&&!n&&(0,s.jsxs)("div",{className:nJ.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[em,"/",ep]})]}),ed&&(0,s.jsx)("div",{className:nJ.actionsPlaceholder}),!ea&&er&&(0,s.jsx)(nM.$,{handleRetryMessage:$,disabled:eP}),ea&&!es&&(0,s.jsxs)(nU.M,{"aria-label":"Message tools",className:nJ.actions,"data-testid":"nonshared-toolbar",children:[Y&&(eE?(0,s.jsx)(nG.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:eT,icon:L.PencilIcon,disabled:eP,...(0,eo.G)("edit-message-button")}):(0,s.jsx)(R.K,{variant:"invisible","aria-label":"Edit message",onClick:eT,icon:L.PencilIcon,disabled:eP,...(0,eo.G)("edit-message-button")})),K&&(0,s.jsxs)(s.Fragment,{children:[en&&(0,s.jsx)(nD.G,{iconSize:"medium",returnFocusRef:Z,onFeedbackSubmitted:ee}),!!p.content&&!r&&(0,s.jsx)(ev.T,{textToCopy:p.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,_.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),er&&Q?(0,s.jsx)(nM.$,{handleRetryMessage:$,disabled:eP}):q&&!Q&&!p.clientSide&&(0,s.jsx)(nM.$,{handleRetryMessage:V,disabled:eP,showModelPicker:u.W.retryModelPicker&&!!eI&&eI.length>1,model:ew,navigateToNewThread:eb}),ef&&(0,s.jsx)(n0,{currentPage:em,totalPages:ep,onPrev:ej,onNext:eN,isUserMessage:Y,disabled:g.isWaitingOnCopilot})]}),eC&&(0,s.jsxs)(nU.M,{"aria-label":"Message tools",className:nJ.sharedThreadActions,"data-testid":"shared-toolbar",children:[K&&(0,s.jsx)(s.Fragment,{children:!!p.content&&!r&&(0,s.jsx)(ev.T,{textToCopy:p.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,_.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),ef&&(0,s.jsx)(n0,{currentPage:em,totalPages:ep,onPrev:ej,onNext:eN,isUserMessage:Y,disabled:g.isWaitingOnCopilot})]})]})}),ec&&(0,s.jsx)(aP,{messageContent:p.content||"",onSubmit:F,onCancel:()=>h.cancelEditingMessage(),disableSubmit:g.isWaitingOnCopilot})]})},aA=({children:e})=>(0,s.jsx)(P.t,{fallback:(0,s.jsx)(C.l,{className:nJ.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),children:e}),aL=({message:e,...t})=>{let n=tl();return(0,s.jsxs)(nT.$,{message:e,children:[(0,s.jsx)(ak,{...t,isViewingSharedThread:n}),t.isSharedMessage&&!n&&(0,s.jsxs)("div",{className:nJ.sharedMessageCheckpoint,children:[(0,s.jsx)(L.LinkIcon,{className:nJ.icon})," Messages up to this point are included in shared link"]}),t.isLatestMessage&&u.W.copilotDuplicateThread&&n&&(0,s.jsxs)("div",{className:nJ.sharedMessageCheckpoint,children:[(0,s.jsx)(L.RepoForkedIcon,{className:nJ.icon})," Messages beyond this point will start a new private conversation."]})]})},aD=(0,f.memo)(function(e){return(0,s.jsx)(aA,{children:(0,s.jsx)(aL,{...e})})});function aO(e,t){let n=t.split(" ");return`${e} said: ${n.slice(0,n.length<7?n.length:7).join(" ")}`}try{ak.displayName||(ak.displayName="InnerChatMessage")}catch{}try{aA.displayName||(aA.displayName="MessageErrorBoundary")}catch{}try{aL.displayName||(aL.displayName="ChatMessageUnmemoized")}catch{}try{aD.displayName||(aD.displayName="ChatMessage")}catch{}let aR={ConversationLoader:"ConversationLoader-module__ConversationLoader--iaHbr",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--PYCmE",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--rnmbz",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--jPmNg"};function aB(){return(0,s.jsxs)("div",{className:aR.ConversationLoader,children:[(0,s.jsx)("div",{className:aR.ConversationLoader__userGroup,children:(0,s.jsx)(nH.O,{variant:"rounded",height:"20px",width:"random"})}),(0,s.jsxs)("div",{className:aR.ConversationLoader__assistantGroup,children:[(0,s.jsx)(nH.O,{className:aR.ConversationLoader__assistantAvatar,variant:"elliptical",sx:{position:"absolute",height:24}}),Array.from({length:Math.floor(4*Math.random())+2}).map((e,t)=>(0,s.jsx)(nH.O,{variant:"rounded",height:"20px",width:"random"},t))]})]})}try{aB.displayName||(aB.displayName="ConversationLoader")}catch{}var aM=n(39046);let aU=(0,f.createContext)(void 0);function a$({children:e,model:t,state:n,manager:a,autocomplete:i}){let[r,o]=(0,f.useState)(!1),l=(0,f.useCallback)((e,r)=>{if(!e)return;let o=Array.from(e).filter(e=>aM.s.isTypeAllowed(e.type,t));if(o.length>0){let e=new aM.s(n,a,i);for(let t of o)e.addImageAttachment(t,r)}},[t,n,a,i]);(0,f.useEffect)(()=>{if(t.capabilities.supports.vision){let e=e=>{e.preventDefault(),o(!1),l(e.dataTransfer?.files||null,"drag")},t=e=>{e.preventDefault()},n=()=>o(!0),a=()=>o(!1);return window.addEventListener("dragover",t),window.addEventListener("drop",e),window.addEventListener("dragenter",n),window.addEventListener("dragleave",a),()=>{window.removeEventListener("dragover",t),window.removeEventListener("drop",e),window.removeEventListener("dragenter",n),window.removeEventListener("dragleave",a)}}},[l,t.capabilities.supports.vision]);let c=(0,f.useMemo)(()=>({isDragging:r}),[r]);return(0,s.jsx)(aU.Provider,{value:c,children:e})}try{aU.displayName||(aU.displayName="DragDropContext")}catch{}try{a$.displayName||(a$.displayName="DragDropProvider")}catch{}var aV=n(97891),aF=n(65556);function aW({className:e}){let[t,n]=(0,f.useState)(eb.Lg.Static),[a,i]=(0,f.useState)(!0),{safeSetTimeout:r}=(0,aF.A)();return(0,f.useEffect)(()=>{let e=r(()=>{S.J.getProPlusAnimationFlag()?(n(eb.Lg.Activate),i(!1)):(n(eb.Lg.Idle),i(!0))},1e3);return()=>clearTimeout(e)},[r]),(0,s.jsx)("div",{className:e,children:(0,s.jsx)(eb.Ay,{animationType:t,onAnimationEnd:()=>{t===eb.Lg.Activate&&(n(eb.Lg.Idle),i(!0),S.J.removeProPlusAnimationFlag())},loopAnimation:a,mode:"immersive",large:!0})})}try{aW.displayName||(aW.displayName="CopilotEmptyStateAnimation")}catch{}let az={container:"EmptyState-module__container--sRHBh",suggestions:"EmptyState-module__suggestions--fdxbq",suggestionButton:"EmptyState-module__suggestionButton--q8BQV",legalText:"EmptyState-module__legalText--cyh3t"},aH={suggestionButton:"SuggestionCard-module__suggestionButton--WLQeS",icon:"SuggestionCard-module__icon--NSxpP"},aG=e=>e in L;function aq({titleHtml:e,icon:t,color:n,onClick:a}){let i=function(e){let t=`${e.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`;return aG(t)?L[t]:void 0}(t);return(0,s.jsxs)("button",{className:aH.suggestionButton,onClick:a,children:[i&&(0,s.jsx)("div",{className:aH.icon,style:{color:n},children:(0,s.jsx)(i,{})}),(0,s.jsx)(eU.mo,{html:e})]})}try{aq.displayName||(aq.displayName="SuggestionCard")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}function aK({showSuggestions:e}){let t=(0,H.b)(),n=(0,m.Pk)(),a=t.getSelectedThread(n),i=(0,h.X)(),r=(0,f.useMemo)(()=>{var e;if(Array.isArray(e=i.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=i.icebreakers.find(e=>"functional"===e.type);if(e&&e.data.length>0)return e.data.sort(()=>.5-Math.random()).slice(0,6)}return[]},[i.icebreakers]);return(0,s.jsxs)("div",{className:az.container,children:[(0,s.jsx)(aW,{}),e&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,s.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),(0,s.jsx)("ul",{className:`${az.suggestions} list-style-none`,children:r.map(e=>(0,s.jsx)("li",{className:az.suggestionButton,children:(0,s.jsx)(aq,{titleHtml:e.titleHtml,icon:e.icon,color:e.color,onClick:()=>{let i=0===n.messages.length?a:t.getSelectedThread(n),r=n.currentUserLogin,o=e.message;t.sendChatMessage({thread:i,content:o.replaceAll("$$USERNAME$$",r),references:n.currentReferences,topic:n.currentTopic,context:n.context,customInstructions:n.customInstructions,model:n.model}),(0,_.BI)("dotcom_chat.activate",{target:"EMPTY_STATE_SUGGESTION_CARD",topic:n.currentTopic?.name,mode:"immersive",suggestionId:e.id})}},e.id)},e.id))})]}),(0,s.jsx)("div",{className:az.legalText,children:(0,s.jsx)(aV.h,{})})]})}try{aK.displayName||(aK.displayName="EmptyState")}catch{}var aQ=n(70642);let aX={container:"ErrorState-module__container--DKNLc",icon:"ErrorState-module__icon--Grz_W",description:"ErrorState-module__description--uIC8b",sso:"ErrorState-module__sso--b2klG"};function aJ({title:e,description:t,ssoOrgs:n}){let a=n&&n.length>0;return(0,s.jsxs)("div",{className:aX.container,children:[(0,s.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,s.jsxs)($.A,{border:!1,children:[(0,s.jsx)($.A.Visual,{children:(0,s.jsx)(L.AlertIcon,{size:"medium",className:aX.icon})}),(0,s.jsx)($.A.Heading,{as:"h2",children:e}),(void 0!==t||a)&&(0,s.jsxs)("div",{className:aX.description,children:[(0,s.jsx)($.A.Description,{children:(0,s.jsx)("span",{children:t})}),(0,s.jsx)("div",{className:aX.sso,children:a&&(0,s.jsx)(aQ.x,{protectedOrgs:n})})]})]})]})}function aY(){let{helpUrl:e}=(0,h.X)();return(0,s.jsxs)("div",{className:aX.container,children:[(0,s.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),(0,s.jsxs)($.A,{border:!1,children:[(0,s.jsx)($.A.Visual,{children:(0,s.jsx)(L.LockIcon,{size:"medium",className:aX.icon})}),(0,s.jsx)($.A.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),(0,s.jsxs)("div",{className:aX.description,children:[(0,s.jsx)($.A.Description,{children:(0,s.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),(0,s.jsx)(U.A,{inline:!0,href:`${e}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`,children:"Learn more"})]})]})]})}try{aJ.displayName||(aJ.displayName="ErrorState")}catch{}try{aY.displayName||(aY.displayName="SharedThreadForbidden")}catch{}let aZ={container:"ImmersiveChat-module__container--Q4j2R",emptyContent:"ImmersiveChat-module__emptyContent--IQfnX",messageContent:"ImmersiveChat-module__messageContent--fpzTL",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--MQEF2",hidden:"ImmersiveChat-module__hidden--K3ci9"},a0={container:"SpaceNotFoundComponent-module__container--hltG9",description:"SpaceNotFoundComponent-module__description--b8Rdv",banner:"SpaceNotFoundComponent-module__banner--ntKjI",icon:"SpaceNotFoundComponent-module__icon--hM9CP"},a1=({protectedOrganizations:e})=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:a0.container,children:[(0,s.jsx)(L.AlertIcon,{className:a0.icon}),(0,s.jsx)("h3",{children:"Space not found"}),(0,s.jsx)("p",{className:a0.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),(0,s.jsx)("div",{className:a0.banner,children:e&&(0,s.jsx)(aQ.x,{protectedOrgs:e,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`})})]})});try{a1.displayName||(a1.displayName="SpaceNotFoundComponent")}catch{}var a2=n(51856),a5=n(94747);let a3=e=>{let t=(0,H.b)(),{mutateAsync:n,...a}=(0,a5.n)({mutationFn:async n=>{let a=e?`/custom_copilots/${e}`:"/custom_copilots",i=await (0,e$.lS)(a,{method:e?"PUT":"POST",body:{custom_copilot:{name:n.name,description:n.description,general_instructions:n.generalInstructions,resources_attributes:n.resources?.map(e=>({id:e.databaseId,resource_type:e.type,_destroy:e.markedForDestroy,metadata:function(e){switch(e.type){case"github_file":return{repository_id:e.repositoryId,file_path:e.filePath};case"free_text":return{text:e.text,name:e.name};default:throw Error("Unsupported resource")}}(e)}))}}}),r=await i.json();if(!i.ok)throw r.errorMessages;return t.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:r}),r}});return{upsertCopilotSpace:n,...a}};function a4({onClose:e,copilotSpace:t}){let[n,a]=(0,f.useState)(t.generalInstructions??""),[i,r]=(0,f.useState)(void 0),{upsertCopilotSpace:o,isPending:l}=a3(t.id),c=async t=>{if(t?.preventDefault(),!(n.length>2e3)&&!l)try{await o({generalInstructions:n}),e()}catch(t){let e="An error occurred while saving the instructions.";t&&"object"==typeof t&&"general_instructions"in t&&(e=t.general_instructions),r(e)}};return(0,s.jsx)(tz.l,{width:"large",title:"Edit instructions",subtitle:"Describe the main responsibilities, limitations, and expertise areas of the Copilot. Include what tasks it should handle and which ones to avoid.",onClose:e,footerButtons:[{buttonType:"default",content:"Cancel",onClick:e},{buttonType:"primary",content:"Save",onClick:()=>void c(),loading:l,loadingAnnouncement:"Saving instructions"}],children:(0,s.jsx)(nG.tL,{commands:{"github:submit-form":void 0},children:(0,s.jsx)("form",{onSubmit:c,children:(0,s.jsxs)(tF.A,{children:[(0,s.jsx)(tF.A.Label,{visuallyHidden:!0,children:"General Instructions"}),(0,s.jsx)(a2.Ay,{block:!0,rows:7,name:"generalInstructions",value:n,placeholder:"General instructions",validationStatus:i||n.length>2e3?"error":void 0,...(0,eo.G)("instructions-input"),onChange:e=>{a(e.target.value),r(void 0)}}),i?(0,s.jsx)(tF.A.Validation,{variant:"error",children:(0,s.jsx)("span",{...(0,eo.G)("error-message"),children:i})}):(0,s.jsx)(a6,{text:n,promptCharLimit:2e3})]})})})})}function a6({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,s.jsxs)(s.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return n?(0,s.jsx)(tF.A.Validation,{variant:"error",children:a}):(0,s.jsx)(tF.A.Caption,{children:a})}try{a4.displayName||(a4.displayName="EditInstructionsDialog")}catch{}try{a6.displayName||(a6.displayName="CharacterCount")}catch{}var a7=n(8601);let a8=(0,n(80688).A)("sessionStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),a9="THREAD_TIME_PATCH";function ie(){let e=a8.getItem(a9);return e?JSON.parse(e):null}function it(){a8.removeItem(a9)}var ia=n(89621);function ii({onClose:e,copilotSpaceId:t,resource:n}){let[a,i]=(0,f.useState)(n?.name??""),[r,o]=(0,f.useState)(n?.text??""),[l,c]=(0,f.useState)({}),d=l.base&&l.base.startsWith("The size of the space exceeds the current limit"),{upsertCopilotSpace:u,isPending:m}=a3(t),p=async t=>{if(t?.preventDefault(),!m)try{await u({resources:[{id:Date.now().toString(),type:"free_text",name:a,text:r,markedForDestroy:!1,...n&&{id:n.id,databaseId:n.databaseId}}]}),e()}catch(e){c(e)}},h=!!n;return(0,s.jsx)(tz.l,{width:"large",title:h?"Edit a text file":"Add a text file",onClose:e,renderFooter:()=>(0,s.jsxs)(tz.l.Footer,{children:[(0,s.jsx)("div",{className:"d-flex flex-items-center",children:d?(0,s.jsx)(tF.A.Validation,{variant:"error",children:"The size of the space exceeds the current limit"}):null}),(0,s.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,s.jsx)(ey.Q,{onClick:e,children:"Cancel"}),(0,s.jsx)(ey.Q,{variant:"primary",onClick:()=>void p(),loading:m,loadingAnnouncement:"Saving resource",children:h?"Save":"Add"})]})]}),children:(0,s.jsx)(nG.tL,{commands:{"github:submit-form":void 0},children:(0,s.jsx)("form",{onSubmit:p,children:(0,s.jsxs)(tQ.B,{children:[(0,s.jsxs)(tF.A,{required:!0,children:[(0,s.jsx)(tF.A.Label,{children:"Name"}),(0,s.jsx)(tW.A,{block:!0,placeholder:"Give the file a title",value:a,onChange:e=>{i(e.target.value),c(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:l["resources.name"]?"error":void 0}),l["resources.name"]&&(0,s.jsx)(tF.A.Validation,{variant:"error",children:l["resources.name"]})]}),(0,s.jsxs)(tF.A,{required:!0,children:[(0,s.jsx)(tF.A.Label,{children:"Content"}),(0,s.jsx)(a2.Ay,{block:!0,rows:7,name:"content",value:r,placeholder:"Enter content here",maxLength:2e4,validationStatus:l["resources.text"]||r.length>2e4?"error":void 0,onChange:e=>{o(e.target.value),c(e=>({...e,"resources.text":""}))}}),l["resources.text"]?(0,s.jsx)(tF.A.Validation,{variant:"error",children:l["resources.text"]}):(0,s.jsx)(ir,{text:r,promptCharLimit:2e4})]})]})})})})}function ir({text:e,promptCharLimit:t}){let n=e.length>t,a=(0,s.jsxs)(s.Fragment,{children:[e.length.toLocaleString()," / ",t.toLocaleString()," characters"]});return n?(0,s.jsx)(tF.A.Validation,{variant:"error",children:a}):(0,s.jsx)(tF.A.Caption,{children:a})}try{ii.displayName||(ii.displayName="TextFileDialog")}catch{}try{ir.displayName||(ir.displayName="CharacterCount")}catch{}let io=({children:e,copilotSpace:t,findFileWorkerPath:n})=>{let[a,i]=(0,f.useState)(!1),[r,o]=(0,f.useState)(!1),{upsertCopilotSpace:l}=a3(t.id),c=async e=>{await l({resources:e.map(e=>({...e,fileExists:!0,markedForDestroy:!1}))}),o(!1)},d=(0,f.useRef)(null);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(O.W,{anchorRef:d,children:[(0,s.jsx)(O.W.Anchor,{children:e}),(0,s.jsx)(O.W.Overlay,{width:"small",children:(0,s.jsxs)(B.l,{children:[(0,s.jsxs)(B.l.Item,{onSelect:()=>{o(!0)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.FileCodeIcon,{})}),"Add files, folders..."]}),(0,s.jsx)(B.l.Divider,{}),(0,s.jsxs)(B.l.Item,{onSelect:()=>{i(!0)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.PlusIcon,{})}),"Add a text file"]})]})})]}),a&&(0,s.jsx)(ii,{copilotSpaceId:t.id,onClose:()=>i(!1)}),r&&(0,s.jsx)(ia.Q,{formData:[],onCancel:()=>{o(!1)},onSave:c,findFileWorkerPath:n,attachmentButtonRef:d,openRepoPanel:!0})]})};try{io.displayName||(io.displayName="AddReferenceMenu")}catch{}var is=n(6020);let il={warningIcon:"ReferencesTable-module__warningIcon--aAwMb"};function ic({copilotSpace:e}){let{upsertCopilotSpace:t}=a3(e.id);async function n(e){await t({resources:[{...e,markedForDestroy:!0}]})}return(0,s.jsx)(t3.X.Container,{children:(0,s.jsx)(t4.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:e.resources,columns:[{id:"id",header:"Name",rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let t=e.filePath.split("/"),n=t.pop(),a=[e.nwo,...t].join("/");return(0,s.jsxs)(tQ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,s.jsx)("span",{className:"fgColor-muted",children:(0,s.jsx)(L.FileIcon,{size:16})}),(0,s.jsxs)(tQ.B,{gap:"none",children:[(0,s.jsx)("span",{className:"text-normal f5",children:n}),(0,s.jsx)("div",{children:(0,s.jsx)(ns.A,{title:a,maxWidth:300,className:"text-normal fgColor-muted",children:a})})]})]})}case"free_text":return(0,s.jsxs)(tQ.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,s.jsx)("span",{className:"fgColor-muted",children:(0,s.jsx)(L.FileIcon,{size:16})}),(0,s.jsx)("div",{children:(0,s.jsx)(ns.A,{title:e.name,maxWidth:300,className:"text-normal f5",children:e.name})})]});default:return null}}},{id:"size",header:"Size",align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,s.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`})},{id:"actions",header:()=>(0,s.jsx)(is.s,{children:"Actions"}),maxWidth:"auto",align:"end",renderCell:t=>{let a="github_file"===t.type&&!t.fileExists;return(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)(R.K,{className:il.warningIcon,icon:L.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,s.jsx)(id,{copilotSpaceId:e.id,row:t,onEdit:()=>{},onDelete:n})]})}}]})})}let id=({copilotSpaceId:e,row:t,onDelete:n})=>{let[a,i]=(0,f.useState)(null);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(O.W,{children:[(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(R.K,{"aria-label":"Resource actions",title:"Resource actions",icon:L.KebabHorizontalIcon,variant:"invisible"})}),(0,s.jsx)(O.W.Overlay,{children:(0,s.jsxs)(B.l,{children:["free_text"===t.type&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(B.l.Item,{onSelect:()=>i(t),children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.PencilIcon,{})}),"Edit"]})}),(0,s.jsxs)(B.l.Item,{variant:"danger",onSelect:()=>{n(t)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.TrashIcon,{})}),"Delete"]})]})})]}),a&&(0,s.jsx)(ii,{copilotSpaceId:e,resource:a,onClose:()=>{i(null)}})]})};try{ic.displayName||(ic.displayName="ReferencesTable")}catch{}try{id.displayName||(id.displayName="RowActions")}catch{}let iu={details:"SpaceHomePageDetails-module__details--HzLa5",left:"SpaceHomePageDetails-module__left--rKaKZ",instructions:"SpaceHomePageDetails-module__instructions--hChUu",instructionsTitle:"SpaceHomePageDetails-module__instructionsTitle--cK6Qu",instructionsText:"SpaceHomePageDetails-module__instructionsText--Q2xUD",emptyText:"SpaceHomePageDetails-module__emptyText--M2tmQ",references:"SpaceHomePageDetails-module__references--YHEv1",referencesTitle:"SpaceHomePageDetails-module__referencesTitle--d2cWi",referencesTitleText:"SpaceHomePageDetails-module__referencesTitleText--i0UX0",referencesText:"SpaceHomePageDetails-module__referencesText--LDg6x",referencesSizeProgressBar:"SpaceHomePageDetails-module__referencesSizeProgressBar--LN0LZ",referencesSizeText:"SpaceHomePageDetails-module__referencesSizeText--jYyml",right:"SpaceHomePageDetails-module__right--JjPv5",conversations:"SpaceHomePageDetails-module__conversations--xVIB6",conversationsTitle:"SpaceHomePageDetails-module__conversationsTitle--vbBGh",conversationsText:"SpaceHomePageDetails-module__conversationsText--bSR7l"},im=({currentSpace:e,state:t,manager:n,customCopilotId:a,setShowEditInstructionsDialog:i})=>{let{threads:r,findFileWorkerPath:o}=t,l=(0,t$.Z)(),c=(0,f.useMemo)(()=>{!function(e){let t=ie();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():it())}}(r);let e=new Map(Array.from(r.entries()).filter(e=>e[1].customCopilotID===a));return n.sortThreads(e).map(e=>({id:e.id,text:(0,d.CB)(e),href:`${d.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))},[r,a,n]);return(0,s.jsxs)("div",{className:iu.details,children:[(0,s.jsxs)("div",{className:iu.left,children:[(0,s.jsxs)("div",{className:iu.instructions,children:[(0,s.jsxs)("p",{className:iu.instructionsTitle,children:["Instructions",(0,s.jsx)(ey.Q,{size:"medium",onClick:()=>i(!0),children:"Edit"})]}),e.generalInstructions?(0,s.jsx)("p",{className:iu.instructionsText,children:e.generalInstructions}):(0,s.jsx)("p",{className:iu.emptyText,children:"No instructions added"})]}),(0,s.jsxs)("div",{className:iu.references,children:[(0,s.jsxs)("div",{className:iu.referencesTitle,id:"references-title",children:[(0,s.jsx)("span",{className:iu.referencesTitleText,children:"References"}),e.sizePercentage>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a7.z,{inline:!0,barSize:"small",progress:e.sizePercentage,className:iu.referencesSizeProgressBar}),(0,s.jsxs)("span",{className:iu.referencesSizeText,children:[e.sizePercentage<1?"<1":Math.round(e.sizePercentage),"%"]})]}),(0,s.jsx)(io,{copilotSpace:e,findFileWorkerPath:o,children:(0,s.jsx)(ey.Q,{size:"medium",children:"Add"})})]}),e.resources?.length>0?(0,s.jsx)(ic,{copilotSpace:e}):(0,s.jsx)("p",{className:iu.referencesText,children:"No references added"})]})]}),(0,s.jsx)("div",{className:iu.right,children:(0,s.jsxs)("div",{className:iu.conversations,children:[(0,s.jsx)("p",{className:iu.conversationsTitle,children:"Conversations"}),c.length>0?(0,s.jsx)(B.l,{variant:"full",children:c.map(e=>(0,s.jsxs)(B.l.LinkItem,{href:e.href,onClick:t=>{t.preventDefault(),l(e.href)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.CommentIcon,{})}),e.text]},e.id))}):(0,s.jsx)("p",{className:iu.conversationsText,children:"No conversations yet"})]})})]})};try{im.displayName||(im.displayName="SpaceHomePageDetails")}catch{}let ip={container:"SpaceHomePageState-module__container--U1I3l",title:"SpaceHomePageState-module__title--j3DVO",description:"SpaceHomePageState-module__description--DU0xQ"},ih=e=>{let{selectedThreadID:t,textAreaRef:n,onSubmit:a,customCopilotId:i}=e,r=(0,H.b)(),o=(0,m.Pk)(),l=o.customCopilots?.find(e=>e.id===i),[c,d]=(0,f.useState)([]),[u,p]=(0,f.useState)(!1);return((0,f.useEffect)(()=>{(async function(){if("number"==typeof i){let e=await r.fetchCustomCopilot(i);void 0!==e.id?r.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e}):d(e.protectedOrganizations)}})()},[i,r]),l||c?.length!==0)?(0,s.jsx)(s.Fragment,{children:l&&c?.length===0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:ip.container,children:[(0,s.jsx)(nf,{icon:l.iconType,color:l.iconColor}),(0,s.jsx)("h2",{className:ip.title,children:(0,s.jsx)(ns.A,{title:l.name,maxWidth:"100%",children:l.name})}),l.description&&(0,s.jsx)("p",{className:ip.description,children:l.description}),(0,s.jsx)("div",{className:"width-full",children:(0,s.jsx)(ts.V,{textAreaRef:n,onSubmit:a,isStreaming:!!o.streamingMessage,size:"small",hideAttachmentButton:!0},t)}),(0,s.jsx)(im,{currentSpace:l,state:o,manager:r,customCopilotId:i,setShowEditInstructionsDialog:p})]}),u&&(0,s.jsx)(a4,{copilotSpace:l,onClose:()=>p(!1)})]}):(0,s.jsx)(a1,{protectedOrganizations:c})}):(0,s.jsx)(aB,{})};try{ih.displayName||(ih.displayName="SpaceHomePageState")}catch{}let ig=({inputRef:e,panelWidth:t,isMobile:n})=>{let{scrollToBottom:a}=(0,nN.b)(),i=(0,m.Pk)(),{streamingMessage:r,messages:o}=i,l=(0,H.b)().getSelectedThread(i),c=(0,d.CB)(l),u=l?.sharedMessageID,{messages:p,groupedMessages:h}=(0,nI.a)(i),g=p.find(e=>"assistant"===e.role)?.id;return(0,nE.N)(()=>a("instant"),[a]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"sr-only",children:[(0,s.jsx)("h1",{children:"Copilot Chat"}),(0,s.jsx)("h2",{children:c})]}),h.map((a,i)=>(0,s.jsx)(nj.i,{isLastGroup:i===h.length-1,children:a.map((l,c)=>{let d=-1===l.messageIndex?o.length:l.messageIndex;return(0,s.jsx)(aD,{isLatestMessage:i===h.length-1&&c===a.length-1,isSharedMessage:l.id===u,isFirstReply:l.id===g,message:l,messageIndex:d,inputRef:e,panelWidth:t,isStreaming:l.id===r?.id,autoOpenPreviewPane:!n},c)})},i))]})},iv=()=>(0,s.jsx)(aJ,{title:"Conversation failed to load",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.A,{href:"",onClick:e=>{e.preventDefault(),window.location.reload()},inline:!0,children:"Reload the page"})," ","to try again."]})}),ix=()=>{let{messagesLoading:e,ssoOrganizations:t}=(0,m.Pk)(),n=e.missingOrgIds?.map(e=>String(e)).map(e=>t?.find(t=>t.id===e)?.login).filter(e=>!!e),a=n&&n.length>0?"This URL may be incorrect, you're signed out of your organization or the conversation may have been deleted.":"This URL may be incorrect or the conversation may have been deleted.";return(0,s.jsx)(aJ,{title:"Conversation not found",description:a,ssoOrgs:n})},i_=()=>(0,s.jsx)(aJ,{title:"Shared conversation not found",description:"This URL may be incorrect or the conversation may have been deleted."}),iy=({inputRef:e,panelWidth:t,isMobile:n,onSubmit:a})=>{let i=(0,m.Pk)(),r=(0,H.b)(),{currentReferences:o,messagesLoading:l,threadsLoading:c,messages:d,showTopicPicker:p,selectedThreadID:h}=i,g=r.getSelectedThread(i),{textAreaRef:v}=(0,nS.Y)(e),x=tl(),_=(0,I.iI)(),y=(0,f.useMemo)(()=>!i.selectedThreadID&&S.J.getEntrypointMessage(),[i.selectedThreadID]),C=null,j=null;(0,T.B)(d).length&&"loaded"===l.state?C=(0,s.jsx)(ig,{inputRef:v,panelWidth:t,isMobile:n}):("loading"===l.state||"pending"===l.state)&&i.selectedThreadID&&!p?C=(0,s.jsx)(aB,{}):"error"===l.state&&i.selectedThreadID&&(null===g||l.notFound)?u.W.copilotSharedForbiddenError?u.W.copilotSharedForbiddenError&&(j=x&&i.fetchSharedThreads?.ok===!1?403===i.fetchSharedThreads.status?(0,s.jsx)(aY,{}):(0,s.jsx)(i_,{}):(0,s.jsx)(ix,{})):j=x?(0,s.jsx)(i_,{}):(0,s.jsx)(ix,{}):"error"===l.state||"error"===c.state?j=(0,s.jsx)(iv,{}):"loading"===l.state||y||(j=_?(0,s.jsx)(P.t,{fallback:(0,s.jsx)(a1,{}),children:(0,s.jsx)(ih,{selectedThreadID:h,textAreaRef:v,onSubmit:a,customCopilotId:_})}):(0,s.jsx)(aK,{showSuggestions:0===o.length&&!i.currentTopic}));let{model:N}=(0,m.bP)("model"),b=u.W.attachImagesImmersive&&u.W.wholeAreaDragDrop,w=(0,nw.c)(),E=(0,s.jsxs)(nN.$,{className:aZ.container,children:[j&&(0,s.jsx)("div",{className:aZ.emptyContent,children:j}),C&&(0,s.jsxs)("div",{className:aZ.messageContent,children:[C,(0,s.jsx)(iC,{}),(0,s.jsx)(nb.Cb,{})]}),(0,s.jsx)(nb.zc,{})]});return b?(0,s.jsx)(a$,{model:N,state:i,manager:r,autocomplete:w,children:E}):E},iC=()=>{let{isScrolledUp:e,scrollToBottom:t}=(0,nN.b)();return(0,s.jsx)(R.K,{"aria-label":"Scroll to bottom",className:(0,w.$)(aZ.scrollToBottomButton,!e&&aZ.hidden),onClick:()=>t("smooth"),icon:L.ArrowDownIcon,tooltipDirection:"n",tabIndex:-1,"aria-hidden":!0})};try{ig.displayName||(ig.displayName="Messages")}catch{}try{iv.displayName||(iv.displayName="FailedToLoadThreadError")}catch{}try{ix.displayName||(ix.displayName="NotFoundError")}catch{}try{i_.displayName||(i_.displayName="SharedThreadNotFound")}catch{}try{iy.displayName||(iy.displayName="ImmersiveChat")}catch{}try{iC.displayName||(iC.displayName="ScrollToBottomButton")}catch{}let ij={container:"Layout-module__container--ON_wj",left:"Layout-module__left--LHTG3",main:"Layout-module__main--JKQM5",content:"Layout-module__content--s7QoY",footer:"Layout-module__footer--raJHn",chatInputContainer:"Layout-module__chatInputContainer--DXrKy",previewPane:"Layout-module__previewPane--vF1ZO",active:"Layout-module__active--nDCtU",wide:"Layout-module__wide--vTn04",viewer:"Layout-module__viewer--M_UyD",fullscreenPreviewPane:"Layout-module__fullscreenPreviewPane--i4oKD"},iN={container:"QuotaExceededBanner-module__container--BbiER"};function ib(){let{resetDate:e}=(0,b.x)();return(0,s.jsx)("div",{className:iN.container,children:(0,s.jsx)(C.l,{variant:"upsell",title:"Limit reached soon",description:`You have reached your free plan limit. It will reset on ${e}`,hideTitle:!0,primaryAction:(0,s.jsx)(y.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,_.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade"})})})}try{ib.displayName||(ib.displayName="QuotaExceededBanner")}catch{}let iS={container:"QuotaExceededEmptyState-module__container--IH35J",main:"QuotaExceededEmptyState-module__main--UOew3",hero:"QuotaExceededEmptyState-module__hero--GYoHc",copy:"QuotaExceededEmptyState-module__copy--FI8o_",heading:"QuotaExceededEmptyState-module__heading--RHZjC",description:"QuotaExceededEmptyState-module__description--m4Qvb",footer:"QuotaExceededEmptyState-module__footer--xLpJU"};function iI(){let{resetDate:e}=(0,b.x)();return(0,s.jsxs)("div",{className:iS.container,children:[(0,s.jsxs)("div",{className:iS.main,children:[(0,s.jsx)("img",{className:iS.hero,src:"/images/modules/copilot-immersive-v1/hero.png",alt:"Hero"}),(0,s.jsxs)("div",{className:iS.copy,children:[(0,s.jsx)("h2",{className:iS.heading,children:"You\u2019ve reached your free plan limit"}),(0,s.jsxs)("p",{className:iS.description,children:["Your limits will reset on ",e,"."]}),(0,s.jsx)(y.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/features/copilot#pricing",onClick:()=>{(0,_.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})},children:"Upgrade to Pro"})]})]}),(0,s.jsxs)("div",{className:iS.footer,children:[(0,s.jsx)("strong",{children:"Part of an organization?"}),(0,s.jsxs)("span",{children:["Upgrade to"," ",(0,s.jsx)(U.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]})]})}try{iI.displayName||(iI.displayName="QuotaExceededEmptyState")}catch{}function iw({closeDialog:e,customCopilotId:t}){let[n,a]=(0,f.useState)(!1),i=eE.fV.origin,r=t?`${i}${d.VR}/${t}/share`:`${i}/copilot`;return(0,s.jsx)(tz.l,{title:"Share space",onClose:e,width:"large",children:(0,s.jsxs)(tQ.B,{gap:"condensed",children:[(0,s.jsxs)(tQ.B,{direction:"horizontal",gap:"condensed",align:"start",children:[(0,s.jsx)(L.InfoIcon,{size:20,className:tX.infoIcon})," This space may contain private content. Viewers must have have access to all referenced content."]}),(0,s.jsxs)(tQ.B,{direction:"horizontal",gap:"condensed",align:"start",children:[(0,s.jsx)(tW.A,{className:"flex-1",readOnly:!0,value:r,placeholder:r}),n?(0,s.jsxs)(ey.Q,{sx:{color:"var(--fgColor-success)"},children:[(0,s.jsx)(L.CheckIcon,{})," Copied!"]}):(0,s.jsx)(ey.Q,{leadingVisual:L.CopyIcon,onClick:()=>{(0,tq.D)(r),a(!0)},children:"Copy link"})]})]})})}try{iw.displayName||(iw.displayName="ShareCopilotSpaceDialog")}catch{}var iE=n(40961);let iT={avatarContainer:"SpacesFormDialog-module__avatarContainer--mWqaR",avatarContainerButton:"SpacesFormDialog-module__avatarContainerButton--SKRWC",footerContainer:"SpacesFormDialog-module__footerContainer--Ir0LP"};function iP(){let[e,t]=(0,f.useState)([]),[n,a]=(0,f.useState)(!1),[i,r]=(0,f.useState)(void 0);(0,f.useEffect)(()=>{(async()=>{try{let e=await (0,e$.lS)("/github-copilot/chat/custom_copilots_owners"),n=await e.json(),a=n?.owners;if(!e.ok||!a){o();return}t(a),1===a.length&&r(a[0])}catch{o()}})()},[]);let o=()=>{t([]),a(!0)};return(0,s.jsxs)(tF.A,{required:!0,children:[(0,s.jsx)(tF.A.Label,{children:"Owner"}),(0,s.jsxs)(O.W,{children:[(()=>{let e=i?.name||"Choose an owner",t=i?(0,s.jsx)(af.r,{src:i.avatarUrl},i.avatarUrl):void 0;return(0,s.jsx)(O.W.Button,{"aria-label":e,leadingVisual:t,children:e})})(),(0,s.jsx)(O.W.Overlay,{width:"small",maxHeight:"large",sx:{overflow:"auto"},children:(0,s.jsx)(B.l,{showDividers:!0,children:(0,s.jsx)(B.l.Group,{sx:{maxHeight:350,overflow:"auto"},children:(0,s.jsxs)(B.l,{selectionVariant:"single",children:[e&&e.map(e=>{let{name:t,avatarUrl:n,displayName:a}=e;return(0,s.jsxs)(B.l.Item,{selected:t===i?.name,onSelect:()=>r(e),children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(af.r,{src:n})}),t,(0,s.jsx)(B.l.Description,{children:a})]},t)}),!e.length&&!n&&(0,s.jsx)(B.l.Item,{disabled:!0,children:"Fetching owners\u2026"},"fetching-owners"),n&&(0,s.jsx)(B.l.Item,{disabled:!0,sx:{color:"danger.fg"},children:"An error occurred while loading owners. Please reopen the dialog to try again."},"error-fetching-owners")]})})})})]})]})}try{iP.displayName||(iP.displayName="SpacesOwnerDropdown")}catch{}function ik(){return{icon:nu[Math.floor(Math.random()*nu.length)],color:nm[Math.floor(Math.random()*nm.length)]}}function iA({onClose:e,copilotSpaceId:t}){let[n,a]=(0,f.useState)(!1),i=(0,H.b)(),{customCopilots:r}=(0,m.Pk)(),o=r?.find(e=>e.id===t),[l,c]=(0,f.useState)(o?.name??""),[d,u]=(0,f.useState)(o?.description??""),[p,h]=(0,f.useState)({}),[g,v]=(0,f.useState)(()=>o?{icon:o.iconType??nl,color:o.iconColor??nc}:ik()),x=async()=>{if(n)return;a(!0);let t={custom_copilot:{name:l,description:d,icon_type:g.icon,icon_color:g.color}};try{let n;if(o?n=await (0,e$.lS)(`/custom_copilots/${o.id}`,{method:"PUT",body:t}):(n=await (0,e$.lS)("/custom_copilots",{method:"POST",body:t}),await i.fetchCustomCopilots()),n.ok){let t=await n.json();i.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),e()}else{let e=await n.json();h(e.errorMessages)}}catch{h({base:"An error occurred while creating your space"})}finally{a(!1)}},_=e=>{e?.preventDefault(),x()},y=!!o;return(0,s.jsx)(tz.l,{title:y?"Edit space":"Create new space",onClose:e,width:"large",renderFooter:()=>(0,s.jsxs)("div",{className:iT.footerContainer,children:[(0,s.jsx)(ey.Q,{variant:"default",onClick:e,children:"Cancel"}),(0,s.jsx)(ey.Q,{loading:n,loadingAnnouncement:y?"Saving space":"Creating space",variant:"primary",onClick:()=>x(),children:y?"Save":"Create"})]}),children:(0,s.jsx)(nG.tL,{commands:{"github:submit-form":()=>_()},children:(0,s.jsx)("form",{onSubmit:_,children:(0,s.jsxs)(tQ.B,{children:[(0,s.jsxs)(tQ.B,{direction:"horizontal",align:"end",children:[(0,s.jsxs)(tF.A,{className:"flex-auto",children:[(0,s.jsx)(tF.A.Label,{required:!0,children:"Name"}),(0,s.jsx)(tW.A,{block:!0,name:"space name",value:l,placeholder:"Enter name",onChange:e=>{c(e.target.value),h(e=>({...e,name:void 0}))}}),p.name&&(0,s.jsx)(tF.A.Validation,{variant:"error",children:(0,s.jsx)("span",{children:p.name})})]}),(0,s.jsxs)("div",{className:iT.avatarContainer,children:[(0,s.jsx)(nf,{...g}),(0,s.jsx)(R.K,{icon:L.ArrowSwitchIcon,size:"medium",variant:"default",onClick:()=>v(ik()),"aria-labelledby":"Change avatar",className:iT.avatarContainerButton})]})]}),(0,s.jsx)(iP,{}),(0,s.jsxs)(tF.A,{children:[(0,s.jsx)(tF.A.Label,{children:"Description"}),(0,s.jsx)(a2.Ay,{block:!0,rows:3,name:"description","aria-label":"Description",value:d,placeholder:"Describe what this Space is for",onChange:e=>{u(e.target.value),h(e=>({...e,description:void 0}))}}),p.description&&(0,s.jsx)(tF.A.Validation,{variant:"error",children:(0,s.jsx)("span",{children:p.description})})]})]})})})})}try{iA.displayName||(iA.displayName="SpacesFormDialog")}catch{}function iL({onDelete:e,copilot:t}){let[n,a]=(0,f.useState)(null),[i,r]=(0,f.useState)(!1),o=(0,f.useRef)(null),[l,c]=(0,f.useState)(!1),d=u.W.shareCustomCopilot,m=()=>{(0,iE.flushSync)(()=>a(null)),o.current?.focus()},p=async e=>{m(),r(!0),await e(),r(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(O.W,{anchorRef:o,children:[(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(R.K,{loading:i,icon:L.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:()=>(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})})}),(0,s.jsx)(O.W.Overlay,{side:"outside-bottom",align:"end",children:(0,s.jsxs)(B.l,{children:[(0,s.jsxs)(B.l.Item,{onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),c(!0)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.PencilIcon,{})}),"Edit"]}),d&&(0,s.jsxs)(B.l.Item,{onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),a("share")},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.ShareIcon,{})}),"Share"]}),(0,s.jsxs)(B.l.Item,{variant:"danger",onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),a("delete")},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.TrashIcon,{})}),"Delete"]})]})})]}),"delete"===n?(0,s.jsx)(iD,{onCancel:m,onConfirm:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),p(e)}}):null,"share"===n?(0,s.jsx)(iw,{closeDialog:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),m()},customCopilotId:t.id}):null,l&&(0,s.jsx)(iA,{copilotSpaceId:t.id,onClose:()=>{c(!1)}})]})}let iD=({onConfirm:e,onCancel:t})=>(0,s.jsx)(tV.K,{title:"Delete space",onClose:n=>{"confirm"===n?((0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"}),e()):((0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t())},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."});try{iL.displayName||(iL.displayName="CopilotSpacesMenu")}catch{}try{iD.displayName||(iD.displayName="DeleteDialog")}catch{}function iO({isSidebarOpen:e}){let t=(0,H.b)(),n=(0,m.Pk)(),a=(0,I.iI)()||t.getSelectedThread(n)?.customCopilotID,i=(0,t$.Z)(),r=eE.fV?.pathname?.startsWith(d.VR),[o,l]=(0,f.useState)(!1),[c,p]=(0,f.useState)(!1),[h,g]=(0,f.useState)(!1),v=u.W.shareCustomCopilot,x=(0,f.useRef)(null),y=a&&eE.fV?.pathname!==d.VR,C=async()=>{a&&(i(d.VR),await t.deleteCopilotSpace(a))},j=y&&!n.selectedThreadID?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(B.l.Group,{children:[(0,s.jsx)(B.l.GroupHeading,{children:"Space"}),(0,s.jsxs)(B.l.Item,{onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),g(!0)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.PencilIcon,{})}),"Edit"]}),v&&(0,s.jsxs)(B.l.Item,{onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),p(!0)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.ShareIcon,{})}),"Share"]}),r&&(0,s.jsxs)(B.l.Item,{variant:"danger",onSelect:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),l(!0)},children:[(0,s.jsx)(B.l.LeadingVisual,{children:(0,s.jsx)(L.TrashIcon,{})}),"Delete"]})]}),(0,s.jsx)(B.l.Divider,{})]}):null;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nC,{showModelPicker:!1,showPreviewPaneButton:!1,conversationSpecificItems:j,isSidebarOpen:e}),o&&a?(0,s.jsx)(iD,{onCancel:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),l(!1)},onConfirm:C}):null,c&&a?(0,s.jsx)(iw,{closeDialog:()=>{(0,_.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),p(!1)},customCopilotId:a}):null,h&&a?(0,s.jsx)(iA,{copilotSpaceId:a,onClose:()=>{g(!1),x.current?.focus()}}):null]})}try{iO.displayName||(iO.displayName="SpacesHeader")}catch{}function iR({isMobile:e,textAreaRef:t,isSidebarOpen:n}){let a=(0,m.Pk)(),{currentReferences:i,context:r,messages:o}=a,l=(0,H.b)(),{chatQuotaExceeded:c,reloadQuota:d}=(0,b.x)(),p=l.getSelectedThread(a),h=(0,f.useRef)(a.currentTopic),{versionedItems:g,updateItem:x,items:_}=(0,v.xx)(),y=tl(),C=tm(),j=u.W.customCopilots,N=(0,I.iI)()||p?.customCopilotID,w=j&&N&&!a.selectedThreadID;(0,f.useEffect)(()=>{h.current=a.currentTopic},[a.currentTopic]);let E=o.length,T=tc({messageIndex:E}),P=(0,f.useCallback)(async e=>{if(d(),""===e.trim())return;for(let e of i)"thread-scoped-file"===e.type&&x({...(0,el.fQ)(e,E),isUserEdited:!1});let t={thread:p,content:e,references:i,topic:h.current,context:r,customInstructions:a.customInstructions,model:a.model,customCopilotId:N,skillOptions:a.skillOptions};if(y){let e=await l.continueSharedThread(C);if(e){let{thread:n,messages:a}=e,i=a.at(-1)?.id;await l.sendChatMessage({...t,thread:n,parentMessageId:i})}}else await l.sendChatMessage(t)},[d,p,i,r,a.customInstructions,a.model,a.skillOptions,N,y,l,C,E,x]);(0,f.useEffect)(()=>{let e=S.J.getEntrypointMessage();e&&!c&&(S.J.setEntrypointMessage(null),setTimeout(()=>{P(e)},100))},[P,c]);let k=(0,f.useMemo)(()=>{let e=new Set;for(let[,t]of _)"file"===t.type&&e.add(t.name);return e},[_]);return(0,s.jsxs)(s.Fragment,{children:[w?(0,s.jsx)(iO,{isSidebarOpen:n}):(0,s.jsx)(nC,{isSidebarOpen:n}),!a.selectedThreadID&&c?(0,s.jsx)(iI,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:ij.content,children:(0,s.jsx)(iy,{isMobile:e,onSubmit:P})}),(!y||u.W.copilotDuplicateThread)&&(0,s.jsx)("div",{className:ij.footer,children:(0,s.jsx)("div",{className:ij.chatInputContainer,children:c?(0,s.jsx)(ib,{}):w?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tE,{}),(0,s.jsx)(ts.V,{textAreaRef:t,onSubmit:P,isStreaming:!!a.streamingMessage,size:"large",onClickReference:T,hideAttachmentButton:!!N,getReferenceVersion:e=>(0,el.wt)(e,E,g),existingFileNames:k})]})})})]})]})}function iB(e){return(0,s.jsx)(P.t,{fallback:(0,s.jsx)(F,{regionName:"This conversation"}),children:(0,s.jsx)(iR,{...e})})}try{iR.displayName||(iR.displayName="ConversationViewInner")}catch{}try{iB.displayName||(iB.displayName="ConversationView")}catch{}var iM=n(84976),iU=n(84217),i$=n(35642);let iV={ConversationList__container:"ConversationList-module__ConversationList__container--rX8fM",ConversationList__empty:"ConversationList-module__ConversationList__empty--sTf7Y",ConversationList:"ConversationList-module__ConversationList--LAVA0",ConversationList__section:"ConversationList-module__ConversationList__section--ihwdi",ConversationList__title:"ConversationList-module__ConversationList__title--IHb4U",ConversationList__item:"ConversationList-module__ConversationList__item--dD6z4",ConversationList__link:"ConversationList-module__ConversationList__link--Byc2c",ConversationList__text:"ConversationList-module__ConversationList__text--YbHpv",ConversationList__context:"ConversationList-module__ConversationList__context--SK6Jb"};function iF({selectedItemID:e,loadingState:t,onConversationSelect:n}){let a=(0,H.b)(),{threads:i}=(0,m.Pk)(),r=(0,f.useMemo)(()=>((function(e){let t=ie();if(t){let n=e.get(t.threadID);n&&(Date.parse(n.updatedAt)<=t.updatedAt?n.updatedAt=new Date(t.updatedAt).toJSON():it())}})(i),a.sortThreads(i).map(e=>({id:e.id,text:(0,d.CB)(e),href:`${d.Jz}/c/${e.id}`,date:new Date(e.updatedAt)}))),[i,a]),o=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let i=new Date(t);i.setDate(t.getDate()-30);let r=[],o=[],s=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?r.push(c):c.date.toDateString()===n.toDateString()?o.push(c):c.date>a?s.push(c):c.date>i&&l.push(c);return{Today:r,Yesterday:o,"Last 7 days":s,"Last 30 days":l}}(r),l=0===r.length,c=(0,f.useId)();return(0,s.jsx)("aside",{"aria-labelledby":`${c}-conversations`,id:`${c}-conversation-list`,tabIndex:-1,className:iV.ConversationList__container,children:l&&("loading"===t||"pending"===t)?(0,s.jsx)(i$.r,{lines:5}):l?(0,s.jsx)(iz,{}):(0,s.jsxs)("div",{className:iV.ConversationList__section,children:[(0,s.jsx)("h3",{id:`${c}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(o).map(([t,a])=>a.length>0&&(0,s.jsxs)("nav",{"aria-labelledby":`${c}_${t}`,children:[(0,s.jsx)("h4",{id:`${c}_${t}`,className:iV.ConversationList__title,children:t}),(0,s.jsx)("ul",{className:iV.ConversationList,children:a.map(t=>(0,s.jsx)(iW,{item:t,selectedItemId:e??void 0,onSelect:n,threads:i},t.id))})]},t))]})})}function iW({item:e,selectedItemId:t,onSelect:n,threads:a}){let i=e.id===t,[r,o]=(0,f.useState)(null),[l,c,d]=(0,tB.B)(!1),u=(0,f.useRef)(null),m=tl(),p=(0,f.useCallback)(()=>{(0,tR.flushSync)(()=>o(null)),u.current?.focus()},[]);return e.href&&(0,s.jsxs)("li",{className:iV.ConversationList__item,children:[(0,s.jsx)(iM.N_,{className:iV.ConversationList__link,to:e.href,"aria-current":i?"page":void 0,onClick:()=>{n(),(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,s.jsx)("span",{className:iV.ConversationList__text,children:e.text})}),(0,s.jsx)("span",{className:iV.ConversationList__context,children:(0,s.jsxs)(O.W,{anchorRef:u,children:[(0,s.jsx)(O.W.Anchor,{children:(0,s.jsx)(R.K,{loading:l,icon:L.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:()=>(0,_.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,s.jsx)(O.W.Overlay,{children:(0,s.jsx)(B.l,{children:(0,s.jsx)(tY,{onOpenDialog:o,showShare:i&&!m,isShared:!!a.get(t)?.sharedID})})})]})}),(0,s.jsx)(tZ,{visibleDialog:r,onClose:p,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:c,onFinishLoading:d})]},e.id)}function iz(){return(0,s.jsxs)("div",{className:iV.ConversationList__empty,children:[(0,s.jsx)(iU.A,{as:"h3",sx:{fontSize:1,mb:2},children:"No conversations yet"}),(0,s.jsx)(tK.A,{sx:{color:"fg.muted"},children:"Ask Copilot anything on the right to start your first conversation."})]})}try{iF.displayName||(iF.displayName="ConversationList")}catch{}try{iW.displayName||(iW.displayName="ConversationListEntry")}catch{}try{iz.displayName||(iz.displayName="EmptyState")}catch{}function iH(){return(0,s.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"})})}try{iH.displayName||(iH.displayName="ComposeIcon")}catch{}var iG=n(2497);function iq({className:e,size:t=16}){return(0,s.jsx)("svg",{className:e,width:t,height:t,"aria-hidden":"true",fill:"none",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9853 4.76795c.2467 1.23107.1819 2.55631-.3218 3.71134 1.0897-1.00527 1.7464-2.46826 1.7464-3.86921 0-.41421.3357-.75.75-.75.4142 0 .75.33579.75.75 0 2.80515-2.0553 5.92172-5.26314 6.53282.12999.0339.26315.0635.39904.0885 1.3486.2485 2.7916.0174 3.7282-.5446.3552-.2131.8159-.0979 1.029.2573.2131.3552.0979.8159-.2573 1.029-1.3033.782-3.1303 1.0359-4.77168.7335-1.47895-.2726-2.95185-1.0297-3.73462-2.4328.03609.3407.0998.6912.19117 1.0445.39625 1.5319 1.23152 2.7976 2.12066 3.2689.36598.194.5054.6479.31141 1.0139-.19399.366-.64793.5054-1.01391.3114-1.41889-.7521-2.42362-2.4914-2.87037-4.2186-.37219-1.439-.41354-3.09054.18406-4.40236-.18676.13263-.36743.27694-.54001.43237-1.03593.93306-1.73142 2.22122-1.73142 3.69879 0 .4142-.33579.75-.75.75-.41422 0-.75-.3358-.75-.75 0-1.97509.934-3.64826 2.22755-4.81334.88055-.7931 1.9505-1.37217 3.05387-1.65822-.11043-.0376-.22261-.07252-.33631-.10464-1.50098-.42402-2.98649-.28172-3.84609.36302-.33136.24853-.80147.18139-1.05-.14998-.24854-.33136-.1814-.80146.14997-1.05 1.38041-1.03537 3.4149-1.0978 5.1539-.60654 1.67421.47295 3.33259 1.53108 4.06402 3.11319l.0038.00674c.035-.47081.0022-.96424-.0972-1.46029-.2603-1.29954-.95701-2.50156-1.90466-3.21238-.33135-.24854-.39848-.71865-.14994-1.050006.24855-.331356.71865-.398487 1.05001-.14994C10.8023 1.6197 11.6657 3.17263 11.9853 4.76795ZM7.99998 6.0001c-1.10457 0-2 .89543-2 2s.89543 2 2 2 2-.89543 2-2-.89543-2-2-2Z",fill:"currentColor"})})}try{iq.displayName||(iq.displayName="SpacesIcon")}catch{}let iK={list:"ServiceList-module__list--YDLyn",icon:"ServiceList-module__icon--iUANO"};function iQ(){let e=(0,m.Pk)(),{activePlugin:t,selectedThreadID:n}=e,a=(0,c.qw)(),i=(0,H.b)(),r=tU(),o=(0,I.hH)(),l=async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),await r({clearTopic:!0,includeThreads:!1}),(0,_.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},p=(e,t)=>{e.metaKey||e.ctrlKey||i.selectPlugin(t)};return(0,s.jsxs)("ul",{className:iK.list,children:[(0,s.jsx)(iG.Vx,{"aria-current":n||t||o?void 0:"page",displayName:"Dashboard",href:d.Jz,icon:L.HomeIcon,id:"home",onLinkClick:l}),u.W.customCopilots&&(0,s.jsx)(iG.Vx,{"aria-current":o?"page":void 0,displayName:"Spaces",expandOnClick:!1,hasItems:!1,href:d.VR,iconOverride:(0,s.jsx)(iq,{className:iK.icon,size:16}),id:"spaces",onLinkClick:()=>{i.selectPlugin(null)}}),a.map(t=>void 0!==t.NavigationComponent?(0,s.jsx)(t.NavigationComponent,{chatState:e,onLinkClick:p},t.id):null)]})}try{iQ.displayName||(iQ.displayName="ServiceList")}catch{}let iX={container:"Sidebar-module__container--s585U",header:"Sidebar-module__header--uOLk8",sidebar:"Sidebar-module__sidebar--sn0TN",conversations:"Sidebar-module__conversations--NEO0w",blankslateContainer:"Sidebar-module__blankslateContainer--Gvuc8",pinned:"Sidebar-module__pinned--e3Nsi",visible:"Sidebar-module__visible--d8dRm"};function iJ({isVisible:e,isPinned:t,isFloating:n,onNewThread:a,onToggle:i}){let r=(0,m.Pk)(),{threads:o,selectedThreadID:l}=r,c=n?e:t,p=(0,H.b)(),h=(0,f.useRef)(!1),g=tU(),v=tl(),x=u.W.immersiveServiceNavigation;(0,f.useEffect)(()=>{0!==o.size||h.current||(h.current=!0,p.fetchThreads())},[o,p,r]);let y=()=>{n&&e&&i()},C=(0,f.useRef)(null);return(0,f.useEffect)(()=>{if(e&&n){let e=e=>{C.current&&!C.current.contains(e.target)&&i()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},[e,n,i]),(0,s.jsxs)("div",{ref:C,className:(0,w.$)(iX.container,e&&iX.visible,t&&iX.pinned),children:[(0,s.jsxs)("div",{className:iX.header,children:[(0,s.jsx)("h2",{className:"sr-only",children:"Copilot navigation"}),(0,s.jsx)(R.K,{icon:c?L.SidebarExpandIcon:L.SidebarCollapseIcon,"aria-label":c?"Close conversations":"Open conversations",onClick:()=>{i(),c?(0,_.BI)("dotcom_chat.activate",{target:"SIDEBAR_EXPAND",mode:"immersive"}):(0,_.BI)("dotcom_chat.activate",{target:"SIDEBAR_COLLAPSE",mode:"immersive"})},variant:"default"}),(0,s.jsx)(R.K,{as:iM.N_,to:d.Jz,icon:iH,"aria-label":"New conversation",onClick:async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),y(),await g({clearTopic:!0,includeThreads:!1}),a(),(0,_.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},variant:"default"})]}),(0,s.jsx)("div",{className:iX.sidebar,children:(0,s.jsx)(P.t,{fallback:(0,s.jsx)(iY,{}),children:(0,s.jsxs)("div",{className:iX.conversations,children:[(0,s.jsx)("h3",{className:"sr-only",children:"Quick links"}),x&&(0,s.jsx)(iQ,{}),(0,s.jsx)(iF,{selectedItemID:v?null:l,loadingState:r.threadsLoading.state,onConversationSelect:y})]})})})]})}function iY(){return(0,s.jsx)("div",{className:iX.blankslateContainer,children:(0,s.jsx)(F,{regionName:"The conversations menu"})})}try{iJ.displayName||(iJ.displayName="Sidebar")}catch{}try{iY.displayName||(iY.displayName="SidebarContentsFallback")}catch{}var iZ=n(87679);let i0={serviceView:"ServiceView-module__serviceView--kyTfI",container:"ServiceView-module__container--aWxFy",header:"ServiceView-module__header--a0QWQ",pageTitle:"ServiceView-module__pageTitle--uqL4l",pageDescription:"ServiceView-module__pageDescription--leqcW",search:"ServiceView-module__search--d_tBr",searchIcon:"ServiceView-module__searchIcon--riK25",searchInput:"ServiceView-module__searchInput--uMixA",section:"ServiceView-module__section--pa78P",sectionTitle:"ServiceView-module__sectionTitle--xdhth",grid:"ServiceView-module__grid--jkblT",cardContainer:"ServiceView-module__cardContainer--s8sJT",card:"ServiceView-module__card--VdDaM",menu:"ServiceView-module__menu--Mop23",emptyStateContainer:"ServiceView-module__emptyStateContainer--pPYei",emptyStateText:"ServiceView-module__emptyStateText--tdR7x",emptyStateTitle:"ServiceView-module__emptyStateTitle--MY5gg",emptyStateDescription:"ServiceView-module__emptyStateDescription--uzvW3",entityIcon:"ServiceView-module__entityIcon--StPLn",skeletonCard:"ServiceView-module__skeletonCard--ar_1u"};function i1({name:e,entity:t,entityIcon:n,description:a,loading:i=!1,children:r,includeSearch:o=!1}){let[l,c]=(0,f.useState)(""),d=[].concat(...f.Children.toArray(r)).map(e=>(0,f.isValidElement)(e)&&"string"==typeof e.props.title&&(e.props.alwaysShow||e.props.title.toLowerCase().includes(l.toLowerCase()))?e:null).filter(Boolean),u=l?(0,s.jsx)(tW.A.Action,{onClick:()=>c(""),icon:L.XCircleFillIcon,"aria-label":"Clear",className:"fgColor-muted"}):void 0;return(0,s.jsx)("div",{className:i0.serviceView,children:(0,s.jsxs)("div",{className:i0.container,children:[(0,s.jsxs)("div",{className:i0.header,children:[n?(0,s.jsx)("div",{className:i0.entityIcon,children:n}):null,(0,s.jsx)("h2",{className:i0.pageTitle,children:e}),(0,s.jsx)("p",{className:i0.pageDescription,children:a})]}),o&&(0,s.jsx)("div",{className:i0.search,children:(0,s.jsx)(tW.A,{"aria-label":`Search ${e.toLowerCase()}`,className:i0.searchInput,leadingVisual:()=>(0,s.jsx)(L.SearchIcon,{className:i0.searchIcon}),trailingAction:u,placeholder:`Search ${e.toLowerCase()}`,value:l,disabled:i,onChange:e=>c(e.target.value)})}),(0,s.jsxs)("section",{className:i0.section,children:[(0,s.jsxs)("h3",{className:i0.sectionTitle,children:["Your ",t,"s"]}),i?(0,s.jsx)("div",{className:i0.grid,children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(iZ.f,{className:i0.skeletonCard},t))}):(0,s.jsx)("div",{className:i0.grid,children:d})]})]})})}function i2({entity:e,entityIcon:t,emptyStateTitle:n,description:a,onCreate:i}){return(0,s.jsx)("div",{className:i0.serviceView,children:(0,s.jsxs)("div",{className:i0.emptyStateContainer,children:[t?(0,s.jsx)("div",{className:i0.entityIcon,children:t}):null,(0,s.jsxs)("div",{className:i0.emptyStateText,children:[(0,s.jsx)("h2",{className:i0.emptyStateTitle,children:n}),(0,s.jsx)("p",{className:i0.emptyStateDescription,children:a})]}),(0,s.jsxs)(ey.Q,{variant:"primary",onClick:i,children:["New ",e.toLowerCase()]})]})})}function i5(e){let{title:t,menu:n,children:a}=e;if("href"in e){let{href:i,alwaysShow:r,...o}=e;return(0,s.jsxs)("div",{className:i0.cardContainer,"data-title":t,children:[(0,s.jsx)(iM.N_,{...o,to:i,className:i0.card,children:a}),!!n&&(0,s.jsx)("div",{className:i0.menu,children:n})]})}let{onClick:i,alwaysShow:r,...o}=e;return(0,s.jsxs)("div",{className:i0.cardContainer,"data-title":t,children:[(0,s.jsx)("button",{...o,className:i0.card,onClick:i,children:a}),!!n&&(0,s.jsx)("div",{className:i0.menu,children:n})]})}try{i1.displayName||(i1.displayName="ServiceView")}catch{}try{i2.displayName||(i2.displayName="ServiceEmptyState")}catch{}try{i5.displayName||(i5.displayName="ServiceItem")}catch{}let i3={container:"SpacesCard-module__container--cugaj",content:"SpacesCard-module__content--ilNdn",header:"SpacesCard-module__header--E99RF",textContent:"SpacesCard-module__textContent--vd_u3",title:"SpacesCard-module__title--SdBeC",description:"SpacesCard-module__description--g1HaX",metadata:"SpacesCard-module__metadata--sQAQe",metadataItem:"SpacesCard-module__metadataItem--wvRpg"};function i4({newSpace:e,contextMenu:t,copilotSpace:n}){if(e)return(0,s.jsxs)("div",{className:i3.container,children:[(0,s.jsx)(nf,{icon:"PlusIcon",color:"gray"}),(0,s.jsx)("div",{className:i3.content,children:(0,s.jsxs)("div",{className:i3.textContent,children:[(0,s.jsx)("h3",{className:i3.title,children:"Create a new space"}),(0,s.jsx)("p",{className:i3.description,children:"Add attachments, repositories, and more."})]})})]});let{name:a,description:i,updatedAt:r,iconType:o,iconColor:l}=n;return(0,s.jsxs)("div",{className:i3.container,children:[(0,s.jsxs)("div",{className:i3.header,children:[(0,s.jsx)(nf,{icon:o,color:l}),!!t&&t]}),(0,s.jsxs)("div",{className:i3.content,children:[(0,s.jsxs)("div",{className:i3.textContent,children:[(0,s.jsx)("h3",{className:i3.title,children:a}),(0,s.jsx)("p",{className:i3.description,children:i||"No description"})]}),(0,s.jsxs)("div",{className:i3.metadata,children:[(0,s.jsxs)("div",{className:i3.metadataItem,children:[(0,s.jsx)(L.ClockIcon,{}),(0,s.jsx)(av.A,{format:"micro",prefix:"",date:new Date(r)})]}),(0,s.jsxs)("div",{className:i3.metadataItem,children:[(0,s.jsx)(L.PaperclipIcon,{}),n.resources.length]})]})]})]})}try{i4.displayName||(i4.displayName="SpacesCard")}catch{}let i6={scrollContainer:"SpacesView-module__scrollContainer--Ok1Sb",container:"SpacesView-module__container--qY59X",banner:"SpacesView-module__banner--A6t_P",content:"SpacesView-module__content--q0brV"},i7="Create a unique version of Copilot based on a bundle of GitHub repos, files, and more.";function i8({copilotSpaces:e}){let t=(0,H.b)(),{ssoOrganizations:n}=(0,m.Pk)(),a=n.map(e=>e.login),[i,r]=(0,f.useState)(!1),o=void 0===e,l=()=>{r(!0)},c=e=>async()=>{await t.deleteCopilotSpace(e.id)},d=()=>{(0,_.BI)("dotcom_chat.activate",{target:"SIDEBAR_CUSTOM_COPILOT_SELECTED",mode:"immersive"})},u=e&&e.length>0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iO,{}),(0,s.jsx)("div",{className:i6.scrollContainer,children:(0,s.jsxs)("div",{className:i6.container,children:[n.length>0&&(0,s.jsx)("div",{className:i6.banner,children:(0,s.jsx)(aQ.x,{protectedOrgs:a,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`})}),(0,s.jsx)("div",{className:i6.content,children:o||u?(0,s.jsxs)(i1,{name:"Spaces",entity:"space",entityIcon:(0,s.jsx)(iq,{size:32}),description:i7,loading:o,includeSearch:!0,children:[(0,s.jsx)(i5,{title:"Create a new space",alwaysShow:!0,onClick:l,children:(0,s.jsx)(i4,{newSpace:!0})},"new-space"),e?.map?.(e=>s.jsx(i5,{title:e.name,onClick:d,href:I.Cb(e.id),menu:s.jsx(iL,{copilot:e,onDelete:c(e)}),children:s.jsx(i4,{copilotSpace:e})},e.id))]}):(0,s.jsx)(i2,{entity:"space",entityIcon:(0,s.jsx)(iq,{size:32}),emptyStateTitle:"Set context once. Chat again and again.",description:i7,onCreate:l})})]})}),i&&(0,s.jsx)(iA,{onClose:()=>r(!1)})]})}try{i8.displayName||(i8.displayName="SpacesView")}catch{}function i9(){let e=(0,m.Pk)(),{customCopilots:t}=e,{reloadQuota:n}=(0,b.x)(),a=(0,f.useRef)(null),{previewPaneOpen:i}=(0,v.xx)(),r=(0,c.nu)((0,m.A3)("activePlugin")),o=u.W.customCopilots&&(0,I.VR)();(0,I.rj)();let l=(0,f.useCallback)(()=>{window.setTimeout(()=>{a.current?.focus()},1),n()},[n,a]),d=(0,f.useRef)(null),[p,h]=(0,f.useState)(()=>!!d.current&&d.current.clientWidth<=1024),[g,x]=(0,f.useState)(()=>d.current?d.current.clientWidth>1024&&(S.J.getImmersiveSidebarCollapsedState()??!0):S.J.getImmersiveSidebarCollapsedState()??!0),[_,y]=(0,f.useState)(!1);(0,f.useEffect)(()=>{if(!d.current)return;let e=()=>{let e=d.current?.clientWidth;void 0!==e&&(e<=1024?(h(!0),x(!1)):(h(!1),y(!1),x(S.J.getImmersiveSidebarCollapsedState()??!0)))},t=new ResizeObserver(()=>{e()});return t.observe(d.current),e(),()=>{t.disconnect()}},[_]);let C=!p&&g,j=!!p&&_,N=(0,f.useRef)(null),[E,T]=(0,f.useState)(()=>!!N.current&&N.current.clientWidth<=1280);return(0,f.useEffect)(()=>{if(!N.current)return;let e=()=>{let e=N.current?.clientWidth;void 0!==e&&e>0&&T(e<=1280)},t=new ResizeObserver(e);return t.observe(N.current),e(),()=>t.disconnect()},[]),(0,s.jsxs)("div",{className:(0,w.$)(ij.container,E&&ij.fullscreenPreviewPane),"data-testid":"chat-layout","data-hpc":!0,ref:N,children:[(0,s.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),(0,s.jsxs)("div",{className:ij.left,ref:d,children:[(0,s.jsx)(iJ,{isVisible:j,isPinned:C,isFloating:p,onNewThread:l,onToggle:()=>{if(p)y(!_);else{let e=!g;x(e),S.J.setImmersiveSidebarCollapsedState(e)}}}),(0,s.jsx)("div",{className:ij.main,children:o?(0,s.jsx)(i8,{copilotSpaces:t}):r?.EmptyStateComponent&&null===e.selectedThreadID?(0,s.jsx)(r.EmptyStateComponent,{chatState:e,plugin:r}):(0,s.jsx)(iB,{isMobile:E,textAreaRef:a,isSidebarOpen:p?j:C},e.selectedThreadID)})]}),(0,s.jsx)("div",{className:(0,w.$)(ij.previewPane,i&&ij.active,r?.widePreviewArea&&ij.wide),children:(0,s.jsx)("div",{className:(0,w.$)(ij.viewer,r?.widePreviewArea&&ij.wide),children:(0,s.jsx)(to,{returnFocusRef:a})})})]})}try{i9.displayName||(i9.displayName="Layout")}catch{}let re=/\/copilot\/([^/]+)/;function rt(){let e=eE.fV.pathname,t=(0,c.qw)();return(0,f.useMemo)(()=>{let n=e.match(re);if(!n)return null;let[,a]=n;return a&&t.find(e=>e.id===a)?a:null},[e,t])}var rn=n(44492);function ra(){let e=(0,h.X)();return e?.copilotChatSettingEnabled?(0,s.jsx)(ri,{children:(0,s.jsx)(rr,{})}):(0,s.jsx)(N,{})}function ri({children:e}){let t=(0,h.X)(),n=tm(),a=rt(),{refs:i,topic:r}=(0,f.useMemo)(()=>{let e=t.requestedTopic;return(0,d.P)(e)?{refs:[(0,d.UU)(e)],topic:void 0}:{refs:[],topic:e}},[t.requestedTopic]),o=(0,f.useMemo)(()=>{let e=[];return u.W.pipesPlugin&&e.push(new p.N(t.apiURL,t.graphqlApiUrl,t.ssoOrganizations.map(e=>e.id),t.realIp)),e},[t.apiURL,t.graphqlApiUrl,t.realIp,t.ssoOrganizations]);return(0,s.jsx)(g.LB,{children:(0,s.jsx)(c.Hb,{plugins:o,children:(0,s.jsx)(m.Mj,{workerPath:t.searchWorkerFilePath,threadId:n,pluginId:a,refs:i,mode:"immersive",topic:r,ssoOrganizations:t.ssoOrganizations,copilotUpsellBannerDismissed:t.copilotUpsellBannerDismissed,copilotChatPayload:t,children:(0,s.jsx)(v.BH,{children:e})})})})}function rr(){return!function(){let e=tm(),t=(0,f.useRef)(!0),n=(0,f.useRef)(null),a=(0,H.b)(),{threads:i,selectedThreadID:r}=(0,m.Pk)(),o=tl();(0,f.useEffect)(()=>{o?a.fetchSharedThreadMessages(r):a.fetchMessages(r)},[]),(0,f.useEffect)(()=>{if(t.current){t.current=!1,n.current=e;return}if(n.current!==e){if(n.current=e,e===r)return;let t=e&&i?.get(e);a.selectThread(t||null,{includeThreads:!1,clearTopic:!0})}},[a,e,i,r])}(),function(){let{selectedThreadID:e}=(0,m.Pk)(),t=(0,rn.M)((0,e4.Zp)());(0,f.useEffect)(()=>{if(!e)return;let n=`${d.Jz}/c/${e}`,a=`${d.Jz}/share/${e}`,i=window.location.pathname;i.startsWith(n)||i.startsWith(a)||t.current(n)},[t,e])}(),function(){let e=(0,H.b)();(0,f.useEffect)(()=>{let t=()=>{window.location.href.includes("/r/")?(e.showTopicPicker(!1),e.selectThread(null)):window.location.href.includes("/c/")||(e.showTopicPicker(!0),e.selectThread(null))};return window.addEventListener("popstate",t),()=>{window.removeEventListener("popstate",t)}},[e])}(),!function(){let e=rt(),t=tm(),{activePlugin:n}=(0,m.bP)("activePlugin"),a=(0,H.b)();(0,f.useEffect)(()=>{t||(n??null)===e||a.selectPlugin(e)},[n,a,e,t])}(),(0,s.jsx)(i9,{})}try{ra.displayName||(ra.displayName="CopilotImmersive")}catch{}try{ri.displayName||(ri.displayName="CopilotImmersiveProviders")}catch{}try{rr.displayName||(rr.displayName="Immersive")}catch{}(0,o.o)("copilot-immersive-v1",()=>({App:l,routes:[(0,r.a)({path:"/copilot",Component:ra,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/c/:threadID",Component:ra,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/d/:docsetName",Component:ra}),(0,r.a)({path:"/copilot/r/:owner/:repository",Component:ra}),(0,r.a)({path:"/copilot/share/:threadID",Component:ra}),(0,r.a)({path:"/copilot/pipes",Component:ra,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/workbench",Component:ra,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,r.a)({path:"/copilot/spaces",Component:ra}),(0,r.a)({path:"/copilot/spaces/:spaceID",Component:ra})]}))},32837:(e,t,n)=>{n.d(t,{B:()=>i});var a=n(96540);function i(e){let[t,n]=(0,a.useState)(e);return[t,(0,a.useCallback)(()=>n(!0),[]),(0,a.useCallback)(()=>n(!1),[])]}},55184:(e,t,n)=>{n.d(t,{N:()=>PipesPlugin});var a,i=n(74848),r=n(21728),o=n(97891);let s={container:"PipesEmptyState-module__container--fKQnM",header:"PipesEmptyState-module__header--z0l3o",iconWrapper:"PipesEmptyState-module__iconWrapper--GDjQJ",description:"PipesEmptyState-module__description--rE6XX",command:"PipesEmptyState-module__command--sY8gl",input:"PipesEmptyState-module__input--EPsTb",historyContainer:"PipesEmptyState-module__historyContainer--gtt8f",historyTitle:"PipesEmptyState-module__historyTitle--EvKHC",list:"PipesEmptyState-module__list--CFkjj",listItem:"PipesEmptyState-module__listItem--kxs2z",listItemTextContent:"PipesEmptyState-module__listItemTextContent--wL9Wn",itemTitle:"PipesEmptyState-module__itemTitle--QdmrL",itemDescription:"PipesEmptyState-module__itemDescription--jclJB"};var l=n(87330),c=n(84976);let d=e=>{let t={nodes:new Map,edges:[],layers:[]};if(!e.nodes)return t;for(let n of e.nodes){if(!n?.id)continue;let e=n.id.split("|")[0]??n.id;t.nodes.set(e,n)}for(let n of e.nodes)for(let e of u(n)){let a=m(e);n?.id&&a&&t.edges.push({from:a,to:n.id})}let n=function(e){let t={},n=new Set,a=(i,r=0)=>{try{if(n.has(i))throw Error(`Potential cycle detected at node ${i}`);if(n.add(i),r>100)return!function(...e){}(`Maximum recursion depth reached for node ${i}`),0;if(void 0!==t[i])return t[i];let o=e.nodes.get(i);if(!o)return t[i]=0,0;let s=u(o);if(s&&0!==s.size){let e=[...s].map(e=>{let t=e.split("|")[0]??e;return a(t,r+1)});t[i]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===i).map(e=>e.to);0===n.length?t[i]=-1:t[i]=1}return t[i]}finally{n.delete(i)}};for(let[n]of e.nodes)if(!t[n])try{a(n)}catch(e){t[n]=0}let i=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=i);let r=[];for(let[n,a]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[a]||(r[a]=[]),r[a].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t};function u(e){return new Set((e.content.match(/{{([\w-]+)(?:\|([\w-]+))?}}/g)||[]).map(e=>e.replace(/[{}]/g,"")))}function m(e){return e.split("|")[0]}let p=(e,t)=>{if(!e||"object"!=typeof e||e?.doRemove||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:(e.type||"prompt").trim(),inputType:e.inputType||void 0,content:e.content||"",id:(e.id||"").trim(),doRemove:e.doRemove??!1};if("string"!=typeof n.content&&(n.content=""),"pipeline"===n.type){let e=t.find(e=>e.id===n.pipelineId);if(e){let t=n.pipelineInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.pipelineInputValues=e.nodes?.filter(e=>"text"===e.type).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},h=(e,t)=>({...e,nodes:(e.nodes||[]).map(e=>p(e,t)).filter(e=>null!==e)});function g(e){let t=d(e);return e.nodes.filter(e=>!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id))}var f=n(38621);let v={code:{color:"pink",contentFields:["content"],icon:f.CodeIcon,description:"Use classic code to process a node",label:"Code",featureFlag:"copilot_pipes_react_nodes",type:"code",outputLabel:"Code output"},"github-graphql":{contentFields:["content"],icon:f.MarkGithubIcon,description:"Retrieve data from GitHub",label:"GitHub GraphQL",color:"gray",featureFlag:"copilot_pipes_github_graphql_nodes",type:"github-graphql",outputLabel:"JSON"},pipeline:{contentFields:["content"],icon:f.GitPullRequestIcon,description:"Use an existing pipeline as a node",label:"Pipeline",color:"coral",featureFlag:"copilot_pipes_pipeline_nodes",type:"pipeline",outputLabel:"Pipeline output"},prompt:{contentFields:["content"],icon:f.CopilotIcon,description:"Use AI to process a node",label:"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown"},text:{contentFields:["content"],icon:f.TypographyIcon,description:"Single values as input for nodes",label:"Text",color:"blue",type:"text"},visualize:{contentFields:["content"],icon:f.GitBranchIcon,description:"Use HTML and CSS to view output",label:"Visualize",color:"olive",featureFlag:"copilot_pipes_react_nodes",type:"visualize"}},x=(e,t)=>{let n=v[e.type];if(!n)return e;let a={...e};for(let i of n.contentFields)e[i]&&(a[i]=function(e,t,n=!1){let a;for(;null!==(a=/{{([\w-]+)(?:\|([\w-]+))?}}/g.exec(e));){let i=a[1];if(!i||!Object.keys(t).includes(i))continue;let r=t[i],o="string"!=typeof r||n?JSON.stringify(r):r;e=e.replaceAll(a[0],o)}return e}(e[i],t,["code","visualize"].includes(e.type)));return a};async function _(e){return[{role:"user",content:`${e.content}

 Respond with just the content, no intro, no explanation, etc.`}]}function y(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function C(e,t){var n=y(e,t,"get");return n.get?n.get.call(e):n.value}function j(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function N(e,t,n){var a=y(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var b=new WeakMap,S=new WeakMap,I=new WeakMap;let NodeRunner=class NodeRunner{async run(e){switch(C(this,b).type){case"prompt":{let t=await _(C(this,b));return C(this,I).getChatCompletion(t,C(this,b).model,void 0,e)}case"github-graphql":return JSON.stringify(await C(this,S).getGraphQLResponse(C(this,b).content,e),null,2);default:return C(this,b).content}}constructor(e,t,n){j(this,b,{writable:!0,value:void 0}),j(this,S,{writable:!0,value:void 0}),j(this,I,{writable:!0,value:void 0}),N(this,b,e),N(this,S,t),N(this,I,n)}};function w(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function E(e,t){var n=w(e,t,"get");return n.get?n.get.call(e):n.value}function T(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function P(e,t,n){var a=w(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var k=new WeakMap,A=new WeakMap,L=new WeakMap,D=new WeakMap,O=new WeakMap,R=new WeakMap,B=new WeakMap,M=new WeakMap;let PipelineRunner=class PipelineRunner{async run(e){let t=g(E(this,D));if(0===t.length)throw Error("No output node");await Promise.all(t.map(t=>this.runNodeUnlessRunning(t,e)))}stop(e){E(this,M).abort(),e({type:"CANCEL_EXECUTION",iteration:E(this,O)})}isCancelled(){return E(this,M).signal.aborted}async runNodeUnlessRunning(e,t){let n=E(this,B).get(e.id);if(n)return n;let a=this.runNode(e,t);return E(this,B).set(e.id,a),a}async runNode(e,t){if(this.isCancelled())return null;let n=await E(this,k).getExecutionState(E(this,D).id,E(this,O)),a=n?.nodes[e.id]?.value;if(a)return a;t({type:"SET_PENDING",nodeId:e.id,pending:!0,iteration:E(this,O)});let i=[...new Set(E(this,R).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>E(this,D).nodes.find(t=>t.id===e)).filter(e=>!!e),r=await Promise.all(i.map(async e=>[e.id,await this.runNodeUnlessRunning(e,t)]));if(r.some(([e,t])=>null===t)||this.isCancelled())return null;let o=new NodeRunner(x(e,Object.fromEntries(r)),E(this,A),E(this,L));t({type:"SET_PENDING",nodeId:e.id,pending:!1,iteration:E(this,O)}),t({type:"SET_RUNNING",nodeId:e.id,running:!0,iteration:E(this,O)});try{let n=await o.run(E(this,M).signal);return this.isCancelled()||(t({type:"UPDATE_NODE_VALUE",pipelineId:E(this,D).id,nodeId:e.id,value:n,iteration:E(this,O)}),t({type:"SET_RUNNING",nodeId:e.id,running:!1,iteration:E(this,O)})),n}catch(n){return this.isCancelled()||t({type:"UPDATE_NODE_ERROR",pipelineId:E(this,D).id,nodeId:e.id,error:n instanceof Error?n.message:"string"==typeof n?n:"object"==typeof n?JSON.stringify(n):"",iteration:E(this,O)}),null}}constructor(e,t,n,a,i){T(this,k,{writable:!0,value:void 0}),T(this,A,{writable:!0,value:void 0}),T(this,L,{writable:!0,value:void 0}),T(this,D,{writable:!0,value:void 0}),T(this,O,{writable:!0,value:void 0}),T(this,R,{writable:!0,value:void 0}),T(this,B,{writable:!0,value:void 0}),T(this,M,{writable:!0,value:void 0}),P(this,k,n),P(this,A,a),P(this,L,i),P(this,D,e),P(this,O,t),P(this,R,d(e)),P(this,B,new Map),P(this,M,new AbortController)}};function U(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",involvedNodes:[e.id]}),"text"===e.type&&(t=t.concat(function(e){let t=[],n=e.inputType;if("object"!=typeof n||!n)return t.push({error:"inputType is required for text nodes",involvedNodes:[e.id]}),t;switch(n.type){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",involvedNodes:[e.id]}):t.push({error:"A select input must have options",involvedNodes:[e.id]});break;case"file":["pdf","video","image","audio","document","code","other"].includes(n.fileType)||t.push({error:`Invalid file type ${n.fileType}`,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",involvedNodes:[e.id]})}return t}(e))),t}(n));return t}(e),n=d(e);for(let a of n.edges){let n=e.nodes.find(e=>e.id===a.from),i=e.nodes.find(e=>e.id===a.to);n&&i||t.push({error:`Node ${a.to} references a nonexistent node {{${a.from}}}`,involvedNodes:[a.to]})}let a=function(e){let t=new Set,n=new Set,a=[],i=r=>{if(n.has(r)){let e=a.indexOf(r);return a.slice(e)}if(t.has(r))return null;for(let o of(t.add(r),n.add(r),a.push(r),e.edges))if(o.from===r){let e=i(o.to);if(e)return e}return n.delete(r),a.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=i(n.id);if(e)return e}return null}(n);if(a&&a.length>0){let e=[...a,a[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,involvedNodes:a})}let i=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],a=new Set,i=(t,n)=>{for(let r of(a.add(t),n.add(t),e.edges))r.from!==t||a.has(r.to)||i(r.to,n),r.to!==t||a.has(r.from)||i(r.from,n)};for(let e of t)if(!a.has(e.id)){let t=new Set;i(e.id,t),n.push(t)}if(n.length<=1)return[];let r=n.reduce((e,t)=>t.size>e.size?t:e,new Set),o=[];for(let e of t)r.has(e.id)||o.push(e.id);return o}(n);return i.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${i.join(", ")}`,involvedNodes:i}),t}function $(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function V(e,t){var n=$(e,t,"get");return n.get?n.get.call(e):n.value}function F(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function W(e,t,n){var a=$(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var z=new WeakMap,H=new WeakMap,G=new WeakMap,q=new WeakMap;let PipesService=class PipesService{async getGraphQLResponse(e){return V(this,H).getGraphQLResponse(e)}async getAllPipelineRecords(){return V(this,z).getAllPipelineRecords()}async getPipeline(e){return V(this,z).getPipeline(e)}async updatePipeline(e,t){return V(this,z).updatePipeline(e,t)}async deletePipeline(e){return V(this,z).deletePipeline(e)}async getExecutionState(e,t){return V(this,z).getExecutionState(e,t)}async updateExecutionState(e,t,n){return V(this,z).updateExecutionState(e,t,n)}async runPipeline(e,t,n){if(U(e).length>0)return;let a=new PipelineRunner(e,t,V(this,z),V(this,H),V(this,G)),i=`${e.id}:${t}`;V(this,q).set(i,a);try{return await a.run(n)}finally{V(this,q).delete(i)}}stopPipeline(e,t,n){let a=`${e}:${t}`,i=V(this,q).get(a);i&&(i.stop(n),V(this,q).delete(a))}constructor(e,t,n){F(this,z,{writable:!0,value:void 0}),F(this,H,{writable:!0,value:void 0}),F(this,G,{writable:!0,value:void 0}),F(this,q,{writable:!0,value:new Map}),W(this,z,e),W(this,H,t),W(this,G,n)}};let K="pipes";var Q=n(82610);let X=()=>{let e;let t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("svg",{"aria-label":"Loops Icon",width:"35",height:"15",viewBox:"0 0 35 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.1875 3.21429C5.8802 3.21429 3.9375 5.17331 3.9375 7.5C3.9375 9.82669 5.8802 11.7857 8.1875 11.7857C9.30351 11.7857 10.5717 11.2628 12.0658 10.227C13.1481 9.47666 14.2434 8.5341 15.3833 7.5C14.2434 6.4659 13.1481 5.52334 12.0658 4.77302C10.5717 3.73721 9.30351 3.21429 8.1875 3.21429ZM17.75 5.32376C16.4971 4.17999 15.1917 3.03949 13.8717 2.1243C12.1783 0.950293 10.259 0 8.1875 0C4.1198 0 0.75 3.39812 0.75 7.5C0.75 11.6019 4.1198 15 8.1875 15C10.259 15 12.1783 14.0496 13.8717 12.8758C15.1917 11.9606 16.4971 10.82 17.75 9.67624C19.0029 10.82 20.3083 11.9606 21.6283 12.8758C23.3218 14.0496 25.2411 15 27.3125 15C31.3802 15 34.75 11.6019 34.75 7.5C34.75 3.39812 31.3802 0 27.3125 0C25.2411 0 23.3218 0.950293 21.6283 2.1243C20.3083 3.03949 19.0029 4.17999 17.75 5.32376ZM20.1167 7.5C21.2566 8.5341 22.3519 9.47666 23.4342 10.227C24.9282 11.2628 26.1964 11.7857 27.3125 11.7857C29.6198 11.7857 31.5625 9.82669 31.5625 7.5C31.5625 5.17331 29.6198 3.21429 27.3125 3.21429C26.1964 3.21429 24.9282 3.73721 23.4342 4.77302C22.3519 5.52334 21.2566 6.4659 20.1167 7.5Z",fill:"#9198A1"})}),t[0]=e):e=t[0],e},J=()=>{let e;let t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("svg",{"aria-label":"Command",width:"8",height:"9",viewBox:"0 0 8 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.750781 8.00156L6.75078 0.00156248L7.55078 0.601562L1.55078 8.60156L0.750781 8.00156Z",fill:"currentColor"})}),t[0]=e):e=t[0],e},Y=()=>{let e;let t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("svg",{"aria-label":"Play",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M13.6977 5.38583L5.28195 0.559435C4.82655 0.296501 4.30969 0.158701 3.78382 0.160168C3.25795 0.161635 2.74189 0.302235 2.28795 0.567701C1.83402 0.833101 1.45842 1.21397 1.19929 1.67157C0.940219 2.12917 0.806819 2.64717 0.812685 3.17303V12.8607C0.812685 13.651 1.12662 14.4088 1.68535 14.9675C2.24415 15.5263 3.00202 15.8402 3.79222 15.8402C4.31529 15.8393 4.82902 15.7011 5.28195 15.4394L13.6977 10.613C14.1499 10.3513 14.5253 9.9753 14.7863 9.5227C15.0474 9.07003 15.1847 8.5567 15.1847 8.0343C15.1847 7.51183 15.0474 6.9985 14.7863 6.5459C14.5253 6.0933 14.1499 5.7173 13.6977 5.45557V5.38583ZM12.8265 9.03617L4.41075 13.9322C4.22215 14.0392 4.00902 14.0953 3.79222 14.0953C3.57535 14.0953 3.36229 14.0392 3.17362 13.9322C2.98555 13.8237 2.82935 13.6675 2.72075 13.4794C2.61222 13.2913 2.55509 13.0778 2.55509 12.8607V3.13817C2.55509 2.92097 2.61222 2.70763 2.72075 2.5195C2.82935 2.33143 2.98555 2.17523 3.17362 2.06663C3.36309 1.9613 3.57555 1.9045 3.79222 1.9011C4.00869 1.9055 4.22095 1.9623 4.41075 2.06663L12.8265 6.92783C13.0147 7.03643 13.1709 7.19263 13.2796 7.3807C13.3882 7.56877 13.4454 7.78223 13.4454 7.99943C13.4454 8.2167 13.3882 8.43003 13.2796 8.61817C13.1709 8.8063 13.0146 8.96243 12.8265 9.07097V9.03617Z",fill:"currentColor"})}),t[0]=e):e=t[0],e},Z=()=>{let e;let t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("svg",{"aria-label":"Alert",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M9.11713 1.41595C9.98012 1.41595 10.6797 2.11555 10.6797 2.97853V8.18712C10.6797 9.05011 9.98012 9.74969 9.11713 9.74969C8.25414 9.74969 7.55455 9.05011 7.55455 8.18712V2.97853C7.55455 2.11555 8.25414 1.41595 9.11713 1.41595ZM11.2006 13.9165C11.2006 15.0672 10.2678 16 9.11713 16C7.96648 16 7.03369 15.0672 7.03369 13.9165C7.03369 12.7659 7.96648 11.8332 9.11713 11.8332C10.2678 11.8332 11.2006 12.7659 11.2006 13.9165Z",fill:"currentColor"})}),t[0]=e):e=t[0],e};try{X.displayName||(X.displayName="LoopIcon")}catch{}try{J.displayName||(J.displayName="CommandSVG")}catch{}try{Y.displayName||(Y.displayName="PlaySVG")}catch{}try{Z.displayName||(Z.displayName="AlertIcon")}catch{}var ee=n(33513),et=n(7426),en=n(97286);function ea(e){return e.id===K&&"service"in e&&e.service instanceof PipesService}var ei=n(96540);function er(e){let t,n,a,l,c,d,u,m,p,h;let g=(0,r.c)(24),{chatState:f,plugin:v}=e;if(!v||!(v.id===K&&"service"in v&&v.service instanceof PipesService))throw Error("PipesEmptyState can only be used with a PipesPlugin");let{data:x}=function(e){let t,n,a,i;let o=(0,r.c)(8);return o[0]!==e?(t=["all-copilot-pipelines",e],n=async()=>{if(!e||!ea(e))return null;let t=e.service;return await t.getAllPipelineRecords()||[]},a=!!e&&ea(e),o[0]=e,o[1]=t,o[2]=n,o[3]=a):(t=o[1],n=o[2],a=o[3]),o[4]!==t||o[5]!==n||o[6]!==a?(i={queryKey:t,queryFn:n,enabled:a,refetchOnMount:!0},o[4]=t,o[5]=n,o[6]=a,o[7]=i):i=o[7],(0,en.I)(i)}(v);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[_,y]=(0,ei.useState)(t),C=(0,et.b)(),{threads:j,threadsLoading:N}=f;g[1]!==C?(n=async e=>{""!==e.trim()&&await C.sendChatMessage({content:e,references:[],thread:null})},g[1]=C,g[2]=n):n=g[2];let b=n;g[3]!==x||g[4]!==v||g[5]!==j||g[6]!==N?.state?(a=()=>{if(x?.length&&j&&N?.state==="loaded"){let e=new Set(j.keys()),t=x.filter(t=>e.has(t.threadID)),n=x.filter(t=>!e.has(t.threadID));for(let e of(y(t),n))v.service.deletePipeline(e.threadID)}},g[3]=x,g[4]=v,g[5]=j,g[6]=N?.state,g[7]=a):a=g[7];let S=x?.length;return g[8]!==x||g[9]!==v||g[10]!==S||g[11]!==j||g[12]!==N?(l=[x,S,v,j,N],g[8]=x,g[9]=v,g[10]=S,g[11]=j,g[12]=N,g[13]=l):l=g[13],(0,ei.useEffect)(a,l),g[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)("div",{className:s.iconWrapper,children:(0,i.jsx)(X,{})}),d=(0,i.jsx)("h2",{children:"Loops"}),g[14]=c,g[15]=d):(c=g[14],d=g[15]),g[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsxs)("div",{className:s.header,children:[c,d,(0,i.jsxs)("p",{className:s.description,children:["Step in to the future and automate your workflows with Copilot by describing them in natural language. Then run it from anywhere at any given time on GitHub by pressing"," ",(0,i.jsx)("span",{className:s.command,children:(0,i.jsx)(J,{})}),"."]}),(0,i.jsx)(o.h,{})]}),g[16]=u):u=g[16],g[17]!==b?(m=(0,i.jsx)("div",{className:s.input,children:(0,i.jsx)(ee.V,{hideAttachmentButton:!0,placeholder:"What would you like to automate?",size:"large",onSubmit:b})}),g[17]=b,g[18]=m):m=g[18],g[19]!==_?(p=_&&_.length>0&&(0,i.jsxs)("div",{className:s.historyContainer,children:[(0,i.jsx)("div",{className:s.historyTitle,children:"Your Loops"}),(0,i.jsx)("div",{className:s.list,children:_.map(eo)})]}),g[19]=_,g[20]=p):p=g[20],g[21]!==p||g[22]!==m?(h=(0,i.jsxs)("div",{className:s.container,children:[u,m,p]}),g[21]=p,g[22]=m,g[23]=h):h=g[23],h}function eo(e){return(0,i.jsxs)("div",{className:s.listItem,children:[(0,i.jsxs)("div",{className:s.listItemTextContent,children:[(0,i.jsx)("div",{className:s.itemTitle,children:e.pipeline.title}),(0,i.jsxs)("div",{className:s.itemDescription,children:[e?.pipeline?.nodes?.length," nodes"]})]}),(0,i.jsx)(c.N_,{to:`${Q.Jz}/c/${e.threadID}`,children:(0,i.jsx)(l.K,{icon:Y,"aria-label":"Open Loop",variant:"invisible",size:"small"})})]},e.threadID)}try{er.displayName||(er.displayName="PipesEmptyState")}catch{}var es=n(37304);let el={value:null,running:!1,pending:!1,progress:0},ec={executionState:{nodes:{},iteration:0},uiState:{focusedNodeId:null,hoveredNodeId:null},pipelineState:{pipelines:{},validationErrors:[],selectedPipelineId:null,isUpdating:!1,isLoading:!1}};function ed(e,t){return{...e,executionState:function(e,t){switch(t.type){case"RESTORE_EXECUTION_STATE":return{...t.executionState,nodes:Object.fromEntries(Object.entries(t.executionState.nodes).map(([e,t])=>[e,{...el,value:t.value,error:t.error}]))};case"CLEAR_NODE_RESULTS":{let n={...e.nodes};for(let e of t.nodeIds)delete n[e];return{...e,nodes:n}}case"SET_RUNNING":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??el,running:t.running}}};case"SET_PENDING":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??el,pending:t.pending}}};case"UPDATE_PROGRESS":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??el,progress:t.progress}}};case"UPDATE_NODE_VALUE":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??el,value:t.value}}};case"UPDATE_NODE_ERROR":if(t.iteration!==e.iteration)return e;return{...e,nodes:{...e.nodes,[t.nodeId]:{...e.nodes[t.nodeId]??el,error:t.error,value:null,running:!1}}};case"CLEAR_PENDING_NODES":if(t.iteration!==e.iteration)return e;return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(([e,t])=>[e,{...t,pending:!1}]))};case"CANCEL_EXECUTION":if(t.iteration!==e.iteration)return e;return{...e,nodes:Object.fromEntries(Object.entries(e.nodes).map(([e,t])=>[e,{...t,running:!1,pending:!1,progress:0}]))};case"INCREMENT_ITERATION":return{...e,iteration:e.iteration+1};default:return e}}(e.executionState,t),uiState:function(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SELECT_PIPELINE":return{focusedNodeId:null,hoveredNodeId:null};case"ADD_NODE_TO_PIPELINE":return{...e,focusedNodeId:t.node.id};case"REMOVE_NODE":if(e.focusedNodeId===t.nodeId)return{...e,focusedNodeId:null};return e;default:return e}}(e.uiState,t),pipelineState:function(e,t){switch(t.type){case"INITIALIZE_PIPELINES":{let n=t.pipelines.find(t=>t.id===e.selectedPipelineId),a=n?U(n):[];return{...e,validationErrors:a,pipelines:t.pipelines.reduce((e,t)=>({...e,[t.id]:t}),{}),isLoading:!1}}case"SELECT_PIPELINE":{if(null===t.pipelineId)return{...e,selectedPipelineId:null};let n=e.pipelines[t.pipelineId];if(!n)return e;return{...e,selectedPipelineId:t.pipelineId,validationErrors:U(n)}}case"SET_IS_UPDATING":return{...e,isUpdating:t.updating};case"ADD_PIPELINE":return{...e,pipelines:{...e.pipelines,[t.pipeline.id]:t.pipeline},selectedPipelineId:t.pipeline.id,validationErrors:U(t.pipeline)};case"REMOVE_PIPELINE":{let n={...e.pipelines};delete n[t.pipelineId];let a=e.selectedPipelineId===t.pipelineId?e.pipelines[0]?.id??null:e.selectedPipelineId,i=a?e.pipelines[a]:null,r=i?U(i):[];return{...e,pipelines:n,validationErrors:r,selectedPipelineId:a}}case"UPDATE_PIPELINE":case"ADD_NODE_TO_PIPELINE":case"UPDATE_PIPELINE_NODE":case"UPDATE_NODE":case"UPDATE_NODE_CONTENT":case"REMOVE_NODE":{let n=e.pipelines[t.pipelineId];if(!n)return e;let a=function(e,t){switch(t.type){case"ADD_NODE_TO_PIPELINE":return{...e,nodes:[...e.nodes??[],t.node]};case"REMOVE_NODE":return{...e,nodes:e.nodes.filter(e=>e.id!==t.nodeId)};case"UPDATE_NODE":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return{...e,nodes:[...e.nodes,{id:t.nodeId,type:"text",title:"",description:"",content:"",...t.updates}]};if(t.updates.doRemove)return{...e,nodes:[...e.nodes.slice(0,n),...e.nodes.slice(n+1)]};{let a=e.nodes[n];return{...e,nodes:[...e.nodes.slice(0,n),{...a,...t.updates},...e.nodes.slice(n+1)]}}}case"UPDATE_PIPELINE_NODE":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return e;let a=p({...e.nodes[n],...t.updates},[]);if(!a)return e;return{...e,nodes:[...e.nodes.slice(0,n),a,...e.nodes.slice(n+1)]}}case"UPDATE_NODE_CONTENT":{let n=e.nodes.findIndex(e=>e.id===t.nodeId);if(-1===n)return e;let a=e.nodes[n];return{...e,nodes:[...e.nodes.slice(0,n),{...a,content:t.content},...e.nodes.slice(n+1)]}}case"UPDATE_PIPELINE":return h({...e,...t.updates},[]);default:return e}}(n,t),i=U(a);return{...e,validationErrors:i,pipelines:{...e.pipelines,[n.id]:a}}}default:return e}}(e.pipelineState,t)}}var eu=n(10124),em=n(38568);let ep=(0,ei.createContext)(new es.Lj(ec)),eh=(0,ei.createContext)(()=>{});function eg({children:e}){let[t,n]=(0,ei.useReducer)(ed,ec),a=(0,eu.AI)(t);(0,em.N)(()=>{a.value=t},[t,a]);let r=(0,ei.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(ep.Provider,{value:a,children:(0,i.jsx)(eh.Provider,{value:r,children:e})})}function ef(e){let t=(0,ei.useContext)(ep);if(!t)throw Error("usePipesStateLens can only be used inside a PipesProvider");let n=(0,eu.Sk)(t,e);return(0,eu.HN)(n)}function ev(){let e;let t=(0,r.c)(2),n=(0,ei.useContext)(ep);if(!n)throw Error("useGetPipesState can only be used inside a PipesProvider");return t[0]!==n.value?(e=()=>n.value,t[0]=n.value,t[1]=e):e=t[1],e}function ex(){return(0,ei.useContext)(eh)}try{ep.displayName||(ep.displayName="PipesStateContext")}catch{}try{eh.displayName||(eh.displayName="PipesDispatchContext")}catch{}try{eg.displayName||(eg.displayName="PipesStateProvider")}catch{}function e_(e){let t;if(e.pipelineState.selectedPipelineId&&(t=e.pipelineState.pipelines[e.pipelineState.selectedPipelineId]))return t;let[n]=Object.values(e.pipelineState.pipelines);return n}let ey=e=>t=>{let n=e_(t);return n?.nodes.find(t=>t.id===e)};function eC(e){return ef(t=>ey(e)(t)?.type??"text")}function ej(e){return ef(t=>!!t.pipelineState.validationErrors.find(t=>!e||t.involvedNodes.includes(e)))}let eN=e=>t=>t.executionState.nodes[e];function eb(){let e=ef(e_);if(!e)throw Error("useCurrentPipeline should only be used in a context where we are guaranteed to have a pipeline");return e}function eS(e){return ef(t=>eN(e)(t)?.value??null)}function eI(e){return ef(t=>eN(e)(t)?.error)}function ew(e){return ef(t=>eN(e)(t)?.running??!1)}let eE={container:"PillBoxNode-module__container--U_nbs",textNode:"PillBoxNode-module__textNode--ttDcG",node:"PillBoxNode-module__node--xYGr1",mainContent:"PillBoxNode-module__mainContent--HNIsg",nodeIdBox:"PillBoxNode-module__nodeIdBox--kFePg",headerContainer:"PillBoxNode-module__headerContainer--eplc6",nodeMarker:"PillBoxNode-module__nodeMarker--C4_ch",nodeConnection:"PillBoxNode-module__nodeConnection--tCwm1"};var eT=n(34164);let eP={container:"PillBoxNodeHeader-module__container--rcEoG",mainContent:"PillBoxNodeHeader-module__mainContent--KlYdi",isLoading:"PillBoxNodeHeader-module__isLoading--Hf_n4",titleAndDescriptionContainer:"PillBoxNodeHeader-module__titleAndDescriptionContainer--pWbUU",collapsed:"PillBoxNodeHeader-module__collapsed--IqkQg",titleContainer:"PillBoxNodeHeader-module__titleContainer--ddXxm",title:"PillBoxNodeHeader-module__title--BgQFs",descriptionContainer:"PillBoxNodeHeader-module__descriptionContainer--BxTJE",description:"PillBoxNodeHeader-module__description--cq21N",executeButton:"PillBoxNodeHeader-module__executeButton--BfvMr"};function ek(e){let t,n,a;let o=(0,r.c)(13),{value:s,isLoading:c,onClick:d,onStop:u,variant:m,disabled:p}=e;o[0]!==c||o[1]!==s?(t=()=>c?"Loading...":s?"Run node":"Run loop",o[0]=c,o[1]=s,o[2]=t):t=o[2];let h=t(),g=c?f.SquareFillIcon:f.SyncIcon;o[3]!==c||o[4]!==d||o[5]!==u?(n=e=>{c?u?.(e):d(e)},o[3]=c,o[4]=d,o[5]=u,o[6]=n):n=o[6];let v=c?"danger":void 0===m?"invisible":m;return o[7]!==p||o[8]!==h||o[9]!==g||o[10]!==n||o[11]!==v?(a=(0,i.jsx)(l.K,{disabled:p,"aria-label":h,icon:g,onClick:n,variant:v}),o[7]=p,o[8]=h,o[9]=g,o[10]=n,o[11]=v,o[12]=a):a=o[12],a}try{ek.displayName||(ek.displayName="ExecuteButton")}catch{}let eA={view:"EditableText-module__view--dZPEk",input:"EditableText-module__input--namFN"};var eL=n(67138);function eD(e){let t,n,a;let o=(0,r.c)(14),{value:s,className:l,isEditable:c,onChange:d,onClick:u}=e;o[0]!==d?(t=e=>{d(e.target.value)},o[0]=d,o[1]=t):t=o[1];let m=t;if(!(void 0===c||c)){let e,t;return o[2]!==l?(e=(0,eT.$)(eA.view,l),o[2]=l,o[3]=e):e=o[3],o[4]!==e||o[5]!==s?(t=(0,i.jsx)("div",{className:e,children:s}),o[4]=e,o[5]=s,o[6]=t):t=o[6],t}return o[7]!==l?(n=(0,eT.$)(eA.input,l),o[7]=l,o[8]=n):n=o[8],o[9]!==m||o[10]!==u||o[11]!==n||o[12]!==s?(a=(0,i.jsx)(eL.A,{type:"text",value:s,onChange:m,onClick:u,className:n}),o[9]=m,o[10]=u,o[11]=n,o[12]=s,o[13]=a):a=o[13],a}try{eD.displayName||(eD.displayName="EditableText")}catch{}let eO={iconContainer:"NodeType-module__iconContainer--YwM4d",labelContainer:"NodeType-module__labelContainer--wPl1l",auburn:"NodeType-module__auburn--ykrSg",fgColor:"NodeType-module__fgColor--egA2H",bgColor:"NodeType-module__bgColor--ziCuu",blue:"NodeType-module__blue--IP2rF",brown:"NodeType-module__brown--qD7by",coral:"NodeType-module__coral--BWGun",cyan:"NodeType-module__cyan--rsENu",gray:"NodeType-module__gray--syb5t",green:"NodeType-module__green--TiQzW",indigo:"NodeType-module__indigo--cMQEy",lemon:"NodeType-module__lemon--a__yN",lime:"NodeType-module__lime--ocC1E",olive:"NodeType-module__olive--MXGuK",orange:"NodeType-module__orange--I5VrS",pine:"NodeType-module__pine--RuDZv",pink:"NodeType-module__pink--qQyFH",plum:"NodeType-module__plum--juSub",purple:"NodeType-module__purple--WndW0",red:"NodeType-module__red--acPxL",teal:"NodeType-module__teal--DEg4g",yellow:"NodeType-module__yellow--L6k2T"};function eR(e){let t,n,a,o;let s=(0,r.c)(11),{type:l,size:c}=e,d=void 0===c?"medium":c,u=v[l],m=u?.color,p=u?.icon,h="small"===d?10:"large"===d?24:16;s[0]!==h?(t={height:h,width:h},s[0]=h,s[1]=t):t=s[1];let g=m&&eO[m];return s[2]!==g?(n=(0,eT.$)(g,eO.fgColor),s[2]=g,s[3]=n):n=s[3],s[4]!==p||s[5]!==h||s[6]!==n?(a=(0,i.jsx)(p,{size:h,className:n}),s[4]=p,s[5]=h,s[6]=n,s[7]=a):a=s[7],s[8]!==t||s[9]!==a?(o=(0,i.jsx)("div",{className:eO.iconContainer,style:t,children:a}),s[8]=t,s[9]=a,s[10]=o):o=s[10],o}function eB(e){let t,n;let a=(0,r.c)(5),{type:o}=e,s=v[o],l=s?.color,c=s?.label,d=l&&eO[l];return a[0]!==d?(t=(0,eT.$)(eO.labelContainer,eO.fgColor,eO.bgColor,d),a[0]=d,a[1]=t):t=a[1],a[2]!==c||a[3]!==t?(n=(0,i.jsx)("div",{className:t,children:c}),a[2]=c,a[3]=t,a[4]=n):n=a[4],n}try{eR.displayName||(eR.displayName="NodeType")}catch{}try{eB.displayName||(eB.displayName="NodeLabel")}catch{}function eM(e){let t,n,a,o,s,l,c,d,u,m,p,h;let g=(0,r.c)(39),{isCollapsed:f,nodeId:v,onNodeUpdate:x,onStop:_,onToggleExpand:y,onUpdate:C}=e,j=eS(v),N=ew(v),b=ef(ey(v));if(!b)return null;g[0]!==f||g[1]!==y?(t=()=>y(!f),g[0]=f,g[1]=y,g[2]=t):t=g[2];let S=N&&eP.isLoading;g[3]!==S?(n=(0,eT.$)(eP.mainContent,S),g[3]=S,g[4]=n):n=g[4],g[5]!==b.type?(a=(0,i.jsx)(eR,{type:b.type}),g[5]=b.type,g[6]=a):a=g[6];let I=f&&eP.collapsed;g[7]!==I?(o=(0,eT.$)(eP.titleAndDescriptionContainer,I),g[7]=I,g[8]=o):o=g[8],g[9]!==C?(s=e=>{C({title:e})},g[9]=C,g[10]=s):s=g[10];let w=!f;g[11]!==b.title||g[12]!==s||g[13]!==w?(l=(0,i.jsx)("div",{className:eP.titleContainer,children:(0,i.jsx)(eD,{className:eP.title,value:b.title,onChange:s,onClick:e$,isEditable:w})}),g[11]=b.title,g[12]=s,g[13]=w,g[14]=l):l=g[14],g[15]!==C?(c=e=>{C({description:e})},g[15]=C,g[16]=c):c=g[16];let E=!f;return g[17]!==b.description||g[18]!==c||g[19]!==E?(d=(0,i.jsx)("div",{className:eP.descriptionContainer,children:(0,i.jsx)(eD,{className:eP.description,value:b.description,onChange:c,onClick:eU,isEditable:E})}),g[17]=b.description,g[18]=c,g[19]=E,g[20]=d):d=g[20],g[21]!==d||g[22]!==o||g[23]!==l?(u=(0,i.jsxs)("div",{className:o,children:[l,d]}),g[21]=d,g[22]=o,g[23]=l,g[24]=u):u=g[24],g[25]!==N||g[26]!==b.type||g[27]!==x||g[28]!==_||g[29]!==j?(m=["prompt","code","pdf","pipeline","github-graphql"].includes(b.type)&&(0,i.jsx)(ek,{onClick:e=>{e.stopPropagation(),x()},onStop:e=>{e.stopPropagation(),_(e)},isLoading:N,value:j,className:eP.executeButton}),g[25]=N,g[26]=b.type,g[27]=x,g[28]=_,g[29]=j,g[30]=m):m=g[30],g[31]!==u||g[32]!==m||g[33]!==n||g[34]!==a?(p=(0,i.jsxs)("div",{className:n,children:[a,u,m]}),g[31]=u,g[32]=m,g[33]=n,g[34]=a,g[35]=p):p=g[35],g[36]!==t||g[37]!==p?(h=(0,i.jsx)("div",{className:eP.container,onClick:t,children:p}),g[36]=t,g[37]=p,g[38]=h):h=g[38],h}function eU(e){return e.stopPropagation()}function e$(e){return e.stopPropagation()}try{eM.displayName||(eM.displayName="PillBoxNodeHeader")}catch{}var eV=n(64542),eF=n(35642);let eW={container:"ExpandedPillBoxContent-module__container--tVc8Y",innerContainer:"ExpandedPillBoxContent-module__innerContainer--dqR4u",nodeContent:"ExpandedPillBoxContent-module__nodeContent--eod9o",divider:"ExpandedPillBoxContent-module__divider--SW_Vg",outputContainer:"ExpandedPillBoxContent-module__outputContainer--xs5q6",loading:"ExpandedPillBoxContent-module__loading--wPt8F",errorContainer:"ExpandedPillBoxContent-module__errorContainer--sPDDe",errorNotice:"ExpandedPillBoxContent-module__errorNotice--RM3rl",errorIcon:"ExpandedPillBoxContent-module__errorIcon--utMqB",errorText:"ExpandedPillBoxContent-module__errorText--_kZYq",nodeValue:"ExpandedPillBoxContent-module__nodeValue--DHojA",output:"ExpandedPillBoxContent-module__output--g9TNs",executeButton:"ExpandedPillBoxContent-module__executeButton--sLTeI"},ez={container:"NodeContent-module__container--xY0B3",groupTitle:"NodeContent-module__groupTitle--OezaT",nodeModel:"NodeContent-module__nodeModel--HZrOE",nodeInput:"NodeContent-module__nodeInput--myPJN",header:"NodeContent-module__header--PhZuU",actions:"NodeContent-module__actions--AS7T_"};var eH=n(42252),eG=n(55847),eq=n(80938);let eK=(0,ei.createContext)(null);function eQ(e){let t,n,a;let o=(0,r.c)(8),{availableModels:s,closePreviewPane:l,openPreviewPane:c,sendChatMessage:d,children:u}=e;return o[0]!==s||o[1]!==l||o[2]!==c||o[3]!==d?(n={availableModels:s,closePreviewPane:l,openPreviewPane:c,sendChatMessage:d},o[0]=s,o[1]=l,o[2]=c,o[3]=d,o[4]=n):n=o[4],t=n,o[5]!==u||o[6]!==t?(a=(0,i.jsx)(eK.Provider,{value:t,children:u}),o[5]=u,o[6]=t,o[7]=a):a=o[7],a}function eX(){let e=(0,ei.useContext)(eK);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{eK.displayName||(eK.displayName="AppContext")}catch{}try{eQ.displayName||(eQ.displayName="AppContextProvider")}catch{}function eJ(e){let t,n,a;let o=(0,r.c)(9),{onUpdateModel:s,selectedModelName:l}=e,{availableModels:c}=eX();o[0]!==c||o[1]!==l?(t=c?.find(e=>e.id===l),o[0]=c,o[1]=l,o[2]=t):t=o[2];let d=t;o[3]!==s?(n=e=>{s(e.id)},o[3]=s,o[4]=n):n=o[4];let u=n;return c&&d?(o[5]!==c||o[6]!==u||o[7]!==d?(a=(0,i.jsx)(eq.k,{models:c,selectedModel:d,onModelPicked:u,disabled:!1,type:"global",variant:"default"}),o[5]=c,o[6]=u,o[7]=d,o[8]=a):a=o[8],a):null}try{eJ.displayName||(eJ.displayName="ModelPicker")}catch{}var eY=n(27297),eZ=n(34225);let e0={container:"ContentEditor-module__container--iTuJD",cmContainer:"ContentEditor-module__cmContainer--tBqwf"},e1=n(24774).Lz.theme({".cm-content":{fontSize:"var(--text-body-size-small, 12px) !important",lineHeight:"18px !important"},".cm-gutterElement":{fontSize:"var(--text-body-size-small, 12px) !important"}}),e2=e=>{let t,n,a,o,s,l,c;let d=(0,r.c)(18),{className:u,content:m,onUpdate:p,placeholder:h,extensions:g,inputLabelId:f}=e,v=void 0===h?"Enter a prompt":h;return d[0]!==u?(t=(0,eT.$)(e0.container,u),d[0]=u,d[1]=t):t=d[1],d[2]!==g?(n=g??[],d[2]=g,d[3]=n):n=d[3],d[4]!==n?(a=[e1,...n],d[4]=n,d[5]=a):a=d[5],d[6]!==p?(o=e=>p?.(e),d[6]=p,d[7]=o):o=d[7],d[8]===Symbol.for("react.memo_cache_sentinel")?(s={indentUnit:2,indentWithTabs:!1,lineWrapping:!0},d[8]=s):s=d[8],d[9]!==m||d[10]!==f||d[11]!==v||d[12]!==a||d[13]!==o?(l=(0,i.jsx)(eZ.default,{ariaLabelledBy:f,containerClassName:e0.cmContainer,extensions:a,height:"100%",hideHelp:!0,onChange:o,placeholder:v,spacing:s,value:m}),d[9]=m,d[10]=f,d[11]=v,d[12]=a,d[13]=o,d[14]=l):l=d[14],d[15]!==t||d[16]!==l?(c=(0,i.jsx)("form",{className:t,children:l}),d[15]=t,d[16]=l,d[17]=c):c=d[17],c};try{e2.displayName||(e2.displayName="ContentEditor")}catch{}var e5=n(47404);async function e3(e,t,n){let a=e.matchBefore(/@\w*/),i=e.matchBefore(/\{\{\w*/),r=a||i;if(!r||r.from===r.to&&!e.explicit)return null;let o=t(),s=a?r.text.slice(1):r.text.slice(2),l=o.filter(e=>e.id.toLowerCase().includes(s.toLowerCase())&&e.id!==n).map(e=>({label:e.title,detail:e.id,apply:`{{${e.id}}}`,boost:1,type:"variable"}));return{from:r.from,options:l,filter:!1}}let e4=e=>{let t,n,a,o,s;let l=(0,r.c)(17),{className:c,content:d,onUpdate:u,placeholder:m,extensions:p,nodeId:h,inputLabelId:g}=e,f=void 0===m?"Enter a prompt":m,v=ef(e6);if(l[0]!==v?(t=()=>v,l[0]=v,l[1]=t):t=l[1],l[2]!==h||l[3]!==t){var x;x=t,n=[(0,e5.yU)({override:[async e=>e3(e,x,h)],icons:!1,defaultKeymap:!0})],l[2]=h,l[3]=t,l[4]=n}else n=l[4];let _=n;l[5]!==p?(a=p??[],l[5]=p,l[6]=a):a=l[6],l[7]!==_||l[8]!==a?(o=[...a,_],l[7]=_,l[8]=a,l[9]=o):o=l[9];let y=o;return l[10]!==y||l[11]!==c||l[12]!==d||l[13]!==g||l[14]!==u||l[15]!==f?(s=(0,i.jsx)(e2,{className:c,content:d,onUpdate:u,placeholder:f,extensions:y,inputLabelId:g}),l[10]=y,l[11]=c,l[12]=d,l[13]=g,l[14]=u,l[15]=f,l[16]=s):s=l[16],s};try{e4.displayName||(e4.displayName="ContentEditorWithAutocomplete")}catch{}function e6(e){return e_(e)?.nodes??[]}let e7=({className:e,content:t,onUpdate:a,nodeId:r,inputLabelId:o})=>{let[s,l]=(0,ei.useState)();return(0,ei.useEffect)(()=>{(async()=>{let{graphql:e}=await Promise.all([n.e("vendors-node_modules_vscode-languageserver-types_lib_esm_main_js"),n.e("vendors-node_modules_codemirror_lint_dist_index_js"),n.e("vendors-node_modules_cm6-graphql_dist_index_js")]).then(n.bind(n,1904));l([(0,e5.yU)(),e()])})()},[]),(0,i.jsx)(e4,{className:e,content:t,extensions:s,inputLabelId:o,nodeId:r,onUpdate:a,placeholder:"Enter a GraphQL query"})};try{e7.displayName||(e7.displayName="GraphQLContentEditor")}catch{}var e8=n(65607),e9=n(24743);let te={rangeValue:"NodeInput-module__rangeValue--jF9D8",rangeContainer:"NodeInput-module__rangeContainer--XWWkV",rangeLabels:"NodeInput-module__rangeLabels--Ql0V8",rangeLabel:"NodeInput-module__rangeLabel--h0PRb",booleanContainer:"NodeInput-module__booleanContainer--nl89V",fileContainer:"NodeInput-module__fileContainer--HDbuc"},tt=e=>{let t=(0,r.c)(51),{nodeId:n,onChange:a,className:o,inputLabelId:s}=e,l=ef(ey(n));if(!l||"text"!==l.type)return null;switch(l.inputType.type){case"range":{let e,n,r,s,c,d,u;t[0]!==l.content?(e=(0,i.jsx)("div",{className:te.rangeValue,children:l.content}),t[0]=l.content,t[1]=e):e=t[1];let m=l.content||"0";return t[2]!==a?(n=e=>a(e.target.value),t[2]=a,t[3]=n):n=t[3],t[4]!==o||t[5]!==l.inputType.max||t[6]!==l.inputType.min||t[7]!==m||t[8]!==n?(r=(0,i.jsx)("div",{className:te.rangeContainer,children:(0,i.jsx)("input",{type:"range",value:m,min:l.inputType.min,max:l.inputType.max,onChange:n,className:o})}),t[4]=o,t[5]=l.inputType.max,t[6]=l.inputType.min,t[7]=m,t[8]=n,t[9]=r):r=t[9],t[10]!==l.inputType.min?(s=(0,i.jsx)("div",{className:te.rangeLabel,children:l.inputType.min}),t[10]=l.inputType.min,t[11]=s):s=t[11],t[12]!==l.inputType.max?(c=(0,i.jsx)("div",{className:te.rangeLabel,children:l.inputType.max}),t[12]=l.inputType.max,t[13]=c):c=t[13],t[14]!==s||t[15]!==c?(d=(0,i.jsxs)("div",{className:te.rangeLabels,children:[s,c]}),t[14]=s,t[15]=c,t[16]=d):d=t[16],t[17]!==e||t[18]!==r||t[19]!==d?(u=(0,i.jsxs)("div",{children:[e,r,d]}),t[17]=e,t[18]=r,t[19]=d,t[20]=u):u=t[20],u}case"boolean":{let e,n;let r="true"===l.content;return t[21]!==a?(e=e=>a(e.target.checked.toString()),t[21]=a,t[22]=e):e=t[22],t[23]!==o||t[24]!==r||t[25]!==e?(n=(0,i.jsx)("div",{className:te.booleanContainer,children:(0,i.jsx)(e8.A,{checked:r,onChange:e,className:o})}),t[23]=o,t[24]=r,t[25]=e,t[26]=n):n=t[26],n}case"select":{let e,n,r;return t[27]!==a?(e=e=>a(e.target.value),t[27]=a,t[28]=e):e=t[28],t[29]!==l.inputType.options?(n=l.inputType.options?.map(tn),t[29]=l.inputType.options,t[30]=n):n=t[30],t[31]!==o||t[32]!==l.content||t[33]!==e||t[34]!==n?(r=(0,i.jsx)("div",{children:(0,i.jsx)(e9.A,{value:l.content,onChange:e,className:o,children:n})}),t[31]=o,t[32]=l.content,t[33]=e,t[34]=n,t[35]=r):r=t[35],r}case"file":{let e,n,r,s;let c=l.content;return t[36]!==l.inputType.fileType?(e=function(e){switch(e){case"pdf":return".pdf";case"image":return"image/*";case"video":return"video/*";case"audio":return"audio/*";case"document":return".doc,.docx,.txt,.rtf";case"code":return".js,.jsx,.ts,.tsx,.py,.java,.cpp,.c,.h,.cs";default:return"*/*"}}(l.inputType.fileType),t[36]=l.inputType.fileType,t[37]=e):e=t[37],t[38]!==a?(n=e=>{let t=e.target.files?.[0];t&&a(t.name)},t[38]=a,t[39]=n):n=t[39],t[40]!==o?(r=(0,eT.$)(o,te.fileContainer),t[40]=o,t[41]=r):r=t[41],t[42]!==l.content||t[43]!==e||t[44]!==n||t[45]!==r?(s=(0,i.jsx)("div",{children:(0,i.jsx)(eL.A,{type:"file",value:c,accept:e,onChange:n,className:r})}),t[42]=l.content,t[43]=e,t[44]=n,t[45]=r,t[46]=s):s=t[46],s}default:{let e;return t[47]!==s||t[48]!==l.content||t[49]!==a?(e=(0,i.jsx)(e2,{content:l.content,inputLabelId:s,onUpdate:a,placeholder:"Enter a value"}),t[47]=s,t[48]=l.content,t[49]=a,t[50]=e):e=t[50],e}}};try{tt.displayName||(tt.displayName="NodeInput")}catch{}function tn(e){return(0,i.jsx)(e9.A.Option,{value:e,children:e},e)}var ta=n(26514);function ti(e){let t,n,a,o,s,l;let c=(0,r.c)(16),{additionalFields:d,content:u,contentEditor:m,children:p,inputLabelId:h}=e;return c[0]!==h?(t=(0,i.jsx)("div",{className:ez.groupTitle,id:h,children:"Input"}),c[0]=h,c[1]=t):t=c[1],c[2]!==u?(n=u?u.toString():"",c[2]=u,c[3]=n):n=c[3],c[4]!==n?(a=(0,i.jsx)(ta.T,{icon:f.CopyIcon,variant:"invisible",ariaLabel:"Copy input",textToCopy:n}),c[4]=n,c[5]=a):a=c[5],c[6]!==t||c[7]!==a?(o=(0,i.jsxs)("div",{className:ez.header,children:[t,a]}),c[6]=t,c[7]=a,c[8]=o):o=c[8],c[9]!==p||c[10]!==m||c[11]!==o?(s=(0,i.jsxs)("div",{className:ez.nodeInput,children:[o,m,p]}),c[9]=p,c[10]=m,c[11]=o,c[12]=s):s=c[12],c[13]!==d||c[14]!==s?(l=(0,i.jsxs)("div",{className:ez.container,children:[d,s]}),c[13]=d,c[14]=s,c[15]=l):l=c[15],l}try{ti.displayName||(ti.displayName="NodeContentLayout")}catch{}function tr(e){let t=(0,r.c)(49),{nodeId:n,onUpdate:a,onToggleContent:o}=e,s=ef(ey(n)),l=ef(e=>ey(n)(e)?.content??""),c=(0,eH.S)(l),[d,u]=(0,ei.useState)(l),m=(0,ei.useId)();if(l!==c&&l!==d&&u(l),!s)return null;switch(s.type){case"pipeline":default:return null;case"github-graphql":{let e,r,o;t[0]!==a?(e=e=>a({content:e}),t[0]=a,t[1]=e):e=t[1],t[2]!==m||t[3]!==l||t[4]!==n||t[5]!==e?(r=(0,i.jsx)(e7,{content:l,inputLabelId:m,nodeId:n,onUpdate:e}),t[2]=m,t[3]=l,t[4]=n,t[5]=e,t[6]=r):r=t[6];let s=r;return t[7]!==d||t[8]!==s||t[9]!==m?(o=(0,i.jsx)(ti,{content:d,contentEditor:s,inputLabelId:m}),t[7]=d,t[8]=s,t[9]=m,t[10]=o):o=t[10],o}case"text":{let e,r,o;t[11]!==a?(e=e=>a({content:e}),t[11]=a,t[12]=e):e=t[12],t[13]!==m||t[14]!==n||t[15]!==e?(r=(0,i.jsx)(tt,{nodeId:n,onChange:e,className:ez.nodeInput,inputLabelId:m}),t[13]=m,t[14]=n,t[15]=e,t[16]=r):r=t[16];let s=r;return t[17]!==d||t[18]!==s||t[19]!==m?(o=(0,i.jsx)(ti,{content:d,contentEditor:s,inputLabelId:m}),t[17]=d,t[18]=s,t[19]=m,t[20]=o):o=t[20],o}case"prompt":{let e,r,c,p,h,g,f,v,x;let _=eY.UB.id;t[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:ez.groupTitle,children:"Model"}),t[21]=e):e=t[21];let y=s.model??_;t[22]!==s||t[23]!==a?(r=e=>a({...s,model:e}),t[22]=s,t[23]=a,t[24]=r):r=t[24],t[25]!==y||t[26]!==r?(c=(0,i.jsxs)("div",{className:ez.nodeModel,children:[e,(0,i.jsx)("div",{children:(0,i.jsx)(eJ,{selectedModelName:y,onUpdateModel:r})})]}),t[25]=y,t[26]=r,t[27]=c):c=t[27];let C=c;t[28]===Symbol.for("react.memo_cache_sentinel")?(p=e=>u(e),t[28]=p):p=t[28],t[29]!==d||t[30]!==m||t[31]!==n?(h=(0,i.jsx)(e4,{content:d,onUpdate:p,nodeId:n,inputLabelId:m}),t[29]=d,t[30]=m,t[31]=n,t[32]=h):h=t[32];let j=h;return t[33]!==l||t[34]!==o?(g=(0,i.jsx)(eG.Q,{onClick:()=>{o?.(),u(l)},children:"Cancel"}),t[33]=l,t[34]=o,t[35]=g):g=t[35],t[36]!==d||t[37]!==o||t[38]!==a?(f=(0,i.jsx)(eG.Q,{onClick:()=>{o?.(),a({content:d})},variant:"primary",children:"Save"}),t[36]=d,t[37]=o,t[38]=a,t[39]=f):f=t[39],t[40]!==g||t[41]!==f?(v=(0,i.jsxs)("span",{className:ez.actions,children:[g,f]}),t[40]=g,t[41]=f,t[42]=v):v=t[42],t[43]!==C||t[44]!==d||t[45]!==j||t[46]!==m||t[47]!==v?(x=(0,i.jsx)(ti,{additionalFields:C,content:d,contentEditor:j,inputLabelId:m,children:v}),t[43]=C,t[44]=d,t[45]=j,t[46]=m,t[47]=v,t[48]=x):x=t[48],x}}}try{tr.displayName||(tr.displayName="NodeContent")}catch{}function to(e){let t,n,a,o;let s=(0,r.c)(20),{isCollapsed:l,isContentVisible:c,isOutput:d,nodeId:u,onNodeUpdate:m,onStop:p,onToggleContent:h,onUpdate:g,pipelineId:v}=e,x=eS(u),_=eI(u),y=ew(u),C=eC(u);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eT.$)(eW.container,"group/card"),s[0]=t):t=s[0],s[1]!==l||s[2]!==c||s[3]!==y||s[4]!==u||s[5]!==h||s[6]!==g||s[7]!==v?(n=(0,i.jsx)("div",{className:eW.nodeContent,children:(0,i.jsx)(tr,{nodeId:u,pipelineId:v,isContentVisible:c,isCollapsed:l,isLoading:y,onUpdate:g,onToggleContent:h})}),s[1]=l,s[2]=c,s[3]=y,s[4]=u,s[5]=h,s[6]=g,s[7]=v,s[8]=n):n=s[8],s[9]!==d||s[10]!==y||s[11]!==_||s[12]!==C||s[13]!==x||s[14]!==m||s[15]!==p?(a=["prompt","code","pdf","pipeline","github-graphql"].includes(C)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:eW.divider}),(0,i.jsxs)("div",{className:eW.outputContainer,children:[(0,i.jsx)(ek,{onClick:e=>{e.stopPropagation(),m()},onStop:e=>{e.stopPropagation(),p(e)},isLoading:y,value:x,className:eW.executeButton}),y&&!x?(0,i.jsx)("div",{className:eW.loading,children:(0,i.jsx)(eF.r,{lines:3})}):_?(0,i.jsxs)("div",{className:eW.errorContainer,children:[(0,i.jsxs)("div",{className:eW.errorNotice,children:[(0,i.jsx)(f.AlertIcon,{className:eW.errorIcon}),"Oops, we hit an error"]}),(0,i.jsx)("p",{className:eW.errorText,children:_})]}):x?(0,i.jsx)("div",{className:(0,eT.$)(eW.nodeValue,d&&eW.output),children:"github-graphql"===C?(0,i.jsx)("pre",{style:{maxHeight:300,overflow:"auto",paddingTop:16,paddingBottom:16,paddingLeft:32,paddingRight:32},children:x.toString()}):(0,i.jsx)("div",{style:{paddingTop:16,paddingBottom:16,paddingLeft:32,paddingRight:32},children:(0,i.jsx)(eV.T,{markdown:x.toString()??""})})}):null]})]}),s[9]=d,s[10]=y,s[11]=_,s[12]=C,s[13]=x,s[14]=m,s[15]=p,s[16]=a):a=s[16],s[17]!==n||s[18]!==a?(o=(0,i.jsx)("div",{className:t,children:(0,i.jsxs)("div",{className:eW.innerContainer,children:[n,a]})}),s[17]=n,s[18]=a,s[19]=o):o=s[19],o}try{to.displayName||(to.displayName="ExpandedPillBoxContent")}catch{}let ts={container:"CollapsedPillBoxContent-module__container--XL58w",errorContainer:"CollapsedPillBoxContent-module__errorContainer--UV5bX",iconContainer:"CollapsedPillBoxContent-module__iconContainer--JVtkr",errorText:"CollapsedPillBoxContent-module__errorText--_o8T6"};function tl(e){let t,n;let a=(0,r.c)(6),{nodeId:o}=e,s=eI(o),l=eS(o),c=eC(o);return a[0]!==s||a[1]!==c||a[2]!==l?(t=s?(0,i.jsxs)("div",{className:ts.errorContainer,children:[(0,i.jsx)("div",{className:ts.iconContainer,children:(0,i.jsx)(f.AlertIcon,{})}),(0,i.jsx)("p",{className:ts.errorText,children:s})]}):!!l&&"github-graphql"!==c&&(0,i.jsx)("div",{style:{paddingTop:16,paddingBottom:16,paddingLeft:32,paddingRight:32},children:(0,i.jsx)(eV.T,{markdown:l.toString()??""})}),a[0]=s,a[1]=c,a[2]=l,a[3]=t):t=a[3],a[4]!==t?(n=(0,i.jsx)("div",{className:ts.container,children:t}),a[4]=t,a[5]=n):n=a[5],n}try{tl.displayName||(tl.displayName="CollapsedPillBoxContent")}catch{}let tc={svg:"NodeConnection-module__svg--N8jlP"};var td=n(58748);function tu(e){let t,n,a,o,s,l,c,d,u,m,p,h,g,f,v,x,_,y,C;let j=(0,r.c)(50),{containerRef:N,from:b,to:S,isSplit:I}=e,w=void 0!==I&&I,E=eb(),T=ef(tp),P=(0,ei.useRef)(null),k=(0,ei.useId)();j[0]===Symbol.for("react.memo_cache_sentinel")?(t={x1:0,y1:0,x2:0,y2:0,hingePointY:0,isHorizontal:!1},j[0]=t):t=j[0];let[A,L]=(0,ei.useState)(t),D=`gradient-${k}`,O=`mask-${k}`,R=`path-${k}`;j[1]!==b||j[2]!==S?(n=()=>{let e=P.current?.getBoundingClientRect();if(!e)return;let t=document.querySelector(`.${b}`),n=document.querySelector(`.${S}`);if(!t||!n)return;let a=t.getBoundingClientRect(),i=n.getBoundingClientRect(),r={x:a.left+a.width/2-e.left,y:a.top+a.height/2-e.top},o={x:i.left+i.width/2-e.left,y:i.top+i.height/2-e.top},s=Math.abs(r.y-o.y)<th,l=s?r.y:Math.max(a.top,i.top)-e.top-15;L({x1:r.x,y1:r.y,x2:o.x,y2:o.y,isHorizontal:s,hingePointY:l})},j[1]=b,j[2]=S,j[3]=n):n=j[3];let B=n;j[4]!==B?(a=()=>B(),j[4]=B,j[5]=a):a=j[5],(0,td.w)(a,N),j[6]!==B?(o=()=>{B()},j[6]=B,j[7]=o):o=j[7],j[8]!==b||j[9]!==T||j[10]!==E||j[11]!==S||j[12]!==B?(s=[b,S,E,T,B],j[8]=b,j[9]=T,j[10]=E,j[11]=S,j[12]=B,j[13]=s):s=j[13],(0,ei.useEffect)(o,s);let M=Math.atan2(A.y2-A.y1,A.x2-A.x1)*(180/Math.PI);j[14]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("stop",{offset:"30%",stopColor:"var(--borderColor-emphasis)",stopOpacity:0}),c=(0,i.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:1}),j[14]=l,j[15]=c):(l=j[14],c=j[15]),j[16]!==D?(d=(0,i.jsxs)("linearGradient",{id:D,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l,c]}),j[16]=D,j[17]=d):d=j[17],j[18]!==A?(u=tg(A),j[18]=A,j[19]=u):u=j[19],j[20]!==u?(m=(0,i.jsx)("path",{d:u,stroke:"white",strokeWidth:2,fill:"none"}),j[20]=u,j[21]=m):m=j[21],j[22]!==O||j[23]!==m?(p=(0,i.jsx)("mask",{id:O,children:m}),j[22]=O,j[23]=m,j[24]=p):p=j[24],j[25]!==p||j[26]!==d?(h=(0,i.jsxs)("defs",{children:[d,p]}),j[25]=p,j[26]=d,j[27]=h):h=j[27],j[28]!==A?(g=tg(A),j[28]=A,j[29]=g):g=j[29],j[30]!==R||j[31]!==g?(f=(0,i.jsx)("path",{d:g,id:R,className:"stroke-borderColor-default",stroke:"currentColor",strokeWidth:1,fill:"none"}),j[30]=R,j[31]=g,j[32]=f):f=j[32];let U=`url(#${O})`,$=`url(#${D})`,V=`rotate(${M})`,F=`#${R}`;return j[33]!==F?(v=(0,i.jsx)("animateMotion",{dur:"5000ms",repeatCount:"indefinite",children:(0,i.jsx)("mpath",{href:F})}),j[33]=F,j[34]=v):v=j[34],j[35]!==$||j[36]!==V||j[37]!==v?(x=(0,i.jsx)("circle",{r:30,fill:$,transform:V,children:v}),j[35]=$,j[36]=V,j[37]=v,j[38]=x):x=j[38],j[39]!==U||j[40]!==x?(_=(0,i.jsx)("g",{mask:U,children:x}),j[39]=U,j[40]=x,j[41]=_):_=j[41],j[42]!==w||j[43]!==A?(y=w&&tf(A).map(tm),j[42]=w,j[43]=A,j[44]=y):y=j[44],j[45]!==h||j[46]!==f||j[47]!==_||j[48]!==y?(C=(0,i.jsxs)("svg",{"aria-hidden":!0,ref:P,className:tc.svg,children:[h,f,_,y]}),j[45]=h,j[46]=f,j[47]=_,j[48]=y,j[49]=C):C=j[49],C}function tm(e){return(0,i.jsx)("path",{d:e,stroke:"currentColor",strokeWidth:1,fill:"none"},e)}function tp(e){return e.executionState.iteration}let th=10,tg=e=>[`M ${e.x1} ${e.y1}`,...Math.abs(e.x1-e.x2)>20?[`L ${e.x1} ${e.hingePointY-20}`,`Q ${e.x1}
            ${e.hingePointY}
            ${e.x1+20*(e.x1<e.x2?1:-1)}
            ${e.hingePointY}`,`L ${e.x2-20*(e.x1<e.x2?1:-1)} ${e.hingePointY}`,`Q ${e.x2} ${e.hingePointY} ${e.x2} ${e.hingePointY+20}`,`L ${e.x2} ${e.y2}`]:[`L ${e.x2} ${e.hingePointY},`,`L ${e.x2} ${e.y2}`]].join(" "),tf=e=>[tg({x1:e.x1-3,y1:e.y1+3,x2:e.x2-3,y2:e.y2+3,hingePointY:e.hingePointY-3,isHorizontal:e.isHorizontal}),tg({x1:e.x1+3,y1:e.y1-3,x2:e.x2+3,y2:e.y2-3,hingePointY:e.hingePointY+3,isHorizontal:e.isHorizontal})];try{tu.displayName||(tu.displayName="NodeConnection")}catch{}let tv=e=>{let t,n,a,o,s,l,c,d,p,h,g,f,v,x;let _=(0,r.c)(54),{nodeId:y,pipelineId:C,isCollapsed:j,isContentVisible:N,className:b,isOutput:S,onToggleExpand:I,onNodeUpdate:w,onUpdate:E,onStop:T,onToggleContent:P}=e,k=(0,ei.useRef)(null),A=eC(y),L=function(e){let t=ef(t=>{let n=ey(e)(t);return n?[...new Set([...u(n)].map(m))].sort().join("|"):""});return""===t?[]:t.split("|")}(y),D=`node-card-${C}-${y}`,O=j?"":"text"!==A?eE.node:eE.textNode;_[0]!==b||_[1]!==O?(t=(0,eT.$)("node-component",eE.container,b,O),_[0]=b,_[1]=O,_[2]=t):t=_[2],_[3]!==y?(n=(0,i.jsx)("span",{className:eE.nodeIdBox,children:y}),_[3]=y,_[4]=n):n=_[4],_[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,eT.$)("node-component",eE.headerContainer),_[5]=a):a=_[5],_[6]!==j||_[7]!==y||_[8]!==w||_[9]!==T||_[10]!==I||_[11]!==E?(o=(0,i.jsx)(eM,{isCollapsed:j,nodeId:y,onNodeUpdate:w,onStop:T,onToggleExpand:I,onUpdate:E}),_[6]=j,_[7]=y,_[8]=w,_[9]=T,_[10]=I,_[11]=E,_[12]=o):o=_[12];let R=`node-component-${C}-${y}`;if(_[13]!==R?(s=(0,eT.$)(eE.nodeMarker,R),_[13]=R,_[14]=s):s=_[14],_[15]!==s?(l=(0,i.jsx)("div",{className:s}),_[15]=s,_[16]=l):l=_[16],_[17]!==o||_[18]!==l?(c=(0,i.jsxs)("div",{className:a,children:[o,l]}),_[17]=o,_[18]=l,_[19]=c):c=_[19],_[20]!==j||_[21]!==N||_[22]!==S||_[23]!==y||_[24]!==w||_[25]!==T||_[26]!==P||_[27]!==E||_[28]!==C?(d=!j&&(0,i.jsx)(to,{nodeId:y,pipelineId:C,isOutput:S,isCollapsed:j,isContentVisible:N,onNodeUpdate:w,onStop:T,onToggleContent:P,onUpdate:E}),_[20]=j,_[21]=N,_[22]=S,_[23]=y,_[24]=w,_[25]=T,_[26]=P,_[27]=E,_[28]=C,_[29]=d):d=_[29],_[30]!==c||_[31]!==d||_[32]!==n?(p=(0,i.jsxs)("div",{className:eE.mainContent,children:[n,c,d]}),_[30]=c,_[31]=d,_[32]=n,_[33]=p):p=_[33],_[34]!==j||_[35]!==y?(h=j&&(0,i.jsx)(tl,{nodeId:y}),_[34]=j,_[35]=y,_[36]=h):h=_[36],_[37]!==D||_[38]!==p||_[39]!==h||_[40]!==t?(g=(0,i.jsxs)("div",{id:D,className:t,ref:k,children:[p,h]}),_[37]=D,_[38]=p,_[39]=h,_[40]=t,_[41]=g):g=_[41],_[42]!==L||_[43]!==y||_[44]!==C){let e;_[46]!==y||_[47]!==C?(e=e=>(0,i.jsx)(tu,{containerRef:k,from:`node-component-${C}-${e}`,to:`node-component-${C}-${y}`,isSplit:e.includes("|map")},e),_[46]=y,_[47]=C,_[48]=e):e=_[48],f=L.map(e),_[42]=L,_[43]=y,_[44]=C,_[45]=f}else f=_[45];return _[49]!==f?(v=(0,i.jsx)("div",{className:eE.nodeConnection,children:f}),_[49]=f,_[50]=v):v=_[50],_[51]!==g||_[52]!==v?(x=(0,i.jsxs)(i.Fragment,{children:[g,v]}),_[51]=g,_[52]=v,_[53]=x):x=_[53],x};try{tv.displayName||(tv.displayName="PillBoxNode")}catch{}let tx={compactNode:"CompactStyle-module__compactNode--wrJos",active:"CompactStyle-module__active--r3FEl",validationErrorWrapper:"CompactStyle-module__validationErrorWrapper--v04ZA",indicatorDot:"CompactStyle-module__indicatorDot--vu6zg",topDot:"CompactStyle-module__topDot--hznEy",bottomDot:"CompactStyle-module__bottomDot--ThBK8",indicatorShadowWrapper:"CompactStyle-module__indicatorShadowWrapper--c3Icx",indicatorShadow:"CompactStyle-module__indicatorShadow--pNXR6"};var t_=n(63867);let ty=()=>{let e;let t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:(0,eT.$)(tx.indicatorDot,tx.topDot)}),t[0]=e):e=t[0],e},tC=()=>{let e,t;let n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eT.$)(tx.indicatorDot,tx.bottomDot),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:e,children:(0,i.jsx)("div",{className:tx.indicatorShadowWrapper,children:(0,i.jsx)("div",{className:tx.indicatorShadow})})}),n[1]=t):t=n[1],t},tj=e=>{let t,n,a,o,s,l,c,d,u;let m=(0,r.c)(25),{nodeId:p,pipelineId:h,isSelected:g,className:f,hasPredecessors:v,hasSuccessors:x}=e,_=ew(p);m[0]!==p?(t=e=>ey(p)(e)?.title,m[0]=p,m[1]=t):t=m[1];let y=ef(t),C=eC(p),j=`node-card-${h}-${p}`,N=g?tx.active:null;return m[2]!==f||m[3]!==N?(n=(0,eT.$)(tx.compactNode,f,N),m[2]=f,m[3]=N,m[4]=n):n=m[4],m[5]!==v?(a=v&&(0,i.jsx)(ty,{}),m[5]=v,m[6]=a):a=m[6],m[7]!==x?(o=x&&(0,i.jsx)(tC,{}),m[7]=x,m[8]=o):o=m[8],m[9]!==_||m[10]!==C?(s=_?(0,i.jsx)(t_.A,{size:"small"}):(0,i.jsx)(eR,{type:C,size:"medium"}),m[9]=_,m[10]=C,m[11]=s):s=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(l={margin:"0",width:"max-content"},m[12]=l):l=m[12],m[13]!==y?(c=(0,i.jsx)("p",{style:l,children:y}),m[13]=y,m[14]=c):c=m[14],m[15]!==p?(d=(0,i.jsx)(tN,{nodeId:p}),m[15]=p,m[16]=d):d=m[16],m[17]!==d||m[18]!==j||m[19]!==n||m[20]!==a||m[21]!==o||m[22]!==s||m[23]!==c?(u=(0,i.jsxs)("div",{id:j,className:n,children:[a,o,s,c,d]}),m[17]=d,m[18]=j,m[19]=n,m[20]=a,m[21]=o,m[22]=s,m[23]=c,m[24]=u):u=m[24],u};function tN(e){let t;let n=(0,r.c)(1),{nodeId:a}=e;return ej(a)?(n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:tx.validationErrorWrapper,children:(0,i.jsx)(Z,{})}),n[0]=t):t=n[0],t):null}try{ty.displayName||(ty.displayName="InputIndicator")}catch{}try{tC.displayName||(tC.displayName="OutputIndicator")}catch{}try{tj.displayName||(tj.displayName="CompactStyle")}catch{}try{tN.displayName||(tN.displayName="ValidationErrorsIndicator")}catch{}var tb=n(55516);let tS=(0,ei.createContext)(null),tI=tS.Provider;function tw(){let e=(0,ei.useContext)(tS);if(!e)throw Error("usePipesService must be used inside a PipesServiceProvider");return e}try{tS.displayName||(tS.displayName="PipesServiceContext")}catch{}function tE(){let e=ex(),t=tw(),n=ev(),a=eb();return{runPipeline:async i=>{if(!(n().pipelineState.validationErrors.length>0))try{e({type:"INCREMENT_ITERATION"});let r=n().executionState.iteration+1;i?function(e,t,n){let a=function e(t,n){let a=new Set(t.edges.filter(e=>e.from===n).map(e=>e.to));for(let n of a)for(let i of e(t,n))a.add(i);return a.add(n),a}(d(e),t);n({type:"CLEAR_NODE_RESULTS",pipelineId:e.id,nodeIds:[...a]})}(a,i,e):e({type:"CLEAR_NODE_RESULTS",pipelineId:a.id,nodeIds:a.nodes.map(e=>e.id)}),await t.runPipeline(a,r,e)}catch(e){}},stopPipeline:(0,ei.useCallback)(()=>{let i=n().executionState.iteration;t.stopPipeline(a.id,i,e)},[e,n,a.id,t])}}function tT({nodeId:e,pipelineId:t}){let n=ex(),a=ev(),{runPipeline:i,stopPipeline:r}=tE(),o=ef(ey(e)),s=g(eb()).some(t=>t.id===e),l=(0,tb.d)(e=>i(e),1e3),c=async()=>{!(a().pipelineState.validationErrors.length>0)&&o&&i(o.id)};return{isOutput:s,node:o,runPipelineFromNode:c,onUpdate:e=>{if(!o)return;let i=a().pipelineState.pipelines,r=p({...o,...e},Object.values(i));r&&(n({type:"UPDATE_NODE",pipelineId:t,nodeId:o.id,updates:{...r}}),l(o.id))},onStop:r}}let tP=e=>{let t;let n=(0,r.c)(9),{pipelineId:a,nodeId:o,className:s,style:l,isSelected:c,isContentVisibleDefault:d,hasPredecessors:u,hasSuccessors:m}=e,p=void 0===l?"pillbox":l,h=void 0!==d&&d,g=void 0!==u&&u,f=void 0!==m&&m;return n[0]!==s||n[1]!==g||n[2]!==f||n[3]!==h||n[4]!==c||n[5]!==o||n[6]!==a||n[7]!==p?(t=(0,i.jsx)(tk,{pipelineId:a,nodeId:o,className:s,style:p,isSelected:c,isContentVisibleDefault:h,hasPredecessors:g,hasSuccessors:f}),n[0]=s,n[1]=g,n[2]=f,n[3]=h,n[4]=c,n[5]=o,n[6]=a,n[7]=p,n[8]=t):t=n[8],t},tk=e=>{let t;let n=(0,r.c)(21),{pipelineId:a,nodeId:o,className:s,style:l,isSelected:c,isContentVisibleDefault:d,hasPredecessors:u,hasSuccessors:m}=e,p=void 0!==u&&u,h=void 0!==m&&m;n[0]!==o||n[1]!==a?(t={nodeId:o,pipelineId:a},n[0]=o,n[1]=a,n[2]=t):t=n[2];let{isOutput:g,node:f,runPipelineFromNode:v,onStop:x,onUpdate:_}=tT(t),y=!!f.inputType||g,[C,j]=(0,ei.useState)(!y),[N,b]=(0,ei.useState)(void 0!==d&&d);if(!f)return null;switch(l){case"pillbox":{let e,t;return n[3]===Symbol.for("react.memo_cache_sentinel")?(e=()=>b(tA),n[3]=e):e=n[3],n[4]!==s||n[5]!==C||n[6]!==N||n[7]!==g||n[8]!==f.id||n[9]!==x||n[10]!==_||n[11]!==a||n[12]!==v?(t=(0,i.jsx)(tv,{nodeId:f.id,pipelineId:a,isCollapsed:C,isContentVisible:N,className:s,onToggleExpand:j,onNodeUpdate:v,onStop:x,onUpdate:_,onToggleContent:e,isOutput:g}),n[4]=s,n[5]=C,n[6]=N,n[7]=g,n[8]=f.id,n[9]=x,n[10]=_,n[11]=a,n[12]=v,n[13]=t):t=n[13],t}case"compact":{let e;let t=c??!1;return n[14]!==s||n[15]!==p||n[16]!==h||n[17]!==f.id||n[18]!==a||n[19]!==t?(e=(0,i.jsx)(tj,{nodeId:f.id,pipelineId:a,className:s,isSelected:t,hasPredecessors:p,hasSuccessors:h}),n[14]=s,n[15]=p,n[16]=h,n[17]=f.id,n[18]=a,n[19]=t,n[20]=e):e=n[20],e}default:return null}};try{tP.displayName||(tP.displayName="NodeComponent")}catch{}try{tk.displayName||(tk.displayName="NodeComponentInner")}catch{}function tA(e){return!e}let tL={container:"BasicView-module__container--LcBFl"};function tD(){let e,t,n;let a=(0,r.c)(6),o=eb();if(a[0]!==o){let n=d(o);e=tL.container,t=n.layers.map(e=>e.map(e=>(0,i.jsx)(tP,{pipelineId:o.id,nodeId:e.id},e.id))),a[0]=o,a[1]=e,a[2]=t}else e=a[1],t=a[2];return a[3]!==e||a[4]!==t?(n=(0,i.jsx)("div",{className:e,children:t}),a[3]=e,a[4]=t,a[5]=n):n=a[5],n}try{tD.displayName||(tD.displayName="BasicView")}catch{}var tO=n(27314),tR=n(78075);let tB={container:"CompactView-module__container--QQLKE",nodeCanvas:"CompactView-module__nodeCanvas--XKvnS",diagram:"CompactView-module__diagram--vF62e",gridPattern:"CompactView-module__gridPattern--qyW_J",nodesOverlay:"CompactView-module__nodesOverlay--Yxe0N",nodeWrapper:"CompactView-module__nodeWrapper--H1IqP",rightSidePanel:"CompactView-module__rightSidePanel--Ou6Ym"},tM={container:"CompactNodePanel-module__container--dxgrY",header:"CompactNodePanel-module__header--uHlhs",nodeDetails:"CompactNodePanel-module__nodeDetails--WjhDx",nodeTitleContainer:"CompactNodePanel-module__nodeTitleContainer--Zpcwx",nodeTitleText:"CompactNodePanel-module__nodeTitleText--lVk1M",descriptionText:"CompactNodePanel-module__descriptionText--kle3j",actions:"CompactNodePanel-module__actions--K24k9",content:"CompactNodePanel-module__content--XI9XP",input:"CompactNodePanel-module__input--ceRFq",outputContainer:"CompactNodePanel-module__outputContainer--FzE46",output:"CompactNodePanel-module__output--JXdGT",outputHeader:"CompactNodePanel-module__outputHeader--pNml1",outputType:"CompactNodePanel-module__outputType--tHRfj",loading:"CompactNodePanel-module__loading--tCzVZ",nodeValue:"CompactNodePanel-module__nodeValue--O9aC3",groupTitle:"CompactNodePanel-module__groupTitle--w4uCn",emptyState:"CompactNodePanel-module__emptyState--Lr4WV",emptyStateText:"CompactNodePanel-module__emptyStateText--Rs3yx",graphqlOutput:"CompactNodePanel-module__graphqlOutput--_IpA4"};var tU=n(89323),t$=n(8338);function tV(e){let t,n,a,o;let s=(0,r.c)(8),{nodeId:c}=e,d=eb(),u=ex();s[0]!==u||s[1]!==c||s[2]!==d.id?(t=()=>{u({type:"REMOVE_NODE",nodeId:c,pipelineId:d.id})},s[0]=u,s[1]=c,s[2]=d.id,s[3]=t):t=s[3];let m=t;return s[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(tU.W.Anchor,{children:(0,i.jsx)(l.K,{"aria-label":"Additional actions",icon:f.KebabHorizontalIcon})}),s[4]=n):n=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(t$.l.LeadingVisual,{children:(0,i.jsx)(f.TrashIcon,{})}),s[5]=a):a=s[5],s[6]!==m?(o=(0,i.jsxs)(tU.W,{children:[n,(0,i.jsx)(tU.W.Overlay,{children:(0,i.jsx)(t$.l,{children:(0,i.jsxs)(t$.l.Item,{onSelect:m,variant:"danger",children:[a,"Delete"]})})})]}),s[6]=m,s[7]=o):o=s[7],o}try{tV.displayName||(tV.displayName="NodeContextMenu")}catch{}let tF={errorContainer:"NodeError-module__errorContainer--jeGcp",errorNotice:"NodeError-module__errorNotice--iG4CM",errorIcon:"NodeError-module__errorIcon--QbqK_",errorText:"NodeError-module__errorText--sg1Gc",fixErrorButton:"NodeError-module__fixErrorButton--Nd880"};function tW(e){let t,n,a,o,s;let l=(0,r.c)(11),{errors:c,onFixErrorClick:d,title:u}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(f.AlertIcon,{className:tF.errorIcon}),l[0]=t):t=l[0],l[1]!==u?(n=(0,i.jsxs)("div",{className:tF.errorNotice,children:[t,u]}),l[1]=u,l[2]=n):n=l[2],l[3]!==c?(a=c.map(tz),l[3]=c,l[4]=a):a=l[4],l[5]!==d?(o=(0,i.jsx)(eG.Q,{className:tF.fixErrorButton,leadingVisual:f.BeakerIcon,onClick:d,children:"Try to fix it"}),l[5]=d,l[6]=o):o=l[6],l[7]!==n||l[8]!==a||l[9]!==o?(s=(0,i.jsxs)("div",{className:tF.errorContainer,children:[n,a,o]}),l[7]=n,l[8]=a,l[9]=o,l[10]=s):s=l[10],s}function tz(e){return(0,i.jsx)("p",{className:tF.errorText,children:e},e)}try{tW.displayName||(tW.displayName="NodeError")}catch{}function tH(e){let t,n,a,o,s,l,c,d,u,m,p,h,g,x,_,y,C;let j=(0,r.c)(59),{nodeId:N,pipelineId:b}=e;j[0]!==N||j[1]!==b?(t={nodeId:N,pipelineId:b},j[0]=N,j[1]=b,j[2]=t):t=j[2];let{node:S,runPipelineFromNode:I,onStop:w,onUpdate:E}=tT(t),T=eI(N),P=eS(N),k=ew(N),A=function(e){let t=ef(t=>t.pipelineState.validationErrors.filter(t=>t.involvedNodes.includes(e)).map(e=>e.error).join("|"));return""===t?[]:t.split("|")}(N),{sendChatMessage:L}=eX();if(!S)return null;j[3]!==S.id||j[4]!==T||j[5]!==L||j[6]!==A?(n=async()=>{let e;if(A.length||T){if(A.length){let t=A.map(tG).join("\n");e=`The following errors were found in the pipeline configuration:
${t}`}else e=`The following error was found when running node ${S.id}:
${T}`;L(e+=`

Fix the pipe by updating this node or other nodes upstream in the pipe.`)}},j[3]=S.id,j[4]=T,j[5]=L,j[6]=A,j[7]=n):n=j[7];let D=n;return(j[8]!==S.type?(a=(0,i.jsx)(eR,{type:S.type}),j[8]=S.type,j[9]=a):a=j[9],j[10]!==S.title?(o=(0,i.jsx)("span",{className:tM.nodeTitleText,children:S.title}),j[10]=S.title,j[11]=o):o=j[11],j[12]!==S.type?(s=(0,i.jsx)(eB,{type:S.type}),j[12]=S.type,j[13]=s):s=j[13],j[14]!==a||j[15]!==o||j[16]!==s?(l=(0,i.jsxs)("div",{className:tM.nodeTitleContainer,children:[a,o,s]}),j[14]=a,j[15]=o,j[16]=s,j[17]=l):l=j[17],j[18]!==S.description?(c=(0,i.jsx)("span",{className:tM.descriptionText,children:S.description}),j[18]=S.description,j[19]=c):c=j[19],j[20]!==l||j[21]!==c?(d=(0,i.jsxs)("div",{className:tM.nodeDetails,children:[l,c]}),j[20]=l,j[21]=c,j[22]=d):d=j[22],j[23]!==k||j[24]!==S.type||j[25]!==P||j[26]!==w||j[27]!==I?(u=["prompt","code","pipeline","github-graphql"].includes(S.type)&&(0,i.jsx)(ek,{onClick:I,onStop:w,isLoading:k,value:P,variant:"default"}),j[23]=k,j[24]=S.type,j[25]=P,j[26]=w,j[27]=I,j[28]=u):u=j[28],j[29]!==N?(m=(0,i.jsx)(tV,{nodeId:N}),j[29]=N,j[30]=m):m=j[30],j[31]!==m||j[32]!==u?(p=(0,i.jsxs)("div",{className:tM.actions,children:[u,m]}),j[31]=m,j[32]=u,j[33]=p):p=j[33],j[34]!==p||j[35]!==d?(h=(0,i.jsxs)("div",{className:tM.header,children:[d,p]}),j[34]=p,j[35]=d,j[36]=h):h=j[36],j[37]!==k||j[38]!==N||j[39]!==E||j[40]!==b?(g=(0,i.jsx)("div",{className:tM.input,children:(0,i.jsx)(tr,{nodeId:N,pipelineId:b,isContentVisible:!0,isCollapsed:!1,isLoading:k,onUpdate:E})}),j[37]=k,j[38]=N,j[39]=E,j[40]=b,j[41]=g):g=j[41],j[42]!==k||j[43]!==S||j[44]!==T||j[45]!==P||j[46]!==w||j[47]!==I||j[48]!==D||j[49]!==A)?(x=["prompt","code","pipeline","github-graphql"].includes(S.type)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:tM.groupTitle,children:"Output"}),(0,i.jsx)("div",{className:tM.output,children:k&&!P?(0,i.jsx)("div",{className:tM.loading,children:(0,i.jsx)(eF.r,{lines:3})}):A.length>0?(0,i.jsx)(tW,{errors:A,onFixErrorClick:D,title:"Oops, this node is configured incorrectly"}):T?(0,i.jsx)(tW,{errors:[T],onFixErrorClick:D}):P?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:tM.outputHeader,children:[(0,i.jsx)("div",{className:tM.outputType,children:v[S.type].outputLabel??"Markdown"}),(0,i.jsx)(ta.T,{icon:f.CopyIcon,variant:"invisible",ariaLabel:"Copy output",textToCopy:P?P.toString():""})]}),(0,i.jsx)("div",{className:tM.nodeValue,children:"github-graphql"===S.type?(0,i.jsx)("pre",{className:tM.graphqlOutput,children:P.toString()}):(0,i.jsx)(eV.T,{markdown:P.toString()??""})})]}):(0,i.jsxs)("div",{className:tM.emptyState,children:[(0,i.jsx)(ek,{onClick:I,onStop:w,isLoading:k,value:P,variant:"default"}),(0,i.jsxs)("p",{className:tM.emptyStateText,children:["No output yet.",(0,i.jsx)("br",{})," Run this node to generate output."]})]})})]}),j[42]=k,j[43]=S,j[44]=T,j[45]=P,j[46]=w,j[47]=I,j[48]=D,j[49]=A,j[50]=x):x=j[50],j[51]!==x?(_=(0,i.jsx)("div",{className:tM.outputContainer,children:x}),j[51]=x,j[52]=_):_=j[52],j[53]!==g||j[54]!==_?(y=(0,i.jsxs)("div",{className:tM.content,children:[g,_]}),j[53]=g,j[54]=_,j[55]=y):y=j[55],j[56]!==h||j[57]!==y?(C=(0,i.jsxs)("div",{className:tM.container,children:[h,y]}),j[56]=h,j[57]=y,j[58]=C):C=j[58],C}function tG(e){return`- ${e}`}try{tH.displayName||(tH.displayName="CompactNodePanel")}catch{}var tq=n(73451),tK=n(74144),tQ=n(46584);let tX={dialogBody:"AddNodeButton-module__dialogBody--sKcVF"};function tJ(e){let t,n,a,o,s,l,c,d,u,m,p,h;let g=(0,r.c)(25),{onClose:f,onConfirm:v}=e,[x,_]=(0,ei.useState)(""),[y,C]=(0,ei.useState)("");return g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(tK.l.Header,{children:"Add a new node to your pipeline"}),g[0]=t):t=g[0],g[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(tq.A.Label,{children:"Node Title"}),g[1]=n):n=g[1],g[2]===Symbol.for("react.memo_cache_sentinel")?(a=e=>_(e.target.value),g[2]=a):a=g[2],g[3]!==x?(o=(0,i.jsxs)(tq.A,{children:[n,(0,i.jsx)(eL.A,{value:x,onChange:a,placeholder:"New node"})]}),g[3]=x,g[4]=o):o=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(tq.A.Label,{children:"Node Description"}),g[5]=s):s=g[5],g[6]===Symbol.for("react.memo_cache_sentinel")?(l=e=>C(e.target.value),g[6]=l):l=g[6],g[7]!==y?(c=(0,i.jsxs)(tq.A,{children:[s,(0,i.jsx)(eL.A,{value:y,onChange:l,placeholder:"New node description"})]}),g[7]=y,g[8]=c):c=g[8],g[9]!==o||g[10]!==c?(d=(0,i.jsxs)(tK.l.Body,{className:tX.dialogBody,children:[o,c]}),g[9]=o,g[10]=c,g[11]=d):d=g[11],g[12]!==f?(u=(0,i.jsx)(eG.Q,{onClick:f,children:"Cancel"}),g[12]=f,g[13]=u):u=g[13],g[14]!==y||g[15]!==v||g[16]!==x?(m=(0,i.jsx)(eG.Q,{onClick:()=>v(x,y),variant:"primary",children:"Confirm"}),g[14]=y,g[15]=v,g[16]=x,g[17]=m):m=g[17],g[18]!==m||g[19]!==u?(p=(0,i.jsxs)(tK.l.Footer,{children:[u,m]}),g[18]=m,g[19]=u,g[20]=p):p=g[20],g[21]!==f||g[22]!==p||g[23]!==d?(h=(0,i.jsxs)(tK.l,{title:"Add Node",onClose:f,children:[t,d,p]}),g[21]=f,g[22]=p,g[23]=d,g[24]=h):h=g[24],h}function tY(e){let t,n,a,o;let s=(0,r.c)(12),{nodeType:l,onSelect:c}=e,d=l.icon;return s[0]!==l.type||s[1]!==c?(t=()=>c(l.type),s[0]=l.type,s[1]=c,s[2]=t):t=s[2],s[3]!==d?(n=(0,i.jsx)(t$.l.LeadingVisual,{children:(0,i.jsx)(d,{})}),s[3]=d,s[4]=n):n=s[4],s[5]!==l.description?(a=(0,i.jsx)(t$.l.Description,{variant:"block",children:l.description}),s[5]=l.description,s[6]=a):a=s[6],s[7]!==l.label||s[8]!==t||s[9]!==n||s[10]!==a?(o=(0,i.jsxs)(t$.l.Item,{onSelect:t,children:[n,l.label,a]}),s[7]=l.label,s[8]=t,s[9]=n,s[10]=a,s[11]=o):o=s[11],o}function tZ(){let e,t,n,a,o,s,c,d,u,m,p,h;let g=(0,r.c)(36),x=(0,tQ.h)(),_=ex(),{id:y,nodes:C}=eb(),[j,N]=(0,ei.useState)();if(g[0]!==_||g[1]!==x||g[2]!==C||g[3]!==y){let r,d,u;let m=Object.values(v);g[11]!==x?(r=(e,t)=>((!t.featureFlag||x[t.featureFlag])&&e.push(t),e),g[11]=x,g[12]=r):r=g[12];let p=m.reduce(r,[]);g[13]!==_||g[14]!==C||g[15]!==y?(d=(e,t,n)=>{_({type:"ADD_NODE_TO_PIPELINE",node:function(e,t,n,a){let i={content:"",id:t,title:n,description:a};switch(e){case"pipeline":return{...i,type:e,pipelineId:""};case"text":return{...i,type:e,inputType:{type:"text"}};default:return{...i,type:e}}}(e,(C.map(t1).reduce(t0,0)+1).toString(),t,n),pipelineId:y})},g[13]=_,g[14]=C,g[15]=y,g[16]=d):d=g[16],a=d,n=tU.W,g[17]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(tU.W.Anchor,{children:(0,i.jsx)(l.K,{"aria-label":"Add node",icon:f.PlusIcon})}),g[17]=c):c=g[17],t=tU.W.Overlay,s="small",e=t$.l,g[18]===Symbol.for("react.memo_cache_sentinel")?(u=e=>(0,i.jsx)(tY,{nodeType:e,onSelect:()=>N(e.type)},e.type),g[18]=u):u=g[18],o=p.map(u),g[0]=_,g[1]=x,g[2]=C,g[3]=y,g[4]=e,g[5]=t,g[6]=n,g[7]=a,g[8]=o,g[9]=s,g[10]=c}else e=g[4],t=g[5],n=g[6],a=g[7],o=g[8],s=g[9],c=g[10];return g[19]!==e||g[20]!==o?(d=(0,i.jsx)(e,{children:o}),g[19]=e,g[20]=o,g[21]=d):d=g[21],g[22]!==t||g[23]!==s||g[24]!==d?(u=(0,i.jsx)(t,{width:s,children:d}),g[22]=t,g[23]=s,g[24]=d,g[25]=u):u=g[25],g[26]!==n||g[27]!==c||g[28]!==u?(m=(0,i.jsxs)(n,{children:[c,u]}),g[26]=n,g[27]=c,g[28]=u,g[29]=m):m=g[29],g[30]!==a||g[31]!==j?(p=j&&(0,i.jsx)(tJ,{onClose:()=>N(void 0),onConfirm:(e,t)=>{a(j,e,t),N(void 0)}}),g[30]=a,g[31]=j,g[32]=p):p=g[32],g[33]!==m||g[34]!==p?(h=(0,i.jsxs)(i.Fragment,{children:[m,p]}),g[33]=m,g[34]=p,g[35]=h):h=g[35],h}function t0(e,t){return Math.max(e,parseInt(t))}function t1(e){return e.id}try{tJ.displayName||(tJ.displayName="AddNodeDialog")}catch{}try{tY.displayName||(tY.displayName="AddNodeListItem")}catch{}try{tZ.displayName||(tZ.displayName="AddNodeButton")}catch{}function t2(){let e,t,n;let a=(0,r.c)(7),o=ex(),s=ef(t3),c=ef(t5);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(tU.W.Anchor,{children:(0,i.jsx)(l.K,{"aria-label":"Development",icon:f.ToolsIcon})}),a[0]=e):e=a[0],a[1]!==c||a[2]!==o||a[3]!==s?(t=Object.values(s).map(e=>(0,i.jsx)(t$.l.Item,{value:e.id,selected:c===e.id,onSelect:()=>{let t=Object.values(s).find(t=>t.id===e.id);t&&o({type:"SELECT_PIPELINE",pipelineId:t.id})},children:e.title},e.id)),a[1]=c,a[2]=o,a[3]=s,a[4]=t):t=a[4],a[5]!==t?(n=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(tU.W,{children:[e,(0,i.jsx)(tU.W.Overlay,{width:"small",children:(0,i.jsx)(t$.l,{selectionVariant:"single",role:"menu",children:t})})]})}),a[5]=t,a[6]=n):n=a[6],n}function t5(e){return e_(e)?.id}function t3(e){return e.pipelineState.pipelines}try{t2.displayName||(t2.displayName="DevelopmentButton")}catch{}let t4={container:"CanvasHeader-module__container--B_K2q",rightButtons:"CanvasHeader-module__rightButtons--rz4RV"};function t6(e){let t;let n=(0,r.c)(2),{onClick:a}=e;return n[0]!==a?(t=(0,i.jsx)(l.K,{"aria-label":"Set center alignment",icon:f.ScreenFullIcon,onClick:e=>a(e)}),n[0]=a,n[1]=t):t=n[1],t}try{t6.displayName||(t6.displayName="CenterAlignButton")}catch{}function t7(e){let t,n,a,o,s,c,d,u;let m=(0,r.c)(18),{centerNodeCanvas:p}=e,{closePreviewPane:h}=eX(),{runPipeline:g,stopPipeline:v}=tE(),x=ef(e=>Object.values(e.executionState.nodes).some(e=>e.running));m[0]!==g?(t=()=>{g()},m[0]=g,m[1]=t):t=m[1];let _=t;return m[2]!==h?(n=(0,i.jsx)(l.K,{"aria-label":"Close workbench",icon:f.SidebarCollapseIcon,onClick:h}),m[2]=h,m[3]=n):n=m[3],m[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(tZ,{}),o=!1,m[4]=a,m[5]=o):(a=m[4],o=m[5]),m[6]!==p?(s=(0,i.jsx)(t6,{onClick:()=>p()}),m[6]=p,m[7]=s):s=m[7],m[8]!==_||m[9]!==x||m[10]!==v?(c=(0,i.jsx)(ek,{isLoading:x,onClick:_,onStop:v,variant:"primary"}),m[8]=_,m[9]=x,m[10]=v,m[11]=c):c=m[11],m[12]!==s||m[13]!==c?(d=(0,i.jsxs)("div",{className:t4.rightButtons,children:[a,o,s,c]}),m[12]=s,m[13]=c,m[14]=d):d=m[14],m[15]!==n||m[16]!==d?(u=(0,i.jsxs)("div",{className:t4.container,children:[n,d]}),m[15]=n,m[16]=d,m[17]=u):u=m[17],u}try{t7.displayName||(t7.displayName="CanvasHeader")}catch{}let t8=e=>{let t,n,a,o,s;let l=(0,r.c)(16),{path:c,isProcessing:d}=e,u=void 0!==d&&d,m=(0,ei.useId)(),p=`mask-${m}`,h=`path-${m}`;return l[0]!==c?(t=(0,i.jsx)("path",{d:c,stroke:"white",strokeWidth:1,fill:"none"}),l[0]=c,l[1]=t):t=l[1],l[2]!==p||l[3]!==t?(n=(0,i.jsx)("defs",{children:(0,i.jsx)("mask",{id:p,children:t})}),l[2]=p,l[3]=t,l[4]=n):n=l[4],l[5]!==c||l[6]!==h?(a=(0,i.jsx)("path",{d:c,id:h,className:"stroke-borderColor-default",stroke:"url(#lineGradient)",strokeWidth:1.6,opacity:.6,fill:"none"}),l[5]=c,l[6]=h,l[7]=a):a=l[7],l[8]!==u||l[9]!==c||l[10]!==h?(o=u?(0,i.jsx)("path",{d:c,stroke:"url(#activeEdgeGradient)",strokeWidth:2,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{strokeDasharray:"5% 100%",animation:"activeFlowAnimation 3.5s ease-out infinite"}}):(0,i.jsx)("path",{id:h,d:c,className:"stroke-borderColor-muted",stroke:"url(#dotGradient)",strokeWidth:3,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:{strokeDasharray:"0.5 100",animation:"flowAnimation 10s ease-in-out infinite"}}),l[8]=u,l[9]=c,l[10]=h,l[11]=o):o=l[11],l[12]!==n||l[13]!==a||l[14]!==o?(s=(0,i.jsxs)("g",{children:[n,a,o]}),l[12]=n,l[13]=a,l[14]=o,l[15]=s):s=l[15],s};try{t8.displayName||(t8.displayName="CompactStyleEdge")}catch{}let t9=(e="")=>e.split("|")[0],ne=`
@keyframes flowAnimation {
  from {
    stroke-dashoffset: 100;
  }
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes activeFlowAnimation {
  0% {
    stroke-dashoffset: 105%;
  }
  // add a bit delay
  60% {
    stroke-dashoffset: 5%;
  }
  100% {
    stroke-dashoffset: 5%;
  }
}
`,nt="#1f6feb";function nn(){let e,t,n,a,o,s,l,c,m,p,h,g,f,v,x,_,y,C,j,N;let b=(0,r.c)(48),S=function(){let e=ef(e=>e_(e)?.nodes?.map(e=>e.id)?.join("|"));return e?.split("|")??[]}(),I=ef(nl),w=d(eb()),E=ef(no),T=(0,ei.useRef)(null),[P,k]=(0,ei.useState)(null),[A,L]=(0,ei.useState)(!1),D=ef(nr),O=ex();b[0]!==O?(e=e=>O({type:"FOCUS_NODE",nodeId:e}),b[0]=O,b[1]=e):e=b[1];let R=e;b[2]!==D||b[3]!==R?(t=e=>{R(e===D?null:e)},b[2]=D,b[3]=R,b[4]=t):t=b[4];let B=t,{layout:M,pipelineDimensions:U,edges:$}=function(){let e=eb(),t=(0,tR.xp)().id(e=>e.id).parentIds(e=>e.parentIds),n=e.nodes.map(e=>({id:t9(e.id)||"",parentIds:[...u(e)].map(e=>t9(e)||"").filter(Boolean)})),a={},i=[];try{let e=t(n),{width:r,height:o}=(0,tR.Hz)().nodeSize([250,120]).layering((0,tR.AH)()).decross((0,tR.X9)().order((0,tR.Ys)().base((0,tR.n0)()))).gap([10,10])(e);for(let t of e.nodes())t.data.id&&(a[t.data.id]={x:t.x,y:t.y});let s=e=>{if(e.length<2)return"";let[t,n]=e[0]||[0,0],[a,i]=e[e.length-1]||[0,0],r=a-t,o=Math.abs(r);if(o<10)return`M ${t},${n} L ${a},${i}`;let s=(n+i)/2,l=r>0?1:-1;return`
        M ${t},${n}
        L ${t},${s-12}
        A 12,12 0 0 ${l>0?0:1} ${t+12*l},${s}
        L ${t+l*(12+(o-24))},${s}
        A 12,12 0 0 ${l>0?1:0} ${a},${s+12}
        L ${a},${i}
      `.trim().replace(/\s+/g," ")};for(let{points:t,source:n,target:a}of e.links()){let e=s(t);i.push({path:e,points:t.map(([e,t])=>({x:e,y:t})),source:n.data.id||"",target:a.data.id||""})}return{layout:a,edges:i,pipelineDimensions:{width:r,height:o}}}catch{return function(e){let t={},n={width:nc.width,height:e.length*nc.height};for(let n=0;n<e.length;++n)t[e[n]]={x:nc.width/2,y:n*nc.height};return{layout:t,edges:[],pipelineDimensions:n}}(e.nodes.map(e=>e.id))}}(),V=(0,ei.useRef)(null);b[5]!==M||b[6]!==P?(n=()=>{if(!P||!V.current)return;let e=P.getBoundingClientRect(),t=e.width,n=e.height,a=Math.max(...Object.values(M).map(ni))+100,i=Math.max(...Object.values(M).map(na))+25,r=tO.GSI.translate(t/2-a/2,n/2-i/2).scale(1);(0,tO.Ltv)(P).transition().duration(500).ease(tO.xA2).call(V.current.transform,r)},b[5]=M,b[6]=P,b[7]=n):n=b[7];let F=n;b[8]!==F?(a=e=>{if(e){k(e);let t=(0,tO.Ltv)(e),n=(0,tO.s_O)().scaleExtent([1,1]).interpolate(tO.GWP).on("zoom",e=>{(0,tO.Ltv)("#edges-group").attr("transform",e.transform),(0,tO.Ltv)("#nodes-overlay").style("transform-origin","0 0").style("transform",`translate(${e.transform.x}px, ${e.transform.y}px) scale(${e.transform.k})`),function(e){(0,tO.Ltv)("#dot-pattern").attr("x",e.transform.x).attr("y",e.transform.y).attr("width",25*e.transform.k).attr("height",25*e.transform.k).select("rect").attr("x",25*e.transform.k/2-1).attr("y",25*e.transform.k/2-1).attr("opacity",Math.min(e.transform.k,1))}(e)});V.current=n,t.call(n),F()}},b[8]=F,b[9]=a):a=b[9];let W=a;if(b[10]!==A||b[11]!==M||b[12]!==P||b[13]!==D?(o=()=>{if(!0===A||!D||!P||!V.current)return;let e=M[D];if(!e)return;L(!0);let t=P.getBoundingClientRect(),n=t.width,a=t.height,i=n/2-e.x,r=a/2-e.y,o=tO.GSI.translate(i,r).scale(1);(0,tO.Ltv)(P).transition().duration(500).ease(tO.xA2).call(V.current.transform,o),L(!1)},s=[D,A,M,P],b[10]=A,b[11]=M,b[12]=P,b[13]=D,b[14]=o,b[15]=s):(o=b[14],s=b[15]),(0,ei.useEffect)(o,s),!I)return null;b[16]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("style",{children:ne}),b[16]=l):l=b[16],b[17]!==F?(c=(0,i.jsx)(t7,{centerNodeCanvas:F}),b[17]=F,b[18]=c):c=b[18],b[19]===Symbol.for("react.memo_cache_sentinel")?(m={position:"relative"},b[19]=m):m=b[19],b[20]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)("pattern",{id:"dot-pattern",patternUnits:"userSpaceOnUse",x:"0",y:"0",width:25,height:25,children:(0,i.jsx)("rect",{x:11.5,y:11.5,width:2,height:2,className:tB.gridPattern})}),b[20]=p):p=b[20],b[21]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsxs)("linearGradient",{id:"lineGradient",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.4"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.4"})]}),b[21]=h):h=b[21],b[22]===Symbol.for("react.memo_cache_sentinel")?(g=(0,i.jsxs)("linearGradient",{id:"dotGradient",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{offset:"0%",stopColor:"currentColor",stopOpacity:"0.8"}),(0,i.jsx)("stop",{offset:"100%",stopColor:"currentColor",stopOpacity:"0.8"})]}),b[22]=g):g=b[22],b[23]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsxs)("defs",{children:[p,h,g,(0,i.jsxs)("linearGradient",{id:"activeEdgeGradient",gradientUnits:"userSpaceOnUse",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,i.jsx)("stop",{stopColor:nt,stopOpacity:"0.5"}),(0,i.jsx)("stop",{stopColor:nt}),(0,i.jsx)("stop",{offset:"32.5%",stopColor:nt}),(0,i.jsx)("stop",{offset:"100%",stopColor:nt,stopOpacity:"0.5"})]})]}),v=(0,i.jsx)("rect",{fill:"url(#dot-pattern)",width:"100%",height:"100%"}),b[23]=f,b[24]=v):(f=b[23],v=b[24]),b[25]!==$||b[26]!==U.width||b[27]!==E?(x=0!==U.width&&(0,i.jsx)("g",{id:"edges-group",children:$.map(e=>{let t=!!Object.entries(E).find(t=>{let[n,a]=t;return n===e.target&&a});return(0,i.jsx)(t8,{path:e.path,isProcessing:t},`${e.source}-${e.target}`)})}),b[25]=$,b[26]=U.width,b[27]=E,b[28]=x):x=b[28],b[29]!==x?(_=(0,i.jsxs)("svg",{"aria-label":"Diagram",className:tB.diagram,style:m,children:[f,v,x]}),b[29]=x,b[30]=_):_=b[30];let z=S.map(e=>(0,i.jsx)("div",{role:"button",tabIndex:0,className:tB.nodeWrapper,style:{left:(M[e]?.x??0)-100,top:(M[e]?.y??0)-25},onClick:()=>B(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&B(e)},children:(0,i.jsx)(tP,{pipelineId:I,nodeId:e,style:"compact",isSelected:D===e,hasPredecessors:w.edges.some(t=>t.to===e),hasSuccessors:w.edges.some(t=>t.from===e)})},e));return b[31]!==tB.nodesOverlay||b[32]!==z?(y=(0,i.jsx)("div",{id:"nodes-overlay",className:tB.nodesOverlay,children:z}),b[31]=tB.nodesOverlay,b[32]=z,b[33]=y):y=b[33],b[34]!==W||b[35]!==_||b[36]!==y||b[37]!==tB.nodeCanvas||b[38]!==c?(C=(0,i.jsxs)("div",{className:tB.nodeCanvas,ref:W,children:[c,_,y]}),b[34]=W,b[35]=_,b[36]=y,b[37]=tB.nodeCanvas,b[38]=c,b[39]=C):C=b[39],b[40]!==I||b[41]!==D?(j=D&&(0,i.jsx)("div",{className:tB.rightSidePanel,children:(0,i.jsx)(tH,{pipelineId:I,nodeId:D},D)}),b[40]=I,b[41]=D,b[42]=j):j=b[42],b[43]!==C||b[44]!==j||b[45]!==tB.container||b[46]!==l?(N=(0,i.jsxs)("div",{className:tB.container,ref:T,children:[l,C,j]}),b[43]=C,b[44]=j,b[45]=tB.container,b[46]=l,b[47]=N):N=b[47],N}function na(e){return e.y}function ni(e){return e.x}function nr(e){return e.uiState.focusedNodeId}function no(e){return Object.fromEntries(Object.entries(e.executionState.nodes).map(ns))}function ns(e){let[t,n]=e;return[t,n.running]}function nl(e){return e.pipelineState.selectedPipelineId}let nc={width:200,height:100};try{nn.displayName||(nn.displayName="CompactView")}catch{}try{(a=D3layout).displayName||(a.displayName="D3layout")}catch{}let nd=e=>{let t,n;let a=(0,r.c)(4),{view:o}=e;return a[0]!==o?(t="basic"===o?(0,i.jsx)(tD,{}):"compact"===o?(0,i.jsx)(nn,{}):null,a[0]=o,a[1]=t):t=a[1],a[2]!==t?(n=(0,i.jsx)(i.Fragment,{children:t}),a[2]=t,a[3]=n):n=a[3],n};try{nd.displayName||(nd.displayName="PipelineVisualizer")}catch{}let nu={container:"Pipeline-module__container--LCuiu",footer:"Pipeline-module__footer--Veip0"};function nm(e){let t,n,a;let o=(0,r.c)(5),{footerContent:s}=e;return ef(np)?(o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:nu.container,children:(0,i.jsx)(nd,{view:"compact"})}),o[0]=t):t=o[0],o[1]!==s?(n=s&&(0,i.jsx)("div",{className:nu.footer,children:s}),o[1]=s,o[2]=n):n=o[2],o[3]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[t,n]}),o[3]=n,o[4]=a):a=o[4],a):null}function np(e){return!!e_(e)}try{nm.displayName||(nm.displayName="CurrentPipeline")}catch{}let nh={container:"PipesPreviewArea-module__container--QJdqA"};function ng(e,t){for(let n of[...t].reverse())if("assistant"===n.role)for(let t of n.references??[])try{if("pipe"===t.type){if(nf(t)){let e={description:t.description,id:t.id,title:t.title,nodes:t.nodes},a=h(e,[]);return{messageId:n.id,pipeline:a}}}else if("text"===t.type&&t.text){let a=JSON.parse(t.text);if(nf(a)){let t=h(a,[]);return t.id=e??a.title.replace(/\s+/g,"-").toLowerCase(),{messageId:n.id,pipeline:t}}}}catch{continue}}function nf(e){return!!e&&"object"==typeof e&&"title"in e&&"nodes"in e}function nv(e){return e_(e)?.id}function nx(e){return e.executionState}let n_="The following errors were found in the pipeline configuration:",ny="The following errors were found while running the pipeline:";function nC(e){return`- ${e.error} (Nodes ${e.involvedNodes.join(", ")})`}function nj(e){return`- ${e.error} (Node ${e.nodeId})`}async function nN(){return new Promise(e=>setTimeout(e,10))}function nb(e){let t=e.messages.toReversed().filter(e=>"user"===e.role).slice(0,2);return!(t.length<2)&&(t.every(e=>e.content?.startsWith(n_))||t.every(e=>e.content?.startsWith(ny)))}function nS(e){let t,n,a,o,s;let l=(0,r.c)(19),{chatState:c,plugin:d,closePreviewPane:u,openPreviewPane:m}=e;if(!(d.id===K&&"service"in d&&d.service instanceof PipesService))throw Error("PipesPreviewArea can only be used with a PipesPlugin");let p=(0,et.b)(),{currentReferences:h}=c,g=d.service;l[0]!==c||l[1]!==p?(t=p.getSelectedThread(c),l[0]=c,l[1]=p,l[2]=t):t=l[2];let f=t;l[3]!==h||l[4]!==p||l[5]!==g||l[6]!==f?(n=async e=>{let t;f&&(t=[...h,{type:"text",text:JSON.stringify(await g.getPipeline(f.id))}],p.sendChatMessage({thread:f,content:e,references:t,modeOverride:K}))},l[3]=h,l[4]=p,l[5]=g,l[6]=f,l[7]=n):n=l[7];let v=n;return c.selectedThreadID?(l[8]!==c?(a=(0,i.jsx)(eg,{children:(0,i.jsx)(nI,{chatState:c})}),l[8]=c,l[9]=a):a=l[9],l[10]!==d.service||l[11]!==a?(o=(0,i.jsx)(tI,{value:d.service,children:a}),l[10]=d.service,l[11]=a,l[12]=o):o=l[12],l[13]!==c.availableModels||l[14]!==u||l[15]!==m||l[16]!==v||l[17]!==o?(s=(0,i.jsx)(eQ,{availableModels:c.availableModels,closePreviewPane:u,openPreviewPane:m,sendChatMessage:v,children:o}),l[13]=c.availableModels,l[14]=u,l[15]=m,l[16]=v,l[17]=o,l[18]=s):s=l[18],s):null}function nI(e){let t;let n=(0,r.c)(1),{chatState:a}=e;return function(){let e,t;let n=(0,r.c)(3),a=ex();n[0]!==a?(e=()=>{},t=[a],n[0]=a,n[1]=e,n[2]=t):(e=n[1],t=n[2]),(0,ei.useEffect)(e,t)}(),function(e){let t=ex(),n=tw(),a=function(e,t){let{pipeline:n,messageId:a}=ng(e,t)??{};return(0,ei.useMemo)(()=>n,[a])}(e.selectedThreadID,e.messages),i=ev(),{openPreviewPane:r,sendChatMessage:o}=eX(),s=(0,ei.useRef)(null);(0,ei.useEffect)(()=>{let l=!1,c=async e=>{let a=await n.getExecutionState(e.id);!l&&a&&t({type:"RESTORE_EXECUTION_STATE",executionState:a})},d=async(a,r)=>{if(await nN(),l)return;let s=i().pipelineState.validationErrors;if(s.length>0&&(!nb(e)||!r)){o(`${n_}

${s.map(nC)}

Fix the pipeline by modifying its nodes to resolve these errors.`);return}let c=Object.keys(i().executionState.nodes);if(t({type:"CLEAR_NODE_RESULTS",pipelineId:a.id,nodeIds:c}),await nN(),l)return;let d=i().executionState.iteration;if(await n.runPipeline(a,d,t),l||(await nN(),l))return;let u=Object.entries(i().executionState.nodes).filter(([e,t])=>!!t.error).map(([e,t])=>({nodeId:e,error:t.error}));if(u.length>0&&(!nb(e)||!r)){o(`${ny}

${u.map(nj)}

Fix the pipeline by modifying its nodes to resolve these errors.`);return}};return(async()=>{if(!e.selectedThreadID)return;let o=await n.getPipeline(e.selectedThreadID),u=e_(i()),m=!u||!!u.dummy,p=m?o??a:a??o,h=p===a;!l&&p&&s.current!==p&&(s.current=p,t({type:"ADD_PIPELINE",pipeline:p}),r(),h?d(p,h&&!m):c(p))})(),()=>{l=!0}},[a,t,n])}(a),function(e){let t,n;let a=(0,r.c)(6),i=tw(),o=ef(e_),s=ej();a[0]!==s||a[1]!==o||a[2]!==i||a[3]!==e?(t=()=>{o&&e&&!s&&(o.dummy||i.updatePipeline(e,o))},n=[o,i,s,e],a[0]=s,a[1]=o,a[2]=i,a[3]=e,a[4]=t,a[5]=n):(t=a[4],n=a[5]),(0,ei.useEffect)(t,n)}(a.selectedThreadID),function(){let e,t;let n=(0,r.c)(5),a=tw(),i=ef(nx),o=ef(nv);n[0]!==i||n[1]!==o||n[2]!==a?(e=()=>{o&&a.updateExecutionState(o,i.iteration,i)},t=[o,i,a],n[0]=i,n[1]=o,n[2]=a,n[3]=e,n[4]=t):(e=n[3],t=n[4]),(0,ei.useEffect)(e,t)}(),n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:nh.container,children:(0,i.jsx)(nm,{})}),n[0]=t):t=n[0],t}try{nS.displayName||(nS.displayName="PipesPreviewArea")}catch{}try{nI.displayName||(nI.displayName="PipesPreview")}catch{}var nw=n(2497),nE=n(47584);let nT=`${Q.Jz}/pipes`;function nP(e){let t,n;let a=(0,r.c)(4),{onLinkClick:o}=e;a[0]!==o?(t=(e,t)=>{o?.(e,t)},a[0]=o,a[1]=t):t=a[1];let s=t;return a[2]!==s?(n=(0,i.jsx)(nw.Vx,{"aria-current":nE.fV.pathname===nT?"page":void 0,displayName:"Loops",href:nT,icon:f.InfinityIcon,id:K,onLinkClick:s}),a[2]=s,a[3]=n):n=a[3],n}try{nP.displayName||(nP.displayName="PipesNavigation")}catch{}function nk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nA(e){return!!e&&"object"==typeof e&&"threadID"in e&&"string"==typeof e.threadID&&"pipeline"in e&&"object"==typeof e.pipeline}function nL(e){return!!e&&"object"==typeof e&&"pipelineId"in e&&"string"==typeof e.pipelineId&&"iteration"in e&&"number"==typeof e.iteration&&"executionState"in e&&"object"==typeof e.executionState}let IndexedDBPipesStorage=class IndexedDBPipesStorage{async getAllPipelineRecords(){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",e=>e.getAll(),e=>Array.isArray(e)?e.filter(e=>nA(e)?e.pipeline:null):[])}async getPipeline(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readonly",t=>t.get(e),e=>nA(e)?e.pipeline:null)}updatePipeline(e,t){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",n=>n.put({threadID:e,pipeline:t}),()=>t)}deletePipeline(e){return this.withTransaction(IndexedDBPipesStorage.PIPELINES_STORE,"readwrite",t=>t.delete(e),()=>e)}getExecutionState(e,t){return void 0!==t?this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",n=>n.get([e,t]),e=>nL(e)?e.executionState:null):this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readonly",t=>t.index("pipelineId").getAll(e),e=>{if(!Array.isArray(e))return null;let t=e.filter(nL);if(0===t.length)return null;let n=Math.max(...t.map(e=>e.iteration));return t.find(e=>e.iteration===n)?.executionState??null})}updateExecutionState(e,t,n){return this.withTransaction(IndexedDBPipesStorage.EXECUTION_STORE,"readwrite",a=>a.put({pipelineId:e,iteration:t,executionState:n}),()=>n)}async withTransaction(e,t,n,a){let i=await this.getDatabase();return new Promise((r,o)=>{let s=i.transaction(e,t);s.oncomplete=()=>i.close(),s.onerror=()=>o(s.error);let l=n(s.objectStore(e));l.onsuccess=()=>r(a(l.result)),l.onerror=()=>o(l.error)})}getDatabase(){return new Promise((e,t)=>{let n=indexedDB.open(IndexedDBPipesStorage.PIPES_DB);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=()=>{let e=n.result;e.createObjectStore(IndexedDBPipesStorage.PIPELINES_STORE,{keyPath:"threadID"}).createIndex("threadID","threadID",{unique:!0});let t=e.createObjectStore(IndexedDBPipesStorage.EXECUTION_STORE,{keyPath:["pipelineId","iteration"]});t.createIndex("pipelineId, iteration",["pipelineId","iteration"],{unique:!0}),t.createIndex("pipelineId","pipelineId",{unique:!1})}})}};nk(IndexedDBPipesStorage,"PIPES_DB","copilot-pipes"),nk(IndexedDBPipesStorage,"PIPELINES_STORE","pipelines"),nk(IndexedDBPipesStorage,"EXECUTION_STORE","executionStates");var nD=n(49339);async function nO(e,t,n){let a=new TextDecoder,i=e.getReader(),r="";for(;;){if(t?.aborted)return;let{done:e,value:n}=await i.read();if(e)return;let s=a.decode(n);if(r+=s,s.endsWith("\n\ndata: [DONE]\n\n")){var o;return r.replace("data: ","").replace("\n\ndata: [DONE]\n\n","").split("\n\ndata: ").map(e=>{try{let t=JSON.parse(e).choices[0];return t?.delta?.content??""}catch(e){}}).join("")}}}var nR=n(46988);function nB(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function nM(e,t){var n=nB(e,t,"get");return n.get?n.get.call(e):n.value}function nU(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function n$(e,t,n){var a=nB(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n),n}var nV=new WeakMap,nF=new WeakMap,nW=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async getChatCompletion(e,t=eY.UB.id,n,a){let i=await nM(this,nV).getAuthToken(),r=await (0,Q.p)({basePath:nM(this,nF),body:{messages:e,model:t,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:i,integrationId:this.directConnectConfiguration.integrationID,realIp:nM(this,nW),signal:a});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,nR.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}return a?.aborted||!r.body?"":await nO(r.body,a,n)??""}get directConnectConfiguration(){return{integrationID:"copilot-chat"}}constructor(e,t,n=""){nU(this,nV,{writable:!0,value:void 0}),nU(this,nF,{writable:!0,value:void 0}),nU(this,nW,{writable:!0,value:void 0}),n$(this,nF,e),n$(this,nV,new nD.J(t)),n$(this,nW,n)}};var nz=n(57572);let nH=["SAML"],nG={FORBIDDEN:["SAML error"]};function nq(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var nK=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){var n;let a=await (0,nz.Sr)((n=nq(this,nK,"get")).get?n.get.call(this):n.value,{method:"POST",body:{query:e},signal:t});if(a.ok){let e=await a.json();if(function(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!nH.includes(e.type)&&!nG[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,nR.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,nR.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}(e,a.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e){!function(e,t,n){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}(this,nK,{writable:!0,value:void 0}),function(e,t,n){var a=nq(e,t,"set");!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,a,n)}(this,nK,e)}};function nQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let PipesPlugin=class PipesPlugin{matchThread(e,t){return!!ng(e,t)}async overrideCreateMessageOptions(e){return{...e,references:await this.addReferenceForEditedPipeline(e.threadID,e.references),mode:K}}async addReferenceForEditedPipeline(e,t){if(!this.service)return t;let n=await this.service.getPipeline(e);return n?[...t,{type:"pipe",...n}]:t}constructor(e,t,n,a){nQ(this,"id",K),nQ(this,"displayName","Pipes"),nQ(this,"service",void 0),nQ(this,"widePreviewArea",!0),nQ(this,"EmptyStateComponent",er),nQ(this,"PreviewAreaComponent",nS),nQ(this,"NavigationComponent",nP),this.service=new PipesService(new IndexedDBPipesStorage,new GraphQLClient(t),new ChatCompletionsClient(e,n,a))}}},75028:(e,t,n)=>{n.d(t,{G:()=>i,K:()=>r});var a=n(47584);let i=a.XC?.readyState==="interactive"||a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),r=a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.cg?.addEventListener("load",e)})},42445:(e,t,n)=>{n.d(t,{N7:()=>_});var a=n(36301),i=n(25339),r=n(24212);function o(e){return(0,r.q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}function s(e){return{type:e.name,value:e.message,stacktrace:o(e),catalogService:e.catalogService}}function l(e){let t=document.querySelectorAll(e);if(t.length>0)return t[t.length-1]}var c=n(9080),d=n(47584),u=n(75632),m=n(95505);let p=!1,h=0,g=Date.now(),f=new Set(["AbortError","AuthSessionExpiredError","TypeError"]),v=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","Unable to perform this operation. Please try again later."]);function x(e){return!!e.name&&!!("AbortError"===e.name||f.has(e.name)&&v.has(e.message)||e.name.startsWith("ApiError")&&v.has(e.message))}function _(e,t={}){if((0,u.G7)("FAILBOT_HANDLE_NON_ERRORS")){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(b.some(t=>e.includes(t)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let n=Error(),a=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e);y(C({type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${a}`,stacktrace:o(n),catalogService:void 0},t));return}x(e)||y(C(s(e),t))}else x(e)||y(C(s(e),t))}async function y(e){if(!(!N&&!p&&h<10&&(0,i.TT)()))return;let t=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(t){if(e.error.stacktrace.some(e=>j.test(e.filename)||j.test(e.function))){p=!0;return}h++;try{await fetch(t,{method:"post",body:JSON.stringify(e)})}catch{}}}function C(e,t={}){return Object.assign({error:e,sanitizedUrl:`${window.location.protocol}//${window.location.host}${function(){let e=l("meta[name=analytics-location]");return e?e.content:window.location.pathname}()+function(){let e=l("meta[name=analytics-location-query-strip]"),t="";e||(t=window.location.search);let n=l("meta[name=analytics-location-params]");for(let e of(n&&(t+=(t?"&":"?")+n.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let n=e.content.split(":",2);t=t.replace(RegExp(`(^|[?&])${n[0]}($|=)`,"g"),`$1${n[1]}$2`)}return t}()}`||window.location.href,readyState:document.readyState,referrer:(0,m.dR)(),timeSinceLoad:Math.round(Date.now()-g),user:function(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let t=(0,a.y)();return`anonymous-${t}`}()||void 0,actorId:document.head?.querySelector('meta[name="octolytics-actor-id"]')?.content,bundler:c.v,ui:!!document.querySelector('meta[name="ui"]'),release:document.head?.querySelector('meta[name="release"]')?.content},t)}let j=/(chrome|moz|safari)-extension:\/\//,N=!1;d.cg?.addEventListener("pageshow",()=>N=!1),d.cg?.addEventListener("pagehide",()=>N=!0),"function"==typeof BroadcastChannel&&new BroadcastChannel("shared-worker-error").addEventListener("message",e=>{_(e.data.error)});let b=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"]},75632:(e,t,n)=>{n.d(t,{G7:()=>l,XY:()=>c,fQ:()=>s});var a=n(5225),i=n(56176);function r(){return new Set((0,i._$)().featureFlags.map(e=>e.toLowerCase()))}let o=n(47584).X3||function(){try{return process?.env?.STORYBOOK==="true"}catch{return!1}}()?r:(0,a.A)(r);function s(){return Array.from(o())}function l(e){return o().has(e.toLowerCase())}let c={isFeatureEnabled:l}},11086:(e,t,n)=>{n.d(t,{t:()=>i});var a=n(5804);let i=({items:e,filter:t,key:n,secondaryKey:i})=>{let r=e.map(e=>[(0,a.dt)(t,n(e)),e]);return i&&(r=r.map(([e,n])=>[Math.max(e,(0,a.dt)(t,i(n))),n])),r.filter(([e])=>e>a.IP).sort(([e,t],[a,i])=>a===e?n(t).localeCompare(n(i)):a-e).map(([,e])=>e)}},5804:(e,t,n)=>{n.d(t,{Dx:()=>o,IP:()=>r,M4:()=>i,dt:()=>s});var a=n(91385);let i=1/0,r=-1/0,o=1,s=(e,t,n=o)=>{let s=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(s===l)return i;if(0===l.length||0===s.length)return r;let c=(0,a.fN)(s,l);return c===1/0&&s!==l?r:l.startsWith(s)||l.endsWith(s)?c+n:c}},39483:(e,t,n)=>{n.d(t,{A:()=>o});let a=n.p+"azure-91ef97089dff.png",i=n.p+"jetbrains-e16495e63a33.png",r=n.p+"neovim-3301f23c4307.png",o={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:n.p+"vscode-380056900de8.png",name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:i,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:r,name:"Neovim",eventName:"NEOVIM"},datastudio:{url:"https://learn.microsoft.com/en-us/azure-data-studio/extensions/github-copilot-extension-overview",icon:a,name:"Azure Data Studio",eventName:"AZURE_DATA"}}},9080:(e,t,n)=>{n.d(t,{k:()=>o,v:()=>s});var a=n(5225),i=n(47584);let r=(0,a.A)(function(){return i.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),o=(0,a.A)(function(){return"enterprise"===r()}),s="webpack"},80688:(e,t,n)=>{n.d(t,{A:()=>o,D:()=>s});var a=n(47584),i=n(57516);let r=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function o(e,t={throwQuotaErrorsOnSet:!1},n=a.cg,s=e=>e,l=e=>e){let c;try{if(!n)throw Error();c=n[e]||new r}catch{c=new r}let{throwQuotaErrorsOnSet:d}=t;function u(e){t.sendCacheStats&&(0,i.i)({incrementKey:e})}function m(e){try{if(c.removeItem(e),t.ttl){let t=`${e}:expiry`;c.removeItem(t)}}catch{}}return{getItem:function(e,t=Date.now()){try{let n=c.getItem(e);if(!n)return null;let a=`${e}:expiry`,i=Number(c.getItem(a));if(i&&t>i)return m(e),m(a),u("SAFE_STORAGE_VALUE_EXPIRED"),null;return u("SAFE_STORAGE_VALUE_WITHIN_TTL"),s(n)}catch{return null}},setItem:function(e,n,a=Date.now()){try{if(c.setItem(e,l(n)),t.ttl){let n=`${e}:expiry`,i=a+t.ttl;c.setItem(n,i.toString())}}catch(e){if(d&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:m,clear:c.clear,key:c.key,get length(){return c.length}}}function s(e){return o(e,{throwQuotaErrorsOnSet:!1},a.cg,JSON.parse,JSON.stringify)}},32329:(e,t,n)=>{n.d(t,{Ai:()=>r,Gq:()=>a,SO:()=>i});let{getItem:a,setItem:i,removeItem:r}=(0,n(80688).A)("sessionStorage")},95505:(e,t,n)=>{n.d(t,{BW:()=>i,Ff:()=>p,HK:()=>_,JA:()=>S,LM:()=>h,Pv:()=>j,Vy:()=>m,ZW:()=>C,dR:()=>y,di:()=>g,fX:()=>N,gc:()=>b,k9:()=>x,my:()=>v,r7:()=>I,wG:()=>f,xT:()=>u});var a=n(32329);let i="reload",r="soft-nav:fail",o="soft-nav:fail-referrer",s="soft-nav:referrer",l="soft-nav:marker",c="soft-nav:react-app-name",d="soft-nav:latest-mechanism";function u(){(0,a.SO)(l,"0"),(0,a.Ai)(s),(0,a.Ai)(r),(0,a.Ai)(o),(0,a.Ai)(c),(0,a.Ai)(d)}function m(e){(0,a.SO)(l,e)}function p(){(0,a.SO)(l,"0")}function h(){let e=(0,a.Gq)(l);return e&&"0"!==e}function g(){return(0,a.Gq)(l)}function f(){return!!v()}function v(){return(0,a.Gq)(r)}function x(e){(0,a.SO)(r,e||i),(0,a.SO)(o,window.location.href)}function _(){(0,a.SO)(s,window.location.href)}function y(){return(0,a.Gq)(s)||document.referrer}function C(){let e=N();e?(0,a.SO)(c,e):(0,a.Ai)(c)}function j(){return(0,a.Gq)(c)}function N(){return document.querySelector('react-partial[partial-name="repos-overview"]')?"repos-overview":document.querySelector("react-app")?.getAttribute("app-name")}function b(){return!!document.querySelector("react-app")?.getAttribute("app-name")}function S(e){(0,a.SO)(d,e)}function I(){return(0,a.Gq)(d)}},47584:(e,t,n)=>{n.d(t,{KJ:()=>a.KJ,Kn:()=>i.Kn,X3:()=>a.X3,XC:()=>i.XC,cg:()=>i.cg,fV:()=>i.fV,g5:()=>a.g5});var a=n(25992),i=n(39833)},39833:(e,t,n)=>{n.d(t,{Kn:()=>o,XC:()=>i,cg:()=>r,fV:()=>s});let a="undefined"!=typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,i="undefined"==typeof document||a?void 0:document,r="undefined"==typeof window||a?void 0:window,o="undefined"==typeof history||a?void 0:history,s="undefined"==typeof location||a?{pathname:"",origin:"",search:"",hash:"",href:""}:location},25992:(e,t,n)=>{n.d(t,{KJ:()=>r,X3:()=>i,g5:()=>o});var a=n(39833);let i=void 0===a.XC,r=!i;function o(){return!!i||!a.XC||!!(a.XC.querySelector('react-app[data-ssr="true"]')||a.XC.querySelector('react-partial[data-ssr="true"][partial-name="repos-overview"]'))}},57516:(e,t,n)=>{n.d(t,{X:()=>h,i:()=>d});var a=n(47584),i=n(75028),r=n(9080),o=n(75632),s=n(56176),l=n(70170);let c=[];function d(e,t=!1,n=.5){if(!a.X3&&!0!==(0,o.G7)("BROWSER_STATS_DISABLED")){if(n<0||n>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=Date.now()),e.loggedIn=(0,s.M3)(),e.staff=h(),e.bundler=r.v,Math.random()<n&&c.push(e),t?p():m()}}let u=null,m=(0,l.n)(async function(){await i.K,null==u&&(u=window.requestIdleCallback(p))},5e3);function p(){if(u=null,!c.length)return;let e=a.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],n=e.map(e=>JSON.stringify(e));for(;n.length>0;)t.push(function(e){let t=e.shift(),n=[t],a=t.length;for(;e.length>0&&a<=65536;){let t=e[0].length;if(a+t<=65536){let i=e.shift();n.push(i),a+=t}else break}return n}(n));return t}(c))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);c=[]}}function h(){return!!a.XC?.head?.querySelector('meta[name="user-staff"]')?.content}a.XC?.addEventListener("pagehide",p),a.XC?.addEventListener("visibilitychange",p)},42252:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(96540);function i(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},18610:(e,t,n)=>{n.d(t,{N:()=>i});var a=n(96540);function i(e,{isPropUpdateDisabled:t=!1,isEqual:n=Object.is}={}){let[r,o]=(0,a.useState)(e),[s,l]=(0,a.useState)(e),c=e instanceof Function?e():e;return t||n(s,c)||(l(c),o(c)),[r,o]}},34225:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(74848),i=n(24774),r=n(96540),o=n(6585),s=n(5853),l=n(9299),c=n(45230),d=n(54528),u=n(15874);let m=(0,n(91752).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],p=[(0,c.b6)(),(0,u.WD)(),(0,i.$K)({formatNumber:e=>e.toString().padStart(3," ")}),(0,u.SG)(),(0,i.vX)({position:"absolute"}),(0,d.$P)({top:!0}),i.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),i.w4.of([...m,...c.pw,...d.Eo,...c.cL])];var h=n(43720);let g={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-gutter-fontSize, var(--codeMirror-content-fontSize, 12px))",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-content-fontSize, 12px)",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},"&.hide-help":{"& .cm-panels-top":{display:"none",position:"absolute"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em",color:"var(--fgColor-muted)"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},f=[{tag:[h._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[h._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[h._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[h._A.string,h._A.url,h._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[h._A.constant(h._A.name),h._A.propertyName,h._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.atom,h._A.number,h._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[h._A.function(h._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:h._A.definition(h._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:h._A.meta,color:"inherit"},{tag:h._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:h._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],v=[{tag:h._A.link,textDecoration:"underline"},{tag:h._A.emphasis,fontStyle:"italic"},{tag:h._A.strong,fontWeight:"bold"},{tag:h._A.strikethrough,textDecoration:"line-through"}],x=[...f,...v],_=[...f,...v];function y(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?_:x,...e];return[i.Lz.theme(g),(0,u.y9)(u.cr.define(t),{fallback:!0})]}let C=e=>{let t=[o.$t.tabSize.of(e.indentUnit)];return e.indentWithTabs?t.push(u.Xt.of("	")):t.push(u.Xt.of(" ".repeat(e.indentUnit))),e.lineWrapping&&t.push(i.Lz.lineWrapping),t};var j=n(42378);let N=(e,t)=>{let{state:n,placeholder:a,replacementText:i}=e.detail;"uploading"===n?(0,j.w0)(t)?(0,j.tJ)(t,a):(0,j.TC)(t,i):("uploaded"===n||"failed"===n)&&(0,j.TB)(t,a,i)},b=(e,t)=>{let{left:n,top:a}=e.detail,i=t.posAtCoords({x:n,y:a});i&&t.dispatch({selection:{anchor:i,head:i}})},S=new WeakMap;function I(e,t){if((0,j.w0)(e)){let n=(0,j.Lo)(e.state);(0,j.tJ)(e,`${t}${n}${t}`)}else{let n=(0,j.BE)(e);(0,j.TC)(e,t.repeat(2)),(0,j.f9)(e,n.anchor+t.length)}return!0}function w(e,t){let n=(0,j.BE)(e),a=e.state.doc.lineAt(n.from),i=(0,j.Lo)(e.state),r=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(i){let n=(i.endsWith("\n")?i.slice(0,-2):i).split("\n").map((t,n)=>{let i=a.number+n;return{text:e.state.doc.line(i).text,lineNumber:i}}),o=n.every(e=>r.test(e.text));for(let a=0;a<n.length;a++){let i=n[a];if(o){let t=i.text.match(r);t&&(0,j.YH)(e,i?.lineNumber,t[0])}else{let n=`${"ol"===t?`${a+1}.`:t} `;(0,j.Md)(e,i?.lineNumber,n)}}}else{let i=a.text.match(r);if(i)(0,j.YH)(e,a.number,i[0]);else{let i=`${"ol"===t?"1.":t} `;(0,j.Md)(e,a.number,i),a.text||(0,j.f9)(e,n.anchor+i.length)}}return!0}let E=[{key:"Mod-i",run:e=>I(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>I(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>I(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,j.Lo)(e.state);if(t){let n=`[${t}](url)`;(0,j.tJ)(e,n);let a=(0,j.I6)(e,n).value.from;(0,j.td)(e,a+t.length+3,a+t.length+6)}else{let t=(0,j.BE)(e);(0,j.TC)(e,"[](url)"),(0,j.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>w(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>w(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>w(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(S.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(S.set(e,!0),!1)}];function T(e){let t=i.NZ.line({attributes:{dir:"auto"}}),n=new o.vB;for(let{from:a,to:i}of e.visibleRanges)for(let r=a;r<=i;){let a=e.state.doc.lineAt(r);n.add(a.from,a.from,t),r=a.to+1}return n.finish()}let P=i.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=T(e.view))}constructor(e){!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"decorations",void 0),this.decorations=T(e)}},{decorations:e=>e.decorations}),k=[i.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){S.get(t)||function(e,t){let n=(0,j.Lo)(e.state),a=t.clipboardData;if(n&&a){let i=a.getData("text/plain");if(!/^https?:\/\//i.test(i))return;i&&(t.preventDefault(),(0,j.tJ)(e,`[${n}](${i})`))}}(t,e),S.set(t,!1)}}),i.w4.of(E),P];var A=n(47404),L=n(5225),D=n(48741);let O=(0,L.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let n=await t.json();return Object.keys(n).map(e=>{let t=n[e];return{name:e,src:t[0],emoji:t[1]}})}),R=o.Pe.define({map:({from:e,to:t,severity:n},a)=>({from:a.mapPos(e),to:a.mapPos(t),severity:n})}),B=o.sU.define({create:()=>i.NZ.none,update(e,t){for(let n of(e=e.map(t.changes),t.effects))n.is(R)&&("error"===n.value.severity?e=e.update({add:[M.range(n.value.from,n.value.to)]}):"warning"===n.value.severity?e=e.update({add:[U.range(n.value.from,n.value.to)]}):"info"===n.value.severity&&(e=e.update({add:[$.range(n.value.from,n.value.to)]})));return e},provide:e=>i.Lz.decorations.from(e)}),M=i.NZ.mark({class:"CodeMirror-lint-mark-error"}),U=i.NZ.mark({class:"CodeMirror-lint-mark-warning"}),$=i.NZ.mark({class:"CodeMirror-lint-mark-info"}),V=(e,t)=>{let{from:n,to:a,severity:i}=e.detail,r=(0,j.TU)(t,{line:n.lineNumber,ch:n.character}),o=(0,j.TU)(t,{line:a.lineNumber,ch:a.character});t.dispatch({effects:[R.of({from:r,to:o,severity:i})]})},F={ruby:[{tag:h._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}],html:[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity-tag)"}],javascript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"}],typescript:[{tag:h._A.name,color:"var(--color-prettylights-syntax-variable)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],java:[{tag:h._A.typeName,color:"var(--color-prettylights-syntax-entity)"}],"c++":[{tag:h._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],php:[{tag:h._A.processingInstruction,color:"var(--color-prettylights-syntax-constant)"},{tag:h._A.name,color:"var(--color-prettylights-syntax-entity)"}]},W=Object.keys(F);var z=n(48031);let H={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,c.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(u.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:c.Mg},G=(0,r.forwardRef)((e,t)=>{let{value:n="",extensions:c=[],keyBindings:d=[],height:u="85vh",width:m="100%",focusNextRenderRef:h,containerClassName:g,...f}=e,v=(0,r.useRef)(null),x=function({extensions:e=[],fileName:t="",onChange:n,spacing:a,isHpc:c,isReadOnly:d,enableFileUpload:u,parentRef:m,placeholder:h="Enter file contents here",ariaLabelledBy:g,value:f,width:v="",height:x="",minHeight:_="",hideHelpUntilFocus:j,hideHelp:S,onCreateEditor:I,onDestroyEditor:w}){let E=(0,r.useRef)(void 0),T=(0,r.useMemo)(()=>new o.xx,[]),P=(0,r.useMemo)(()=>new o.xx,[]),L=(0,r.useMemo)(()=>new o.xx,[]),R=(0,r.useCallback)(e=>{e.docChanged&&n(e.state.doc.toString()||"")},[n]),M=i.Lz.updateListener.of(R),U=i.Lz.theme({"&":{height:x,minHeight:_,width:v}}),$=(0,r.useMemo)(()=>[...p,M,U,(0,i.qf)(h),...C(a),[i.Lz.domEventHandlers({"secret-detected:lint":V}),B],T.of([]),P.of([]),L.of([y()]),[i.Z9.fromClass(class{constructor(e){e.scrollDOM.tabIndex=0,e.scrollDOM.setAttribute("role","region"),e.scrollDOM.setAttribute("aria-labelledby",g)}})],i.Lz.contentAttributes.of({"aria-labelledby":`${g} focus-trap-help-panel`}),i.Lz.editorAttributes.of({class:j?"hide-help-until-focus":""}),i.Lz.editorAttributes.of({class:S?"hide-help":""})],[M,U,h,a,T,P,L,g,j,S]);return(u&&($.push((0,i.A)()),$.push([i.Lz.domEventHandlers({"upload:editor:change":N,"upload:editor:cursor":b})])),c&&$.push(i.Lz.editorAttributes.of({"data-hpc":"true"})),d)?$.push(o.$t.readOnly.of(!0)):$.push([function(e,t,n){let a=new o.xx;return[a.of(n?t:[]),i.w4.of([{key:e,run:function(e){let n=a.get(e.state)===t;return e.dispatch({effects:a.reconfigure(n?[]:t)}),!0}}])]}("Shift-Ctrl-m",i.w4.of([H]),!0),(0,z.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}(),S?"top":"bottom")]),$=$.concat(e),(0,r.useEffect)(()=>{let e=m.current;if(!e)return;let t=o.$t.create({doc:f,extensions:$}),n=new i.Lz({state:t,parent:e});return I?.(n),E.current=n,()=>{n.destroy(),w?.(n)}},[]),(0,r.useEffect)(()=>{E.current&&(E.current.dispatch({effects:P.reconfigure([])}),E.current.dispatch({effects:o.Pe.reconfigure.of($)}))},[P,$]),(0,r.useEffect)(()=>{if(E.current&&void 0!==f){let e=E.current.state.doc.toString()||"",t=f||"";t!==e&&E.current.dispatch({changes:{from:0,to:e.length,insert:t}})}},[f]),(0,r.useEffect)(()=>{let e=async()=>{let e=t.split(".").pop()||"",n=e?s.e.find(n=>n.extensions.includes(e)||n.filename&&n.filename.test(t)):void 0;if(n&&E.current){var a;let e=(a=n.name,W.includes(a.toLowerCase())?F[a.toLowerCase()]:null);e&&E.current.dispatch({effects:L.reconfigure(y(e))}),"Markdown"===n.name?(E.current.dispatch({effects:T.reconfigure((0,l.markdown)({base:l.markdownLanguage}))}),E.current.dispatch({effects:o.Pe.reconfigure.of([...k,...$])}),E.current.dispatch({effects:P.reconfigure([D.E,(0,A.yU)({override:[async e=>(function(e,t=[]){let n=e.matchBefore(/:\w+/);if(!n||n&&n.from===n.to&&!e.explicit)return null;let a=t.filter(e=>-1!==e.name.indexOf(n.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:n.from,to:n.to,options:a,filter:!1}})(e,await O())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),o.Nb.highest(i.w4.of([{key:"Tab",run:A.$w}]))])})):(E.current.dispatch({effects:P.reconfigure([])}),E.current.dispatch({effects:T.reconfigure(await n.load())}))}};E.current&&e()},[t,T,P,$,L]),E}({parentRef:v,value:n,height:u,width:m,extensions:[...c,i.w4.of(d)],...f});return(0,r.useImperativeHandle)(t,()=>({editor:v.current,view:x.current}),[v,x]),h?.current&&x&&(window.requestAnimationFrame(()=>{x.current&&!x.current.hasFocus&&x.current.focus()}),h.current=!1),(0,a.jsx)("div",{className:g,ref:v})});G.displayName="CodeMirror";let q=G},14987:(e,t,n)=>{n.d(t,{l:()=>u});var a=n(74848),i=n(51349),r=n(57572),o=n(96540),s=n(2622),l=n(54912);let c=(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),d=[{name:"Hate it",value:1,icon:c,color:"veryDissatisfied"},{name:"Not great",value:2,icon:(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),color:"satisfied"},{name:"Love it",value:4,icon:(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]}),color:"verySatisfied"}],u=(0,o.forwardRef)(function({mode:e},t){let n=(0,o.useRef)(null),c=(0,o.useRef)(null),u=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(t,()=>({openDialog:e=>{u.current=e,s.W.copilotChatInterviewSurvey?n.current?.openDialog():c.current?.openDialog(e)}}));let m=async(t,n)=>{let a=[];if(null==t&&a.push("Please select a rating."),n.length>2e3&&a.push("Please keep your feedback within 2000 characters or less."),a.length>0)return a;let i={rating:t,content:n,hostname:window.location.hostname,path:window.location.pathname,mode:e};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||a.push("An error occurred while submitting your feedback.")}catch{a.push("An error occurred while submitting your feedback.")}return a};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.E,{ref:n,onClose:e=>{"no-thanks"===e&&c.current?.openDialog(u.current)}}),(0,a.jsx)(i.N,{ref:c,options:d,onSubmit:m})]})});u.displayName="ConversationFeedbackDialog"},25408:(e,t,n)=>{n.d(t,{Y:()=>S});var a,i=n(74848),r=n(70170),o=n(46988),s=n(53949),l=n(11499),c=n(38568),d=n(57572),u=n(16255),m=n(73451),p=n(51856),h=n(55847),g=n(74144),f=n(96540),v=n(65615),x=n(7426);let _={footerContainer:"PersonalInstructionsDialog-module__footerContainer--YsPvr"};var y=n(38621),C=n(8338);let j={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,f.forwardRef)(function(e,t){let{onSelect:n}=e,[a,r]=(0,f.useState)(!1);return(0,i.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:{marginBottom:"1px"},children:[(0,i.jsx)(C.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:a&&Object.entries(j)?.map(([e,t])=>i.jsxs(C.l.Item,{"aria-label":`${t.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>n(e,t.body),children:[i.jsx(y.PlusIcon,{}),e]},e))}),(0,i.jsx)(C.l,{className:"d-flex flex-column flex-justify-end",children:(0,i.jsx)(C.l.Item,{"aria-label":a?"Hide templates":"Show templates","data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:{border:"1px solid transparent"},onSelect:()=>r(!a),children:a?(0,i.jsx)(y.XIcon,{}):(0,i.jsx)(y.LightBulbIcon,{})})})]})});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(a=PersonalInstructionsTemplatesWithRef).displayName||(a.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let b=(e,t=500)=>{let[n,a]=(0,f.useState)(48);return(0,f.useEffect)(()=>{let n=(0,r.s)(()=>{e?.current&&a(e.current.clientHeight??48)},t),i=new ResizeObserver(n);return e?.current&&i.observe(e.current),()=>{n.cancel(),i?.disconnect?.()}},[e,t]),n},S=({onDismiss:e})=>{let t=(0,v.Pk)(),n=(0,x.b)(),[a,r]=(0,f.useState)(t.personalInstructions??""),[y,C]=(0,f.useState)(void 0),[j,S]=(0,f.useState)(!1),w=(0,f.useRef)(null),E=(0,f.useRef)(null),[T,P]=(0,f.useState)(""),k=b(E);(0,c.N)(()=>{w?.current&&(w.current.scrollTop=w.current.scrollHeight)},[a]);let A=(0,f.useCallback)(async()=>{if(!j){S(!0),T&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:T});try{let t=await (0,d.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:a}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),n.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:a}),e();else{let e=await t.json();C(String(e.errorMessage))}}catch{C("An error occurred while saving your personal instructions.")}finally{S(!1)}}},[j,a,n,e,T]),L=(e,t)=>{t&&(r(a?`${a}
${t}`:t),P(e),w?.current?.focus())},D=()=>{A()},O=(0,f.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),e()},[e]);return(0,i.jsx)(u.Z,{children:(0,i.jsx)(g.l,{onClose:O,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",renderBody:()=>(0,i.jsx)(g.l.Body,{children:(0,i.jsx)("form",{onSubmit:A,children:(0,i.jsxs)(m.A,{children:[(0,i.jsx)(m.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,i.jsx)("div",{className:"width-full position-relative",children:(0,i.jsxs)(l.tL,{commands:{"github:submit-form":D},children:[(0,i.jsx)(p.Ay,{ref:w,className:"width-full",style:{paddingBottom:`${k}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:a,validationStatus:y||a.length>600?"error":void 0,...(0,s.G)("prompt-input"),onChange:e=>{r(e.target.value),C(void 0)}}),(0,i.jsx)(N,{ref:E,onSelect:L})]})}),(0,i.jsx)(I,{text:a,promptCharLimit:600}),y&&(0,i.jsx)(m.A.Validation,{variant:"error",children:(0,i.jsx)("span",{...(0,s.G)("error-message"),children:y})})]})})}),renderFooter:()=>(0,i.jsxs)("div",{className:_.footerContainer,children:[(0,i.jsx)(h.Q,{variant:"default",onClick:O,children:"Cancel"}),(0,i.jsx)(h.Q,{loading:j,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:A,children:"Save"})]})})})};function I({text:e,promptCharLimit:t}){let n=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-tabular-nums",...(0,s.G)("current-character-count"),children:e.length})," ","/ ",t," characters"]});return(0,i.jsx)(i.Fragment,{children:e.length>t?(0,i.jsx)(m.A.Validation,{variant:"error",children:n}):(0,i.jsx)(m.A.Caption,{children:n})})}try{S.displayName||(S.displayName="PersonalInstructionsDialog")}catch{}try{I.displayName||(I.displayName="CharacterCount")}catch{}},57393:(e,t,n)=>{n.d(t,{X:()=>x});var a=n(74848),i=n(38621),r=n(16255),o=n(73451),s=n(51856),l=n(67138),c=n(75177),d=n(46309),u=n(81679),m=n(87330),p=n(55847),h=n(74144),g=n(96540),f=n(37937),v=n(7426);let x=({onDismiss:e,promptDialogRef:t})=>{let n=(0,v.b)(),x=f.J.settings,[_,y]=(0,g.useState)(x?.instructionPrompt||void 0),[C,j]=(0,g.useState)(x?.skillOverrides??[]),[N,b]=(0,g.useState)(x?.temperature||.7),S=(0,g.useRef)(void 0),I=(0,g.useCallback)(async()=>{if(S.current){y(S.current);return}let e=await n.getSystemPrompt();S.current=e,y(e)},[n]);(0,g.useEffect)(()=>{(async()=>{void 0===_&&await I()})()},[I,n,_]);let w=(0,g.useCallback)(()=>{I(),j([]),b(.7)},[I]);return(0,a.jsx)(r.Z,{children:(0,a.jsxs)(h.l,{ref:t,onClose:e,title:"Prompt Settings",width:"xlarge",sx:{overflow:"auto"},children:[(0,a.jsxs)(h.l.Body,{children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"System Instructions"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),(0,a.jsx)(s.Ay,{block:!0,sx:{my:2},"aria-label":"Prompt",name:"Prompt",value:_,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)(o.A,{sx:{pt:3},children:[(0,a.jsx)(o.A.Label,{children:"Temperature"}),(0,a.jsx)(o.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),(0,a.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:N,onChange:e=>b(Number(e.target.value))})]}),(0,a.jsx)(c.A,{sx:{fontSize:3,py:3},children:"Tools"}),C.map((e,t)=>(0,a.jsxs)(g.Fragment,{children:[(0,a.jsxs)(d.B,{direction:"horizontal",sx:{py:2},children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Name"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,a.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{C.map((n,a)=>{a===t&&(n.slug=e.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{children:"Description"}),(0,a.jsx)(o.A.Caption,{children:(0,a.jsx)("span",{children:"Make changes to the tool description"})}),(0,a.jsx)(l.A,{defaultValue:e.description,onChange:n=>{C.map((a,i)=>{i===t&&(e.description=n.target.value)})}})]}),(0,a.jsxs)(o.A,{children:[(0,a.jsx)(o.A.Label,{id:"toggle",children:"Enabled?"}),(0,a.jsx)(u.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{C.map((n,a)=>{a===t&&(n.enabled=e)})}})]}),(0,a.jsx)(m.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",sx:{mt:"20px"},onClick:()=>{let e=[...C];1===C.length?j([]):(e.splice(t,1),j(e))}})]}),t===C.length-1&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>j([...C,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),0===C.length&&(0,a.jsx)(p.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>j([...C,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"})]}),(0,a.jsx)(h.l.Footer,{children:(0,a.jsx)(h.l.Buttons,{buttons:[{type:"button",onClick:e,content:"Cancel"},{type:"button",onClick:w,content:"Reset"},{type:"submit",onClick:()=>{let t=C.filter(e=>e.slug&&e.description);n.setCopilotSettings({instructionPrompt:_||"",skillOverrides:t,temperature:N}),e()},content:"Save",buttonType:"primary"}]})})]})})};try{x.displayName||(x.displayName="PromptDialog")}catch{}},2497:(e,t,n)=>{n.d(t,{Vx:()=>d});var a,i,r=n(74848),o=n(38621),s=n(96540),l=n(84976);let c={subList:"Navigation-module__subList--Ued7A",section:"Navigation-module__section--KRddB",expandButton:"Navigation-module__expandButton--v40lv",item:"Navigation-module__item--KtIqz",link:"Navigation-module__link--ybSvz",contextButton:"Navigation-module__contextButton--AhNds",icon:"Navigation-module__icon--szbQF",textWrapper:"Navigation-module__textWrapper--qEAz8",text:"Navigation-module__text--KFINZ"};function d({"aria-current":e,children:t,contextMenuComponent:n,expandOnClick:a=!0,hasItems:i,href:d,icon:u,iconOverride:m,onLinkClick:p,id:h,displayName:g}){let[f,v]=(0,s.useState)(!1),x={"aria-current":e,className:c.link,onClick:e=>{p?.(e,h),a&&v(!0)}};return(0,r.jsxs)("li",{className:c.section,children:[(0,r.jsxs)("div",{className:c.item,children:[i&&(0,r.jsx)("button",{"aria-label":"Expand","aria-expanded":f,className:c.expandButton,onClick:()=>{v(!f)},children:f?(0,r.jsx)(o.ChevronDownIcon,{size:12}):(0,r.jsx)(o.ChevronRightIcon,{size:12})}),(0,r.jsxs)(l.N_,{to:d,...x,children:[u?(0,r.jsx)(u,{size:16,className:c.icon}):m,(0,r.jsx)("div",{className:c.textWrapper,children:(0,r.jsx)("div",{className:c.text,children:g})})]}),n]}),f&&i&&(0,r.jsx)("ul",{className:c.subList,children:t})]})}try{d.displayName||(d.displayName="Navigation")}catch{}try{(a=function({"aria-current":e,contextMenuComponent:t,displayName:n,href:a,icon:i,iconOverride:o,onLinkClick:s}){return(0,r.jsxs)("li",{className:c.item,children:[(0,r.jsxs)(l.N_,{className:c.link,to:a,"aria-current":e,onClick:s,children:[i?(0,r.jsx)(i,{size:16,className:c.icon}):o,(0,r.jsx)("div",{className:c.textWrapper,children:(0,r.jsx)("div",{className:c.text,children:n})})]}),t]})}).displayName||(a.displayName="NavigationSubItem")}catch{}try{(i=function(e){return(0,r.jsx)("button",{...e,className:c.contextButton,children:(0,r.jsx)(o.KebabHorizontalIcon,{size:16})})}).displayName||(i.displayName="NavigationContextMenuButton")}catch{}},88104:(e,t,n)=>{n.d(t,{BH:()=>_,xx:()=>y});var a=n(74848),i=n(65615),r=n(44848),o=n(42252),s=n(96540),l=n(32837),c=n(54533),d=n(7426),u=n(82610);let m=e=>"file"===e.type&&e.isUserEdited,p=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>t.get(e)===n),h=(e,t)=>!p(new Map(e.filter(e=>"thread-scoped-file"===e.type).map(e=>[(0,u.Vb)(e),e.text])),new Map(t.filter(e=>"thread-scoped-file"===e.type).map(e=>[(0,u.Vb)(e),e.text]))),g=(e,t)=>!p(new Map(Array.from(e).filter(([,e])=>m(e))),new Map(Array.from(t).filter(([,e])=>m(e)))),f=(0,s.createContext)(void 0),v=new Map,x=[];function _({children:e}){let[t,n]=(0,s.useState)(v),[p,_]=(0,s.useState)(x),[y,C]=(0,s.useState)(x),[j,N]=(0,s.useState)([]),[b,S]=(0,s.useState)(void 0),[I,w,E]=(0,l.B)(!1),[T,P,k]=(0,l.B)(!1),A=(0,r.nu)((0,i.A3)("activePlugin")),L=(0,o.S)((0,i.pn)(e=>e.selectedThreadID)),D=(0,i.pn)(e=>e.selectedThreadID);(0,s.useEffect)(()=>{L&&L!==D&&(n(v),_(x),S(void 0),A?.PreviewAreaComponent&&null!==D||E())},[E,D,L,A]);let O=(0,s.useCallback)((e,t=!0)=>{_(t=>{if(t.includes(e))return t;let n=(0,c.oy)(e),a=t.findIndex(e=>(0,c.oy)(e)===n),i=[...t];return -1===a?i.push(e):i.splice(a,1,e),i}),S(n=>t||void 0!==n&&(0,c.oy)(n)===(0,c.oy)(e)?e:n)},[]),R=(0,s.useCallback)(e=>{n(t=>{let n=new Map(t);return n.set(e.id,e),n})},[]),B=(0,s.useCallback)(e=>{let t=p.indexOf(e),n=p.toSpliced(t,1);b===e&&S(n[t-1]??n[0]),_(n)},[p,b]),M=(0,s.useMemo)(()=>{let e=new Map;for(let[n,a]of t){let t=(0,c.oy)(n),i=e.get(t)??[];i.push(a.id),e.set(t,i)}for(let n of e.values())n.sort((e,n)=>{let a=t.get(e),i=t.get(n);return"timestamp"in a&&"timestamp"in i?a.timestamp.valueOf()-i.timestamp.valueOf():0});return e},[t]),U=(0,s.useCallback)(e=>{if(e){for(let t of e)if(n(e=>{let n=new Map(e);return n.delete(t),n}),p.includes(t)){let e=(0,c.oy)(t),n=M.get(e),a=n?.indexOf(t)??-1,i=n?.[a-1];i?O(i,!1):B(t)}}else n(v),_(x),S(void 0)},[O,B,M,p]),$=(0,s.useMemo)(()=>({items:t,versionedItems:M,openItems:I?p:x,openItemsBeforeSubthreadChange:y,messagesBeforeSubthreadChange:j,previewPaneOpen:I,selectedItem:b,updateItem:R,setOpenItemsBeforeSubthreadChange:C,setMessagesBeforeSubthreadChange:N,openItem:O,closeItem:B,openPreviewPane:w,closePreviewPane:E,removeItems:U,showLoadingState:T,enableLoadingState:P,disableLoadingState:k}),[t,M,I,p,y,j,b,R,C,N,O,B,w,E,U,T,P,k]);return!function({items:e,removeItems:t,updateItem:n}){let{currentReferences:a,messages:r}=(0,i.Pk)(),o=(0,d.b)(),l=(0,s.useRef)(e),p=(0,s.useRef)(a);(0,s.useEffect)(()=>{let i=g(l.current,e);l.current=e;let s=h(p.current,a);if(p.current=a,i){let t=new Map(Array.from(e.values()).filter(m).map(e=>(0,c.QA)(e)).map(e=>[(0,u.Vb)(e),e])),n=new Set;for(let e of a)if("thread-scoped-file"===e.type){let a=(0,u.Vb)(e);n.add(a);let i=t.get(a);i?i.text!==e.text&&o.addReference(i,"content-preview"):o.removeReference(e)}for(let[e,a]of t)n.has(e)||o.addReference(a,"content-preview")}else if(s){let i=new Map(a.filter(e=>"thread-scoped-file"===e.type).map(e=>(0,c.fQ)(e,r.length)).map(e=>[e.id,e])),o=new Set;for(let[a,r]of e)if(m(r)){o.add(a);let e=i.get(a);e?e.value!==r.value&&n(e):t([a])}for(let[e,t]of i)o.has(e)||n(t)}},[e,o,a,r.length,t,n])}($),(0,a.jsx)(f.Provider,{value:$,children:e})}function y(){let e=(0,s.useContext)(f);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}try{f.displayName||(f.displayName="ContentPreviewContext")}catch{}try{_.displayName||(_.displayName="ContentPreviewProvider")}catch{}},64633:(e,t,n)=>{n.d(t,{F:()=>l,t:()=>c});var a=n(74848),i=n(8338),r=n(39483),o=n(46988),s=n(2622);function l(e,t,n,a,i){let r=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,o.BI)("dotcom_chat.activate",{target:r,text:i,category:t,action:a,mode:n})}function c({menuLocation:e,mode:t}){return Object.entries(r.A).map(([n,{name:r,url:o,icon:c}])=>(0,a.jsxs)(i.l.LinkItem,{href:o,onClick:()=>{s.W.freeToPaidTelemetry&&l(n,e,t,"menu_item_click",r)},children:[r,(0,a.jsx)(i.l.LeadingVisual,{children:(0,a.jsx)("img",{src:c,alt:"",height:"20",width:"20"})})]},n))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},54946:(e,t,n)=>{n.d(t,{A:()=>l,u:()=>s});var a=n(74848),i=n(96540),r=n(55422);let o=(0,i.createContext)(null),s=({children:e})=>{let[t,n]=(0,i.useState)(""),s=(0,i.useMemo)(()=>({issueCommentHighlightId:t,setIssueCommentHighlightId:n}),[t]);return(0,a.jsx)(r.b,{children:(0,a.jsx)(o.Provider,{value:s,children:e})})},l=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useIssueViewerCommentsContext must be used within a IssueViewerCommentsContextProvider.");return e};try{o.displayName||(o.displayName="IssueViewerCommentsContext")}catch{}try{s.displayName||(s.displayName="IssueViewerCommentsContextProvider")}catch{}},3172:(e,t,n)=>{n.d(t,{e:()=>l});var a=n(74848),i=n(67737),r=n(91221),o=n(54946),s=n(62872);function l({children:e}){return(0,a.jsx)(o.u,{children:(0,a.jsx)(i.D,{children:(0,a.jsx)(r.T,{children:(0,a.jsx)(s.Q3,{children:e})})})})}try{l.displayName||(l.displayName="IssueViewerContextProvider")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["primer-react","react-core","react-lib","octicons-react","react-profiling","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-41b1a8","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-e7dcdd","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-2906d7","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_react-relay_index_js","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_fzy_js_index_js-node_mo-c4d1d6","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_lodash-es__baseIsEqual_js","vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js","vendors-node_modules_github_combobox-nav_dist_index_js-node_modules_github_g-emoji-element_di-24c074","vendors-node_modules_buffer_index_js","vendors-node_modules_react-relay_hooks_js-node_modules_color2k_dist_index_exports_import_es_m-e8b6bb","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_highlight_js_es_core_js-node_modules_lowlight_lib_all_js","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-fe32b5","vendors-node_modules_hastscript_lib_index_js-node_modules_react-markdown_lib_index_js-node_mo-68849e","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_codemirror_commands_dist_index_js-node_modules_codemirror_language-data_-92b5c9","vendors-node_modules_js-yaml_index_js","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-a7695e","vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_tanstack_react-query_build_-2dfd94","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_client-zip_index_js-no-0b2057","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_date-picker_ts-ui_packages_github-avatar_GitHubAvatar_tsx","ui_packages_item-picker_constants_labels_ts-ui_packages_item-picker_constants_values_ts-ui_pa-163a9a","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_comment-box_api_file-upload_ts-ui_packages_comment-box_api_preview_ts-ui_packages-2c5e84","ui_packages_copilot-chat_utils_copilot-chat-helpers_ts","ui_packages_drag-and-drop_drag-and-drop_ts","ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_signed-commit-badge_index_ts-ui_packages_use-navigate_use-navigate_ts","ui_packages_copilot-chat_utils_CopilotChatContext_tsx","ui_packages_item-picker_components_PullRequestAndBranchPicker_tsx","ui_packages_use-client-value_use-client-value_ts-ui_packages_issue-viewer_components_IssueVie-ae6c3b","ui_packages_copilot-chat_components_ChatInput_tsx-ui_packages_copilot-chat_components_LegalDi-36d9b7","ui_packages_copilot-chat_hooks_use-chat-message-behavior_ts-ui_packages_copilot-chat_hooks_us-f9f91d","ui_packages_app-uuid_app-uuid_ts-ui_packages_document-metadata_document-metadata_ts-ui_packag-7e8b56"],()=>t(61202)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-8c728534a04b.js.map